package ohos_app_cangjie_entry.game_body

import ohos.base.*
import ohos.component.*
import ohos.state_manage.*
import ohos.state_macro_manage.*
import cj_res_entry.*
import std.sync.*
import ohos.font.*
import std.time.*
import std.collection.ArrayList
import std.random.Random

type ObservedMatrix = ObservedArray<Int64>

type OpacityMatrix = ObservedArray<Float64>

//棋盘绘制组件
/* ===== Emitted by MacroCall @Component in draw.cj:19:1 ===== */
/* 19.1 */public class chessGrid <: CustomView {
/* 19.2 */    
/* 19.3 */    
/* 19.4 */    private var stateVarDecl_opc_: ObservedProperty < Float64 >= ObservedProperty < Float64 >("stateVarDecl_opc_", 0.0)
/* 19.5 */    
/* 19.6 */    
/* 19.7 */    private mut prop opc: Float64 {
/* 19.8 */        get() {
/* 19.9 */            return this.stateVarDecl_opc_.get()
/* 19.10 */        }
/* 19.11 */        set(v) {
/* 19.12 */            this.stateVarDecl_opc_.set(v)
/* 19.13 */        }
/* 19.14 */    }
/* 19.15 */    
/* 19.16 */    
/* 19.17 */    
/* 19.18 */    public func build() {
/* 19.19 */        
/* 19.20 */        this.observeComponentCreation({ elmtId, isInitialRender =>
/* 19.21 */            Grid { this.observeComponentCreation({ elmtId, isInitialRender => ForEach { let forEachItemGenFunction = { entity: Int64, index: Int64 => this.observeComponentCreation({ elmtId, isInitialRender => GridItem { this.observeComponentCreation({ elmtId, isInitialRender => Image(__GenerateResource__("", "", "", app.media.chessGridItem, "app.media.chessGridItem",[], 20000)) }) } }) }
/* 19.22 */            
/* 19.23 */            this.forEachUpdateFunction(elmtId, Array < Int64 >(81, { _ => 0 }), itemGenFunc: forEachItemGenFunction) } }) }.rowsTemplate("1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr ").columnsTemplate("1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr ").height(360).width(360).position(x: 249, y: 10).opacity(opc).onAppear({ => animateTo(AnimateParam(duration: 300, curve: Curve.Linear, delay: 0, iterations: 1, playMode: PlayMode.Alternate, onFinish: { => }, expectedFrameRateRange: ExpectedFrameRateRange(min: 20, max: 120, expected: 90)), { => opc = 1.0 }) })
/* 19.24 */        })
/* 19.25 */        
/* 19.26 */        ()
/* 19.27 */        
/* 19.28 */    }
/* 19.29 */    
/* 19.30 */    
/* 19.31 */    public init(parent: Option < CustomView >, opc!: Option < ObservedProperty < Float64 >>= None, localStorage!: Option < LocalStorage >= None) {
/* 19.32 */        super(parent, localStorage)
/* 19.33 */        
/* 19.34 */        
/* 19.35 */        match(opc) {
/* 19.36 */            case Some(v) => this.stateVarDecl_opc_ = ObservedProperty < Float64 >("stateVarDecl_opc_", v.get())
/* 19.37 */            case _ =>()
/* 19.38 */        }
/* 19.39 */        
/* 19.40 */        
/* 19.41 */        this.stateVarDecl_opc_.subscribeEx(this)
/* 19.42 */        
/* 19.43 */        SubscriberManager.getInstance().add(this)
/* 19.44 */        
/* 19.45 */        
/* 19.46 */        registerSelf()
/* 19.47 */        parent?.addChildById(id(), this)
/* 19.48 */    }
/* 19.49 */    
/* 19.50 */    
/* 19.51 */    public override func aboutToBeDeleted() {
/* 19.52 */        
/* 19.53 */        this.stateVarDecl_opc_.unsubscribeEx(this)
/* 19.54 */        
/* 19.55 */        SubscriberManager.getInstance().delete(this)
/* 19.56 */        this.aboutToBeDeletedInternal()
/* 19.57 */    }
/* 19.58 */    
/* 19.59 */    
/* 19.60 */    func updateWithValueParams(opc!: Option < Float64 >= Option < Float64 >.None): Unit {
/* 19.61 */        
/* 19.62 */        match(opc) {
/* 19.63 */            case Some(v) => this.opc = v
/* 19.64 */            case _ =>()
/* 19.65 */        }
/* 19.66 */        
/* 19.67 */    }
/* 19.68 */    
/* 19.69 */    
/* 19.70 */    public func rerender() {
/* 19.71 */        this.updateDirtyElements()
/* 19.72 */    }
/* 19.73 */    
/* 19.74 */    
/* 19.75 */    public func purgeVariableDependenciesOnElmtId(rmElmtId: Int64) {
/* 19.76 */        
/* 19.77 */        this.stateVarDecl_opc_.purgeDependencyOnElmtId(rmElmtId)
/* 19.78 */        
/* 19.79 */    }
/* 19.80 */    
/* 19.81 */    
/* 19.82 */    public func forceRerender(deep!: Bool = false) {
/* 19.83 */        this.forceCompleteRerender(deep)
/* 19.84 */    }
/* 19.85 */    
/* 19.86 */    
/* 19.87 */}
/* 19.88 */
/* ===== End of the Emit ===== */

/* ===== Emitted by MacroCall @Component in draw.cj:67:1 ===== */
/* 67.1 */public class testboard <: CustomView {
/* 67.2 */    
/* 67.3 */    
/* 67.4 */    private var stateVarDecl_data_: ObservedProperty < ObservedMatrix >
/* 67.5 */    
/* 67.6 */    
/* 67.7 */    private mut prop data: ObservedMatrix {
/* 67.8 */        get() {
/* 67.9 */            return this.stateVarDecl_data_.get()
/* 67.10 */        }
/* 67.11 */        set(v) {
/* 67.12 */            this.stateVarDecl_data_.set(v)
/* 67.13 */        }
/* 67.14 */    }
/* 67.15 */    
/* 67.16 */    
/* 67.17 */    private var stateVarDecl_game_: ObservedProperty < FourAscendGame >
/* 67.18 */    
/* 67.19 */    
/* 67.20 */    private mut prop game: FourAscendGame {
/* 67.21 */        get() {
/* 67.22 */            return this.stateVarDecl_game_.get()
/* 67.23 */        }
/* 67.24 */        set(v) {
/* 67.25 */            this.stateVarDecl_game_.set(v)
/* 67.26 */        }
/* 67.27 */    }
/* 67.28 */    
/* 67.29 */    
/* 67.30 */    private var stateVarDecl_game_state_: ObservedProperty < Board >
/* 67.31 */    
/* 67.32 */    
/* 67.33 */    private mut prop game_state: Board {
/* 67.34 */        get() {
/* 67.35 */            return this.stateVarDecl_game_state_.get()
/* 67.36 */        }
/* 67.37 */        set(v) {
/* 67.38 */            this.stateVarDecl_game_state_.set(v)
/* 67.39 */        }
/* 67.40 */    }
/* 67.41 */    
/* 67.42 */    
/* 67.43 */    private var stateVarDecl_player_: ObservedProperty < Int64 >
/* 67.44 */    
/* 67.45 */    
/* 67.46 */    private mut prop player: Int64 {
/* 67.47 */        get() {
/* 67.48 */            return this.stateVarDecl_player_.get()
/* 67.49 */        }
/* 67.50 */        set(v) {
/* 67.51 */            this.stateVarDecl_player_.set(v)
/* 67.52 */        }
/* 67.53 */    }
/* 67.54 */    
/* 67.55 */    
/* 67.56 */    private var stateVarDecl_step_: ObservedProperty < Int64 >
/* 67.57 */    
/* 67.58 */    
/* 67.59 */    private mut prop step: Int64 {
/* 67.60 */        get() {
/* 67.61 */            return this.stateVarDecl_step_.get()
/* 67.62 */        }
/* 67.63 */        set(v) {
/* 67.64 */            this.stateVarDecl_step_.set(v)
/* 67.65 */        }
/* 67.66 */    }
/* 67.67 */    
/* 67.68 */    
/* 67.69 */    private var stateVarDecl_AI_: ObservedProperty < StupidFourAscendPlayer >
/* 67.70 */    
/* 67.71 */    
/* 67.72 */    private mut prop AI: StupidFourAscendPlayer {
/* 67.73 */        get() {
/* 67.74 */            return this.stateVarDecl_AI_.get()
/* 67.75 */        }
/* 67.76 */        set(v) {
/* 67.77 */            this.stateVarDecl_AI_.set(v)
/* 67.78 */        }
/* 67.79 */    }
/* 67.80 */    
/* 67.81 */    
/* 67.82 */    private var stateVarDecl_opacityArray_: ObservedProperty < OpacityMatrix >
/* 67.83 */    
/* 67.84 */    
/* 67.85 */    private mut prop opacityArray: OpacityMatrix {
/* 67.86 */        get() {
/* 67.87 */            return this.stateVarDecl_opacityArray_.get()
/* 67.88 */        }
/* 67.89 */        set(v) {
/* 67.90 */            this.stateVarDecl_opacityArray_.set(v)
/* 67.91 */        }
/* 67.92 */    }
/* 67.93 */    
/* 67.94 */    
/* 67.95 */    private var stateVarDecl_wp_: ObservedProperty < ObservedArrayList < Array < Int64 >>>
/* 67.96 */    
/* 67.97 */    
/* 67.98 */    private mut prop wp: ObservedArrayList < Array < Int64 >> {
/* 67.99 */        get() {
/* 67.100 */            return this.stateVarDecl_wp_.get()
/* 67.101 */        }
/* 67.102 */        set(v) {
/* 67.103 */            this.stateVarDecl_wp_.set(v)
/* 67.104 */        }
/* 67.105 */    }
/* 67.106 */    
/* 67.107 */    
/* 67.108 */    private var stateVarDecl_bp_: ObservedProperty < ObservedArrayList < Array < Int64 >>>
/* 67.109 */    
/* 67.110 */    
/* 67.111 */    private mut prop bp: ObservedArrayList < Array < Int64 >> {
/* 67.112 */        get() {
/* 67.113 */            return this.stateVarDecl_bp_.get()
/* 67.114 */        }
/* 67.115 */        set(v) {
/* 67.116 */            this.stateVarDecl_bp_.set(v)
/* 67.117 */        }
/* 67.118 */    }
/* 67.119 */    
/* 67.120 */    
/* 67.121 */    private var stateVarDecl_animateFlag_: ObservedProperty < Bool >
/* 67.122 */    
/* 67.123 */    
/* 67.124 */    private mut prop animateFlag: Bool {
/* 67.125 */        get() {
/* 67.126 */            return this.stateVarDecl_animateFlag_.get()
/* 67.127 */        }
/* 67.128 */        set(v) {
/* 67.129 */            this.stateVarDecl_animateFlag_.set(v)
/* 67.130 */        }
/* 67.131 */    }
/* 67.132 */    
/* 67.133 */    
/* 67.134 */    private var stateVarDecl_unopposed_: ObservedProperty < Bool >
/* 67.135 */    
/* 67.136 */    
/* 67.137 */    private mut prop unopposed: Bool {
/* 67.138 */        get() {
/* 67.139 */            return this.stateVarDecl_unopposed_.get()
/* 67.140 */        }
/* 67.141 */        set(v) {
/* 67.142 */            this.stateVarDecl_unopposed_.set(v)
/* 67.143 */        }
/* 67.144 */    }
/* 67.145 */    
/* 67.146 */    
/* 67.147 */    let animateOpt = AnimateParam(duration: 600, curve: Curve.Smooth, delay: 0, iterations: - 1, playMode: PlayMode.Alternate, onFinish: { => AppLog.info("onfinish") }, expectedFrameRateRange: ExpectedFrameRateRange(min: 20, max: 120, expected: 90))
/* 67.148 */    
/* 67.149 */    
/* 67.150 */    private func changeOpacity(ascend_state: Array < Array < Int64 >>) {
/* 67.151 */        for(i in 0 .. 9) {
/* 67.152 */            for(j in 0 .. 9) {
/* 67.153 */                if(data[i * 9 + j] == 0 && this.game_state[2][i][j] == 1) {
/* 67.154 */                    this.opacityArray[i * 9 + j] = 0.8 - 0.5 * Float64(ascend_state[i][j])
/* 67.155 */                }
/* 67.156 */                else if(data[i * 9 + j] == 0 && this.game_state[2][i][j] == - 1) {
/* 67.157 */                    this.opacityArray[i * 9 + j] = 0.8 + 0.5 * Float64(ascend_state[i][j])
/* 67.158 */                }
/* 67.159 */            }
/* 67.160 */        }
/* 67.161 */    }
/* 67.162 */    
/* 67.163 */    
/* 67.164 */    private func JudgeAscendState() {
/* 67.165 */        for(i in 0 .. 9) {
/* 67.166 */            for(j in 0 .. 9) {
/* 67.167 */                if(data[i * 9 + j] == 0 && this.game_state[2][i][j] == 1) {
/* 67.168 */                    return false
/* 67.169 */                }
/* 67.170 */                else if(data[i * 9 + j] == 0 && this.game_state[2][i][j] == - 1) {
/* 67.171 */                    return false
/* 67.172 */                }
/* 67.173 */            }
/* 67.174 */        }
/* 67.175 */        return true
/* 67.176 */    }
/* 67.177 */    
/* 67.178 */    
/* 67.179 */    private func InitOpacitArray() {
/* 67.180 */        for(i in 0 .. 81) {
/* 67.181 */            this.opacityArray[i] = 0.8
/* 67.182 */        }
/* 67.183 */    }
/* 67.184 */    
/* 67.185 */    
/* 67.186 */    public func AddAscendChess() {
/* 67.187 */    }
/* 67.188 */    
/* 67.189 */    
/* 67.190 */    
/* 67.191 */    public func build() {
/* 67.192 */        
/* 67.193 */        this.observeComponentCreation({ elmtId, isInitialRender =>
/* 67.194 */            Stack { this.observeComponentCreation({ elmtId, isInitialRender => Grid { this.observeComponentCreation({ elmtId, isInitialRender => ForEach { let forEachItemGenFunction = { entity: Int64, index: Int64 => this.observeComponentCreation({ elmtId, isInitialRender => GridItem { this.observeComponentCreation({ elmtId, isInitialRender => If { if(data[index] == 1 && this.game_state[1][index / 9][index % 9] == 1) {
/* 67.195 */                this.ifElseBranchUpdateFunction(0, { => this.observeComponentCreation({ elmtId, isInitialRender => Image(__GenerateResource__("", "", "", app.media.White_Chess_Plant, "app.media.White_Chess_Plant",[], 20000)).height(30.0).width(30.0) }) })
/* 67.196 */            }
/* 67.197 */            else if(data[index] == 0 && this.game_state[1][index / 9][index % 9] == 1 && this.game_state[2][index / 9][index % 9] == 1) {
/* 67.198 */                this.ifElseBranchUpdateFunction(1, { => this.observeComponentCreation({ elmtId, isInitialRender => Image(__GenerateResource__("", "", "", app.media.White_Chess_Plant, "app.media.White_Chess_Plant",[], 20000)).animationStart(animateOpt).height(30.0).width(30.0).opacity(opacityArray[index]).onAppear({ => changeOpacity(this.game_state[2]) }).animationEnd() }) })
/* 67.199 */            }
/* 67.200 */            else if(data[index] == - 1 && this.game_state[1][index / 9][index % 9] == 1) {
/* 67.201 */                this.ifElseBranchUpdateFunction(2, { => this.observeComponentCreation({ elmtId, isInitialRender => Image(__GenerateResource__("", "", "", app.media.Black_Chess_Plant, "app.media.Black_Chess_Plant",[], 20000)).height(30.0).width(30.0) }) })
/* 67.202 */            }
/* 67.203 */            else if(data[index] == 0 && this.game_state[1][index / 9][index % 9] == 1 && this.game_state[2][index / 9][index % 9] == - 1) {
/* 67.204 */                this.ifElseBranchUpdateFunction(3, { => this.observeComponentCreation({ elmtId, isInitialRender => Image(__GenerateResource__("", "", "", app.media.Black_Chess_Plant, "app.media.Black_Chess_Plant",[], 20000)).animationStart(animateOpt).height(30.0).width(30.0).opacity(opacityArray[index]).onAppear({ => changeOpacity(this.game_state[2]) }).animationEnd() }) })
/* 67.205 */            }
/* 67.206 */            else if(data[index] == 1) {
/* 67.207 */                this.ifElseBranchUpdateFunction(4, { => this.observeComponentCreation({ elmtId, isInitialRender => Image(__GenerateResource__("", "", "", app.media.white_Chess, "app.media.white_Chess",[], 20000)).height(30.0).width(30.0) }) })
/* 67.208 */            }
/* 67.209 */            else if(data[index] == 0 && this.game_state[2][index / 9][index % 9] == 1) {
/* 67.210 */                this.ifElseBranchUpdateFunction(5, { => this.observeComponentCreation({ elmtId, isInitialRender => Image(__GenerateResource__("", "", "", app.media.white_Chess, "app.media.white_Chess",[], 20000)).animationStart(animateOpt).height(30.0).width(30.0).opacity(opacityArray[index]).onAppear({ => changeOpacity(this.game_state[2]) }).animationEnd() }) })
/* 67.211 */            }
/* 67.212 */            else if(data[index] == - 1) {
/* 67.213 */                this.ifElseBranchUpdateFunction(6, { => this.observeComponentCreation({ elmtId, isInitialRender => Image(__GenerateResource__("", "", "", app.media.black_Chess, "app.media.black_Chess",[], 20000)).height(30.0).width(30.0) }) })
/* 67.214 */            }
/* 67.215 */            else if(data[index] == 0 && this.game_state[2][index / 9][index % 9] == - 1) {
/* 67.216 */                this.ifElseBranchUpdateFunction(7, { => this.observeComponentCreation({ elmtId, isInitialRender => Image(__GenerateResource__("", "", "", app.media.black_Chess, "app.media.black_Chess",[], 20000)).animationStart(animateOpt).height(30.0).width(30.0).opacity(opacityArray[index]).onAppear({ => changeOpacity(this.game_state[2]) }).animationEnd() }) })
/* 67.217 */            }
/* 67.218 */            else {
/* 67.219 */                If.branchId(8)
/* 67.220 */            }
/* 67.221 */        } })
/* 67.222 */        this.observeComponentCreation({ elmtId, isInitialRender => If { if(game_state[1][index / 9][index % 9] == 1 && data[index] == 0 && game_state[2][index / 9][index % 9] == 0) {
/* 67.223 */            this.ifElseBranchUpdateFunction(0, { => this.observeComponentCreation({ elmtId, isInitialRender => Rect(width: 10, height: 10).foregroundColor(0xf7e200) }) })
/* 67.224 */        }
/* 67.225 */        else {
/* 67.226 */            If.branchId(1)
/* 67.227 */        }
/* 67.228 */    } }) }.height(40).width(40).onClick({ evt => if(data[index] == 0) {
/* 67.229 */        var back:(Int64, Int64, Board) = run(this.data, this.game, this.game_state, index, this.player, this.step)
/* 67.230 */        this.step = back[0]
/* 67.231 */        this.player = back[1]
/* 67.232 */        this.game_state = back[2]
/* 67.233 */        this.game.hp1 = game_state[3]
/* 67.234 */        this.game.hp2 = game_state[4]
/* 67.235 */        this.animateFlag = this.game.animateFlag
/* 67.236 */        this.unopposed = this.game.unopposed
/* 67.237 */        if(this.animateFlag) {
/* 67.238 */            this.wp = this.game.wp
/* 67.239 */            this.bp = this.game.bp
/* 67.240 */            if(step == 2) {
/* 67.241 */                this.game.wp = ObservedArrayList(ArrayList())
/* 67.242 */                this.game.bp = ObservedArrayList(ArrayList())
/* 67.243 */            }
/* 67.244 */        }
/* 67.245 */        if(step == 2) {
/* 67.246 */            this.game.animateFlag = false
/* 67.247 */            this.game.unopposed = false
/* 67.248 */        }
/* 67.249 */    }
/* 67.250 */    
/* 67.251 */    if(step == 3 && this.player == - 1) {
/* 67.252 */        var ai_move = ai_move(this.AI, this.game_state)
/* 67.253 */        var back:(Int64, Int64, Board) = run(this.data, this.game, this.game_state, ai_move, this.player, this.step)
/* 67.254 */        this.step = back[0]
/* 67.255 */        this.player = back[1]
/* 67.256 */        this.game_state = back[2]
/* 67.257 */        this.game.hp1 = game_state[3]
/* 67.258 */        this.game.hp2 = game_state[4]
/* 67.259 */        this.animateFlag = this.game.animateFlag
/* 67.260 */        this.unopposed = this.game.unopposed
/* 67.261 */        if(this.animateFlag) {
/* 67.262 */            this.wp = this.game.wp
/* 67.263 */            this.bp = this.game.bp
/* 67.264 */            this.game.wp = ObservedArrayList(ArrayList())
/* 67.265 */            this.game.bp = ObservedArrayList(ArrayList())
/* 67.266 */        }
/* 67.267 */        this.game.animateFlag = false
/* 67.268 */        this.game.unopposed = false
/* 67.269 */    }
/* 67.270 */    
/* 67.271 */    if(JudgeAscendState()) {
/* 67.272 */        InitOpacitArray()
/* 67.273 */    }
/* 67.274 */}) }) }
/* 67.275 */
/* 67.276 */this.forEachUpdateFunction(elmtId, data, itemGenFunc: forEachItemGenFunction) } }) }.rowsTemplate("1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr ").columnsTemplate("1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr ").height(360).width(360).position(x: 10, y: 10) }) }
/* 67.277 */})
/* 67.278 */
/* 67.279 */()
/* 67.280 */
/* 67.281 */}
/* 67.282 */
/* 67.283 */
/* 67.284 */public init(parent: Option < CustomView >, data!: ObservedProperty < ObservedMatrix >, game!: ObservedProperty < FourAscendGame >, game_state!: ObservedProperty < Board >, player!: ObservedProperty < Int64 >, step!: ObservedProperty < Int64 >, AI!: ObservedProperty < StupidFourAscendPlayer >, opacityArray!: ObservedProperty < OpacityMatrix >, wp!: ObservedProperty < ObservedArrayList < Array < Int64 >>>, bp!: ObservedProperty < ObservedArrayList < Array < Int64 >>>, animateFlag!: ObservedProperty < Bool >, unopposed!: ObservedProperty < Bool >, localStorage!: Option < LocalStorage >= None) {
/* 67.285 */super(parent, localStorage)
/* 67.286 */
/* 67.287 */
/* 67.288 */this.stateVarDecl_data_ = data
/* 67.289 */
/* 67.290 */this.stateVarDecl_game_ = game
/* 67.291 */
/* 67.292 */this.stateVarDecl_game_state_ = game_state
/* 67.293 */
/* 67.294 */this.stateVarDecl_player_ = player
/* 67.295 */
/* 67.296 */this.stateVarDecl_step_ = step
/* 67.297 */
/* 67.298 */this.stateVarDecl_AI_ = AI
/* 67.299 */
/* 67.300 */this.stateVarDecl_opacityArray_ = opacityArray
/* 67.301 */
/* 67.302 */this.stateVarDecl_wp_ = wp
/* 67.303 */
/* 67.304 */this.stateVarDecl_bp_ = bp
/* 67.305 */
/* 67.306 */this.stateVarDecl_animateFlag_ = animateFlag
/* 67.307 */
/* 67.308 */this.stateVarDecl_unopposed_ = unopposed
/* 67.309 */
/* 67.310 */
/* 67.311 */this.stateVarDecl_data_.subscribeEx(this)
/* 67.312 */
/* 67.313 */this.stateVarDecl_game_.subscribeEx(this)
/* 67.314 */
/* 67.315 */this.stateVarDecl_game_state_.subscribeEx(this)
/* 67.316 */
/* 67.317 */this.stateVarDecl_player_.subscribeEx(this)
/* 67.318 */
/* 67.319 */this.stateVarDecl_step_.subscribeEx(this)
/* 67.320 */
/* 67.321 */this.stateVarDecl_AI_.subscribeEx(this)
/* 67.322 */
/* 67.323 */this.stateVarDecl_opacityArray_.subscribeEx(this)
/* 67.324 */
/* 67.325 */this.stateVarDecl_wp_.subscribeEx(this)
/* 67.326 */
/* 67.327 */this.stateVarDecl_bp_.subscribeEx(this)
/* 67.328 */
/* 67.329 */this.stateVarDecl_animateFlag_.subscribeEx(this)
/* 67.330 */
/* 67.331 */this.stateVarDecl_unopposed_.subscribeEx(this)
/* 67.332 */
/* 67.333 */SubscriberManager.getInstance().add(this)
/* 67.334 */
/* 67.335 */
/* 67.336 */registerSelf()
/* 67.337 */parent?.addChildById(id(), this)
/* 67.338 */}
/* 67.339 */
/* 67.340 */
/* 67.341 */public override func aboutToBeDeleted() {
/* 67.342 */
/* 67.343 */this.stateVarDecl_data_.unsubscribeEx(this)
/* 67.344 */
/* 67.345 */this.stateVarDecl_game_.unsubscribeEx(this)
/* 67.346 */
/* 67.347 */this.stateVarDecl_game_state_.unsubscribeEx(this)
/* 67.348 */
/* 67.349 */this.stateVarDecl_player_.unsubscribeEx(this)
/* 67.350 */
/* 67.351 */this.stateVarDecl_step_.unsubscribeEx(this)
/* 67.352 */
/* 67.353 */this.stateVarDecl_AI_.unsubscribeEx(this)
/* 67.354 */
/* 67.355 */this.stateVarDecl_opacityArray_.unsubscribeEx(this)
/* 67.356 */
/* 67.357 */this.stateVarDecl_wp_.unsubscribeEx(this)
/* 67.358 */
/* 67.359 */this.stateVarDecl_bp_.unsubscribeEx(this)
/* 67.360 */
/* 67.361 */this.stateVarDecl_animateFlag_.unsubscribeEx(this)
/* 67.362 */
/* 67.363 */this.stateVarDecl_unopposed_.unsubscribeEx(this)
/* 67.364 */
/* 67.365 */SubscriberManager.getInstance().delete(this)
/* 67.366 */this.aboutToBeDeletedInternal()
/* 67.367 */}
/* 67.368 */
/* 67.369 */
/* 67.370 */func updateWithValueParams(data!: Option < ObservedMatrix >= Option < ObservedMatrix >.None, game!: Option < FourAscendGame >= Option < FourAscendGame >.None, game_state!: Option < Board >= Option < Board >.None, player!: Option < Int64 >= Option < Int64 >.None, step!: Option < Int64 >= Option < Int64 >.None, AI!: Option < StupidFourAscendPlayer >= Option < StupidFourAscendPlayer >.None, opacityArray!: Option < OpacityMatrix >= Option < OpacityMatrix >.None, wp!: Option < ObservedArrayList < Array < Int64 >>>= Option < ObservedArrayList < Array < Int64 >>>.None, bp!: Option < ObservedArrayList < Array < Int64 >>>= Option < ObservedArrayList < Array < Int64 >>>.None, animateFlag!: Option < Bool >= Option < Bool >.None, unopposed!: Option < Bool >= Option < Bool >.None): Unit {
/* 67.371 */
/* 67.372 */}
/* 67.373 */
/* 67.374 */
/* 67.375 */public func rerender() {
/* 67.376 */this.updateDirtyElements()
/* 67.377 */}
/* 67.378 */
/* 67.379 */
/* 67.380 */public func purgeVariableDependenciesOnElmtId(rmElmtId: Int64) {
/* 67.381 */
/* 67.382 */this.stateVarDecl_data_.purgeDependencyOnElmtId(rmElmtId)
/* 67.383 */
/* 67.384 */this.stateVarDecl_game_.purgeDependencyOnElmtId(rmElmtId)
/* 67.385 */
/* 67.386 */this.stateVarDecl_game_state_.purgeDependencyOnElmtId(rmElmtId)
/* 67.387 */
/* 67.388 */this.stateVarDecl_player_.purgeDependencyOnElmtId(rmElmtId)
/* 67.389 */
/* 67.390 */this.stateVarDecl_step_.purgeDependencyOnElmtId(rmElmtId)
/* 67.391 */
/* 67.392 */this.stateVarDecl_AI_.purgeDependencyOnElmtId(rmElmtId)
/* 67.393 */
/* 67.394 */this.stateVarDecl_opacityArray_.purgeDependencyOnElmtId(rmElmtId)
/* 67.395 */
/* 67.396 */this.stateVarDecl_wp_.purgeDependencyOnElmtId(rmElmtId)
/* 67.397 */
/* 67.398 */this.stateVarDecl_bp_.purgeDependencyOnElmtId(rmElmtId)
/* 67.399 */
/* 67.400 */this.stateVarDecl_animateFlag_.purgeDependencyOnElmtId(rmElmtId)
/* 67.401 */
/* 67.402 */this.stateVarDecl_unopposed_.purgeDependencyOnElmtId(rmElmtId)
/* 67.403 */
/* 67.404 */}
/* 67.405 */
/* 67.406 */
/* 67.407 */public func forceRerender(deep!: Bool = false) {
/* 67.408 */this.forceCompleteRerender(deep)
/* 67.409 */}
/* 67.410 */
/* 67.411 */
/* 67.412 */}
/* 67.413 */
/* ===== End of the Emit ===== */

//玩家状态绘制组件
/* ===== Emitted by MacroCall @Component in draw.cj:284:1 ===== */
/* 284.1 */public class playerstate <: CustomView {
/* 284.2 */    
/* 284.3 */    
/* 284.4 */    private var stateVarDecl_game_state_: ObservedProperty < Board >
/* 284.5 */    
/* 284.6 */    
/* 284.7 */    private mut prop game_state: Board {
/* 284.8 */        get() {
/* 284.9 */            return this.stateVarDecl_game_state_.get()
/* 284.10 */        }
/* 284.11 */        set(v) {
/* 284.12 */            this.stateVarDecl_game_state_.set(v)
/* 284.13 */        }
/* 284.14 */    }
/* 284.15 */    
/* 284.16 */    
/* 284.17 */    var y_pos = 180
/* 284.18 */    
/* 284.19 */    
/* 284.20 */    var x_pos = 100
/* 284.21 */    
/* 284.22 */    
/* 284.23 */    private var stateVarDecl_opc_: ObservedProperty < Float64 >= ObservedProperty < Float64 >("stateVarDecl_opc_", 0.0)
/* 284.24 */    
/* 284.25 */    
/* 284.26 */    private mut prop opc: Float64 {
/* 284.27 */        get() {
/* 284.28 */            return this.stateVarDecl_opc_.get()
/* 284.29 */        }
/* 284.30 */        set(v) {
/* 284.31 */            this.stateVarDecl_opc_.set(v)
/* 284.32 */        }
/* 284.33 */    }
/* 284.34 */    
/* 284.35 */    
/* 284.36 */    private var stateVarDecl_hp1_: ObservedProperty < Int64 >= ObservedProperty < Int64 >("stateVarDecl_hp1_", 6)
/* 284.37 */    
/* 284.38 */    
/* 284.39 */    private mut prop hp1: Int64 {
/* 284.40 */        get() {
/* 284.41 */            return this.stateVarDecl_hp1_.get()
/* 284.42 */        }
/* 284.43 */        set(v) {
/* 284.44 */            this.stateVarDecl_hp1_.set(v)
/* 284.45 */        }
/* 284.46 */    }
/* 284.47 */    
/* 284.48 */    
/* 284.49 */    private var stateVarDecl_hp2_: ObservedProperty < Int64 >= ObservedProperty < Int64 >("stateVarDecl_hp2_", 6)
/* 284.50 */    
/* 284.51 */    
/* 284.52 */    private mut prop hp2: Int64 {
/* 284.53 */        get() {
/* 284.54 */            return this.stateVarDecl_hp2_.get()
/* 284.55 */        }
/* 284.56 */        set(v) {
/* 284.57 */            this.stateVarDecl_hp2_.set(v)
/* 284.58 */        }
/* 284.59 */    }
/* 284.60 */    
/* 284.61 */    
/* 284.62 */    private var stateVarDecl_player_flash_opa_: ObservedProperty < Float64 >= ObservedProperty < Float64 >("stateVarDecl_player_flash_opa_", 0.0)
/* 284.63 */    
/* 284.64 */    
/* 284.65 */    private mut prop player_flash_opa: Float64 {
/* 284.66 */        get() {
/* 284.67 */            return this.stateVarDecl_player_flash_opa_.get()
/* 284.68 */        }
/* 284.69 */        set(v) {
/* 284.70 */            this.stateVarDecl_player_flash_opa_.set(v)
/* 284.71 */        }
/* 284.72 */    }
/* 284.73 */    
/* 284.74 */    
/* 284.75 */    private var stateVarDecl_enemy_flash_opa_: ObservedProperty < Float64 >= ObservedProperty < Float64 >("stateVarDecl_enemy_flash_opa_", 0.0)
/* 284.76 */    
/* 284.77 */    
/* 284.78 */    private mut prop enemy_flash_opa: Float64 {
/* 284.79 */        get() {
/* 284.80 */            return this.stateVarDecl_enemy_flash_opa_.get()
/* 284.81 */        }
/* 284.82 */        set(v) {
/* 284.83 */            this.stateVarDecl_enemy_flash_opa_.set(v)
/* 284.84 */        }
/* 284.85 */    }
/* 284.86 */    
/* 284.87 */    
/* 284.88 */    private var stateVarDecl_player_flash_: ObservedProperty < Bool >= ObservedProperty < Bool >("stateVarDecl_player_flash_", false)
/* 284.89 */    
/* 284.90 */    
/* 284.91 */    private mut prop player_flash: Bool {
/* 284.92 */        get() {
/* 284.93 */            return this.stateVarDecl_player_flash_.get()
/* 284.94 */        }
/* 284.95 */        set(v) {
/* 284.96 */            this.stateVarDecl_player_flash_.set(v)
/* 284.97 */        }
/* 284.98 */    }
/* 284.99 */    
/* 284.100 */    
/* 284.101 */    private var stateVarDecl_enemy_flash_: ObservedProperty < Bool >= ObservedProperty < Bool >("stateVarDecl_enemy_flash_", false)
/* 284.102 */    
/* 284.103 */    
/* 284.104 */    private mut prop enemy_flash: Bool {
/* 284.105 */        get() {
/* 284.106 */            return this.stateVarDecl_enemy_flash_.get()
/* 284.107 */        }
/* 284.108 */        set(v) {
/* 284.109 */            this.stateVarDecl_enemy_flash_.set(v)
/* 284.110 */        }
/* 284.111 */    }
/* 284.112 */    
/* 284.113 */    
/* 284.114 */    private var stateVarDecl_onHit_: ObservedProperty < Bool >
/* 284.115 */    
/* 284.116 */    
/* 284.117 */    private mut prop onHit: Bool {
/* 284.118 */        get() {
/* 284.119 */            return this.stateVarDecl_onHit_.get()
/* 284.120 */        }
/* 284.121 */        set(v) {
/* 284.122 */            this.stateVarDecl_onHit_.set(v)
/* 284.123 */        }
/* 284.124 */    }
/* 284.125 */    
/* 284.126 */    
/* 284.127 */    private var stateVarDecl_step_: ObservedProperty < Int64 >
/* 284.128 */    
/* 284.129 */    
/* 284.130 */    private mut prop step: Int64 {
/* 284.131 */        get() {
/* 284.132 */            return this.stateVarDecl_step_.get()
/* 284.133 */        }
/* 284.134 */        set(v) {
/* 284.135 */            this.stateVarDecl_step_.set(v)
/* 284.136 */        }
/* 284.137 */    }
/* 284.138 */    
/* 284.139 */    
/* 284.140 */    private func HP1_HitJudge() {
/* 284.141 */        if(onHit && game_state[3] != hp1) {
/* 284.142 */            hp1 = game_state[3]
/* 284.143 */            player_flash = true
/* 284.144 */            player_flash_opa = 1.0
/* 284.145 */        }
/* 284.146 */        return hp1
/* 284.147 */    }
/* 284.148 */    
/* 284.149 */    
/* 284.150 */    private func HP2_HitJudge() {
/* 284.151 */        if(onHit && game_state[4] != hp2) {
/* 284.152 */            hp2 = game_state[4]
/* 284.153 */            enemy_flash = true
/* 284.154 */            enemy_flash_opa = 1.0
/* 284.155 */        }
/* 284.156 */        return hp2
/* 284.157 */    }
/* 284.158 */    
/* 284.159 */    
/* 284.160 */    
/* 284.161 */    public func build() {
/* 284.162 */        
/* 284.163 */        this.observeComponentCreation({ elmtId, isInitialRender =>
/* 284.164 */            Column { this.observeComponentCreation({ elmtId, isInitialRender => Stack { this.observeComponentCreation({ elmtId, isInitialRender => Image(__GenerateResource__("", "", "", app.media.player, "app.media.player",[], 20000)).height(62).width(63).objectFit(ImageFit.Contain) })
/* 284.165 */            this.observeComponentCreation({ elmtId, isInitialRender => Image(__GenerateResource__("", "", "", app.media.player_onHit, "app.media.player_onHit",[], 20000)).animationStart(AnimateParam(duration: 50, curve: Curve.Linear, delay: 0, iterations: 1, playMode: PlayMode.Alternate, onFinish: { => if(hp1 <= 0 || hp2 <= 0) {
/* 284.166 */                this.step = 4
/* 284.167 */            }
/* 284.168 */            
/* 284.169 */            this.player_flash_opa = 0.0
/* 284.170 */        this.player_flash = false }, expectedFrameRateRange: ExpectedFrameRateRange(min: 20, max: 120, expected: 90))).height(62).width(63).objectFit(ImageFit.Contain).opacity(player_flash_opa).animationEnd() }) }.position(x: x_pos - 10, y: y_pos - 80).height(62).width(63) })
/* 284.171 */        this.observeComponentCreation({ elmtId, isInitialRender => Image(__GenerateResource__("", "", "", app.media.HP_Image, "app.media.HP_Image",[], 20000)).position(x: x_pos, y: y_pos).height(37).width(40) })
/* 284.172 */        this.observeComponentCreation({ elmtId, isInitialRender => Text("${HP1_HitJudge()}").animationStart(AnimateParam(duration: 300, curve: Curve.Linear, delay: 0, iterations: 1, playMode: PlayMode.Alternate, onFinish: { => this.onHit = false }, expectedFrameRateRange: ExpectedFrameRateRange(min: 20, max: 120, expected: 90))).textAlign(TextAlign.Center).fontSize(60).fontColor(0xfc037f).position(x: x_pos + 10, y: y_pos + 50).height(50).fontFamily(__GenerateResource__("", "", "", app.string.ProggyTinySZ, "app.string.ProggyTinySZ",[], 10003)).animationEnd() })
/* 284.173 */        this.observeComponentCreation({ elmtId, isInitialRender => Stack { this.observeComponentCreation({ elmtId, isInitialRender => Image(__GenerateResource__("", "", "", app.media.enemy, "app.media.enemy",[], 20000)).height(62).width(63).objectFit(ImageFit.Contain) })
/* 284.174 */        this.observeComponentCreation({ elmtId, isInitialRender => Image(__GenerateResource__("", "", "", app.media.enemy_onHit, "app.media.enemy_onHit",[], 20000)).animationStart(AnimateParam(duration: 50, curve: Curve.Linear, delay: 0, iterations: 1, playMode: PlayMode.Alternate, onFinish: { => if(hp1 <= 0 || hp2 <= 0) {
/* 284.175 */            this.step = 4
/* 284.176 */        }
/* 284.177 */        
/* 284.178 */        this.enemy_flash_opa = 0.0
/* 284.179 */    this.enemy_flash = false }, expectedFrameRateRange: ExpectedFrameRateRange(min: 20, max: 120, expected: 90))).height(62).width(63).objectFit(ImageFit.Contain).opacity(enemy_flash_opa).animationEnd() }) }.position(x: x_pos + 600 - 10, y: y_pos - 78).height(62).width(63) })
/* 284.180 */    this.observeComponentCreation({ elmtId, isInitialRender => Image(__GenerateResource__("", "", "", app.media.HP_Image, "app.media.HP_Image",[], 20000)).position(x: x_pos + 600, y: y_pos).height(37).width(40) })
/* 284.181 */    this.observeComponentCreation({ elmtId, isInitialRender => Text("${HP2_HitJudge()}").animationStart(AnimateParam(duration: 300, curve: Curve.Linear, delay: 0, iterations: 1, playMode: PlayMode.Alternate, onFinish: { => this.onHit = false }, expectedFrameRateRange: ExpectedFrameRateRange(min: 20, max: 120, expected: 90))).textAlign(TextAlign.Center).fontSize(60).fontColor(0xfc037f).position(x: x_pos + 600 + 10, y: y_pos + 50).height(50).fontFamily(__GenerateResource__("", "", "", app.string.ProggyTinySZ, "app.string.ProggyTinySZ",[], 10003)).animationEnd() }) }.opacity(opc).onAppear({ => animateTo(AnimateParam(duration: 300, curve: Curve.Linear, delay: 0, iterations: 1, playMode: PlayMode.Alternate, onFinish: { => }, expectedFrameRateRange: ExpectedFrameRateRange(min: 20, max: 120, expected: 90)), { => opc = 1.0 }) })
/* 284.182 */})
/* 284.183 */
/* 284.184 */()
/* 284.185 */
/* 284.186 */}
/* 284.187 */
/* 284.188 */
/* 284.189 */public init(parent: Option < CustomView >, game_state!: ObservedProperty < Board >, y_pos!: Option < ObservedProperty < Int64 >>= None, x_pos!: Option < ObservedProperty < Int64 >>= None, opc!: Option < ObservedProperty < Float64 >>= None, hp1!: Option < ObservedProperty < Int64 >>= None, hp2!: Option < ObservedProperty < Int64 >>= None, player_flash_opa!: Option < ObservedProperty < Float64 >>= None, enemy_flash_opa!: Option < ObservedProperty < Float64 >>= None, player_flash!: Option < ObservedProperty < Bool >>= None, enemy_flash!: Option < ObservedProperty < Bool >>= None, onHit!: ObservedProperty < Bool >, step!: ObservedProperty < Int64 >, localStorage!: Option < LocalStorage >= None) {
/* 284.190 */super(parent, localStorage)
/* 284.191 */
/* 284.192 */
/* 284.193 */this.stateVarDecl_game_state_ = game_state.createProp("stateVarDecl_game_state_")
/* 284.194 */
/* 284.195 */match(y_pos) {
/* 284.196 */    case Some(v) => this.y_pos = v.get()
/* 284.197 */    case _ =>()
/* 284.198 */}
/* 284.199 */
/* 284.200 */match(x_pos) {
/* 284.201 */    case Some(v) => this.x_pos = v.get()
/* 284.202 */    case _ =>()
/* 284.203 */}
/* 284.204 */
/* 284.205 */match(opc) {
/* 284.206 */    case Some(v) => this.stateVarDecl_opc_ = ObservedProperty < Float64 >("stateVarDecl_opc_", v.get())
/* 284.207 */    case _ =>()
/* 284.208 */}
/* 284.209 */
/* 284.210 */match(hp1) {
/* 284.211 */    case Some(v) => this.stateVarDecl_hp1_ = ObservedProperty < Int64 >("stateVarDecl_hp1_", v.get())
/* 284.212 */    case _ =>()
/* 284.213 */}
/* 284.214 */
/* 284.215 */match(hp2) {
/* 284.216 */    case Some(v) => this.stateVarDecl_hp2_ = ObservedProperty < Int64 >("stateVarDecl_hp2_", v.get())
/* 284.217 */    case _ =>()
/* 284.218 */}
/* 284.219 */
/* 284.220 */match(player_flash_opa) {
/* 284.221 */    case Some(v) => this.stateVarDecl_player_flash_opa_ = ObservedProperty < Float64 >("stateVarDecl_player_flash_opa_", v.get())
/* 284.222 */    case _ =>()
/* 284.223 */}
/* 284.224 */
/* 284.225 */match(enemy_flash_opa) {
/* 284.226 */    case Some(v) => this.stateVarDecl_enemy_flash_opa_ = ObservedProperty < Float64 >("stateVarDecl_enemy_flash_opa_", v.get())
/* 284.227 */    case _ =>()
/* 284.228 */}
/* 284.229 */
/* 284.230 */match(player_flash) {
/* 284.231 */    case Some(v) => this.stateVarDecl_player_flash_ = ObservedProperty < Bool >("stateVarDecl_player_flash_", v.get())
/* 284.232 */    case _ =>()
/* 284.233 */}
/* 284.234 */
/* 284.235 */match(enemy_flash) {
/* 284.236 */    case Some(v) => this.stateVarDecl_enemy_flash_ = ObservedProperty < Bool >("stateVarDecl_enemy_flash_", v.get())
/* 284.237 */    case _ =>()
/* 284.238 */}
/* 284.239 */
/* 284.240 */this.stateVarDecl_onHit_ = onHit
/* 284.241 */
/* 284.242 */this.stateVarDecl_step_ = step
/* 284.243 */
/* 284.244 */
/* 284.245 */this.stateVarDecl_game_state_.subscribeEx(this)
/* 284.246 */
/* 284.247 */this.stateVarDecl_opc_.subscribeEx(this)
/* 284.248 */
/* 284.249 */this.stateVarDecl_hp1_.subscribeEx(this)
/* 284.250 */
/* 284.251 */this.stateVarDecl_hp2_.subscribeEx(this)
/* 284.252 */
/* 284.253 */this.stateVarDecl_player_flash_opa_.subscribeEx(this)
/* 284.254 */
/* 284.255 */this.stateVarDecl_enemy_flash_opa_.subscribeEx(this)
/* 284.256 */
/* 284.257 */this.stateVarDecl_player_flash_.subscribeEx(this)
/* 284.258 */
/* 284.259 */this.stateVarDecl_enemy_flash_.subscribeEx(this)
/* 284.260 */
/* 284.261 */this.stateVarDecl_onHit_.subscribeEx(this)
/* 284.262 */
/* 284.263 */this.stateVarDecl_step_.subscribeEx(this)
/* 284.264 */
/* 284.265 */SubscriberManager.getInstance().add(this)
/* 284.266 */
/* 284.267 */
/* 284.268 */registerSelf()
/* 284.269 */parent?.addChildById(id(), this)
/* 284.270 */}
/* 284.271 */
/* 284.272 */
/* 284.273 */public override func aboutToBeDeleted() {
/* 284.274 */
/* 284.275 */this.stateVarDecl_game_state_.unsubscribeEx(this)
/* 284.276 */
/* 284.277 */this.stateVarDecl_opc_.unsubscribeEx(this)
/* 284.278 */
/* 284.279 */this.stateVarDecl_hp1_.unsubscribeEx(this)
/* 284.280 */
/* 284.281 */this.stateVarDecl_hp2_.unsubscribeEx(this)
/* 284.282 */
/* 284.283 */this.stateVarDecl_player_flash_opa_.unsubscribeEx(this)
/* 284.284 */
/* 284.285 */this.stateVarDecl_enemy_flash_opa_.unsubscribeEx(this)
/* 284.286 */
/* 284.287 */this.stateVarDecl_player_flash_.unsubscribeEx(this)
/* 284.288 */
/* 284.289 */this.stateVarDecl_enemy_flash_.unsubscribeEx(this)
/* 284.290 */
/* 284.291 */this.stateVarDecl_onHit_.unsubscribeEx(this)
/* 284.292 */
/* 284.293 */this.stateVarDecl_step_.unsubscribeEx(this)
/* 284.294 */
/* 284.295 */SubscriberManager.getInstance().delete(this)
/* 284.296 */this.aboutToBeDeletedInternal()
/* 284.297 */}
/* 284.298 */
/* 284.299 */
/* 284.300 */func updateWithValueParams(game_state!: Option < Board >= Option < Board >.None, y_pos!: Option < Int64 >= Option < Int64 >.None, x_pos!: Option < Int64 >= Option < Int64 >.None, opc!: Option < Float64 >= Option < Float64 >.None, hp1!: Option < Int64 >= Option < Int64 >.None, hp2!: Option < Int64 >= Option < Int64 >.None, player_flash_opa!: Option < Float64 >= Option < Float64 >.None, enemy_flash_opa!: Option < Float64 >= Option < Float64 >.None, player_flash!: Option < Bool >= Option < Bool >.None, enemy_flash!: Option < Bool >= Option < Bool >.None, onHit!: Option < Bool >= Option < Bool >.None, step!: Option < Int64 >= Option < Int64 >.None): Unit {
/* 284.301 */
/* 284.302 */match(game_state) {
/* 284.303 */    case Some(v) => this.game_state = v
/* 284.304 */    case _ =>()
/* 284.305 */}
/* 284.306 */
/* 284.307 */match(opc) {
/* 284.308 */    case Some(v) => this.opc = v
/* 284.309 */    case _ =>()
/* 284.310 */}
/* 284.311 */
/* 284.312 */match(hp1) {
/* 284.313 */    case Some(v) => this.hp1 = v
/* 284.314 */    case _ =>()
/* 284.315 */}
/* 284.316 */
/* 284.317 */match(hp2) {
/* 284.318 */    case Some(v) => this.hp2 = v
/* 284.319 */    case _ =>()
/* 284.320 */}
/* 284.321 */
/* 284.322 */match(player_flash_opa) {
/* 284.323 */    case Some(v) => this.player_flash_opa = v
/* 284.324 */    case _ =>()
/* 284.325 */}
/* 284.326 */
/* 284.327 */match(enemy_flash_opa) {
/* 284.328 */    case Some(v) => this.enemy_flash_opa = v
/* 284.329 */    case _ =>()
/* 284.330 */}
/* 284.331 */
/* 284.332 */match(player_flash) {
/* 284.333 */    case Some(v) => this.player_flash = v
/* 284.334 */    case _ =>()
/* 284.335 */}
/* 284.336 */
/* 284.337 */match(enemy_flash) {
/* 284.338 */    case Some(v) => this.enemy_flash = v
/* 284.339 */    case _ =>()
/* 284.340 */}
/* 284.341 */
/* 284.342 */}
/* 284.343 */
/* 284.344 */
/* 284.345 */public func rerender() {
/* 284.346 */this.updateDirtyElements()
/* 284.347 */}
/* 284.348 */
/* 284.349 */
/* 284.350 */public func purgeVariableDependenciesOnElmtId(rmElmtId: Int64) {
/* 284.351 */
/* 284.352 */this.stateVarDecl_game_state_.purgeDependencyOnElmtId(rmElmtId)
/* 284.353 */
/* 284.354 */this.stateVarDecl_opc_.purgeDependencyOnElmtId(rmElmtId)
/* 284.355 */
/* 284.356 */this.stateVarDecl_hp1_.purgeDependencyOnElmtId(rmElmtId)
/* 284.357 */
/* 284.358 */this.stateVarDecl_hp2_.purgeDependencyOnElmtId(rmElmtId)
/* 284.359 */
/* 284.360 */this.stateVarDecl_player_flash_opa_.purgeDependencyOnElmtId(rmElmtId)
/* 284.361 */
/* 284.362 */this.stateVarDecl_enemy_flash_opa_.purgeDependencyOnElmtId(rmElmtId)
/* 284.363 */
/* 284.364 */this.stateVarDecl_player_flash_.purgeDependencyOnElmtId(rmElmtId)
/* 284.365 */
/* 284.366 */this.stateVarDecl_enemy_flash_.purgeDependencyOnElmtId(rmElmtId)
/* 284.367 */
/* 284.368 */this.stateVarDecl_onHit_.purgeDependencyOnElmtId(rmElmtId)
/* 284.369 */
/* 284.370 */this.stateVarDecl_step_.purgeDependencyOnElmtId(rmElmtId)
/* 284.371 */
/* 284.372 */}
/* 284.373 */
/* 284.374 */
/* 284.375 */public func forceRerender(deep!: Bool = false) {
/* 284.376 */this.forceCompleteRerender(deep)
/* 284.377 */}
/* 284.378 */
/* 284.379 */
/* 284.380 */}
/* 284.381 */
/* ===== End of the Emit ===== */

//标题页绘制组件
/* ===== Emitted by MacroCall @Component in draw.cj:484:1 ===== */
/* 484.1 */public class WelcomePage <: CustomView {
/* 484.2 */    
/* 484.3 */    
/* 484.4 */    private var stateVarDecl_step_: ObservedProperty < Int64 >
/* 484.5 */    
/* 484.6 */    
/* 484.7 */    private mut prop step: Int64 {
/* 484.8 */        get() {
/* 484.9 */            return this.stateVarDecl_step_.get()
/* 484.10 */        }
/* 484.11 */        set(v) {
/* 484.12 */            this.stateVarDecl_step_.set(v)
/* 484.13 */        }
/* 484.14 */    }
/* 484.15 */    
/* 484.16 */    
/* 484.17 */    private var stateVarDecl_WelFontOpacity_: ObservedProperty < Float64 >= ObservedProperty < Float64 >("stateVarDecl_WelFontOpacity_", 0.8)
/* 484.18 */    
/* 484.19 */    
/* 484.20 */    private mut prop WelFontOpacity: Float64 {
/* 484.21 */        get() {
/* 484.22 */            return this.stateVarDecl_WelFontOpacity_.get()
/* 484.23 */        }
/* 484.24 */        set(v) {
/* 484.25 */            this.stateVarDecl_WelFontOpacity_.set(v)
/* 484.26 */        }
/* 484.27 */    }
/* 484.28 */    
/* 484.29 */    
/* 484.30 */    private var stateVarDecl_WelOpacity_: ObservedProperty < Float64 >= ObservedProperty < Float64 >("stateVarDecl_WelOpacity_", 1.0)
/* 484.31 */    
/* 484.32 */    
/* 484.33 */    private mut prop WelOpacity: Float64 {
/* 484.34 */        get() {
/* 484.35 */            return this.stateVarDecl_WelOpacity_.get()
/* 484.36 */        }
/* 484.37 */        set(v) {
/* 484.38 */            this.stateVarDecl_WelOpacity_.set(v)
/* 484.39 */        }
/* 484.40 */    }
/* 484.41 */    
/* 484.42 */    
/* 484.43 */    let animateOpt = AnimateParam(duration: 300, curve: Curve.Linear, delay: 0, iterations: - 1, playMode: PlayMode.Alternate, onFinish: { => AppLog.info("onfinish") }, expectedFrameRateRange: ExpectedFrameRateRange(min: 20, max: 120, expected: 90))
/* 484.44 */    
/* 484.45 */    
/* 484.46 */    
/* 484.47 */    public func build() {
/* 484.48 */        
/* 484.49 */        this.observeComponentCreation({ elmtId, isInitialRender =>
/* 484.50 */            Stack { this.observeComponentCreation({ elmtId, isInitialRender => Image(__GenerateResource__("", "", "", app.media.titleBackground, "app.media.titleBackground",[], 20000)).height(400).width(860).position(x: 0, y: 0) })
/* 484.51 */            this.observeComponentCreation({ elmtId, isInitialRender => Text("Touch Screen To Start.").fontSize(50).position(x: 200, y: 300).height(35).width(450).opacity(this.WelFontOpacity).fontFamily(__GenerateResource__("", "", "", app.string.ProggyTinySZ, "app.string.ProggyTinySZ",[], 10003)).onAppear({ => animateTo(AnimateParam(duration: 600, curve: Curve.Linear, delay: 0, iterations: - 1, playMode: PlayMode.Alternate, onFinish: { => AppLog.info("onfinish") }, expectedFrameRateRange: ExpectedFrameRateRange(min: 20, max: 120, expected: 90)), { => this.WelFontOpacity = 0.3 }) }) }) }.onClick({ evt => animateTo(AnimateParam(duration: 600, curve: Curve.Linear, delay: 0, iterations: 1, playMode: PlayMode.Alternate, onFinish: { => step = 1 }, expectedFrameRateRange: ExpectedFrameRateRange(min: 20, max: 120, expected: 90)), { => this.WelOpacity = 0.0 }) }).opacity(WelOpacity)
/* 484.52 */        })
/* 484.53 */        
/* 484.54 */        ()
/* 484.55 */        
/* 484.56 */    }
/* 484.57 */    
/* 484.58 */    
/* 484.59 */    public init(parent: Option < CustomView >, step!: ObservedProperty < Int64 >, WelFontOpacity!: Option < ObservedProperty < Float64 >>= None, WelOpacity!: Option < ObservedProperty < Float64 >>= None, localStorage!: Option < LocalStorage >= None) {
/* 484.60 */        super(parent, localStorage)
/* 484.61 */        
/* 484.62 */        
/* 484.63 */        this.stateVarDecl_step_ = step
/* 484.64 */        
/* 484.65 */        match(WelFontOpacity) {
/* 484.66 */            case Some(v) => this.stateVarDecl_WelFontOpacity_ = ObservedProperty < Float64 >("stateVarDecl_WelFontOpacity_", v.get())
/* 484.67 */            case _ =>()
/* 484.68 */        }
/* 484.69 */        
/* 484.70 */        match(WelOpacity) {
/* 484.71 */            case Some(v) => this.stateVarDecl_WelOpacity_ = ObservedProperty < Float64 >("stateVarDecl_WelOpacity_", v.get())
/* 484.72 */            case _ =>()
/* 484.73 */        }
/* 484.74 */        
/* 484.75 */        
/* 484.76 */        this.stateVarDecl_step_.subscribeEx(this)
/* 484.77 */        
/* 484.78 */        this.stateVarDecl_WelFontOpacity_.subscribeEx(this)
/* 484.79 */        
/* 484.80 */        this.stateVarDecl_WelOpacity_.subscribeEx(this)
/* 484.81 */        
/* 484.82 */        SubscriberManager.getInstance().add(this)
/* 484.83 */        
/* 484.84 */        
/* 484.85 */        registerSelf()
/* 484.86 */        parent?.addChildById(id(), this)
/* 484.87 */    }
/* 484.88 */    
/* 484.89 */    
/* 484.90 */    public override func aboutToBeDeleted() {
/* 484.91 */        
/* 484.92 */        this.stateVarDecl_step_.unsubscribeEx(this)
/* 484.93 */        
/* 484.94 */        this.stateVarDecl_WelFontOpacity_.unsubscribeEx(this)
/* 484.95 */        
/* 484.96 */        this.stateVarDecl_WelOpacity_.unsubscribeEx(this)
/* 484.97 */        
/* 484.98 */        SubscriberManager.getInstance().delete(this)
/* 484.99 */        this.aboutToBeDeletedInternal()
/* 484.100 */    }
/* 484.101 */    
/* 484.102 */    
/* 484.103 */    func updateWithValueParams(step!: Option < Int64 >= Option < Int64 >.None, WelFontOpacity!: Option < Float64 >= Option < Float64 >.None, WelOpacity!: Option < Float64 >= Option < Float64 >.None): Unit {
/* 484.104 */        
/* 484.105 */        match(WelFontOpacity) {
/* 484.106 */            case Some(v) => this.WelFontOpacity = v
/* 484.107 */            case _ =>()
/* 484.108 */        }
/* 484.109 */        
/* 484.110 */        match(WelOpacity) {
/* 484.111 */            case Some(v) => this.WelOpacity = v
/* 484.112 */            case _ =>()
/* 484.113 */        }
/* 484.114 */        
/* 484.115 */    }
/* 484.116 */    
/* 484.117 */    
/* 484.118 */    public func rerender() {
/* 484.119 */        this.updateDirtyElements()
/* 484.120 */    }
/* 484.121 */    
/* 484.122 */    
/* 484.123 */    public func purgeVariableDependenciesOnElmtId(rmElmtId: Int64) {
/* 484.124 */        
/* 484.125 */        this.stateVarDecl_step_.purgeDependencyOnElmtId(rmElmtId)
/* 484.126 */        
/* 484.127 */        this.stateVarDecl_WelFontOpacity_.purgeDependencyOnElmtId(rmElmtId)
/* 484.128 */        
/* 484.129 */        this.stateVarDecl_WelOpacity_.purgeDependencyOnElmtId(rmElmtId)
/* 484.130 */        
/* 484.131 */    }
/* 484.132 */    
/* 484.133 */    
/* 484.134 */    public func forceRerender(deep!: Bool = false) {
/* 484.135 */        this.forceCompleteRerender(deep)
/* 484.136 */    }
/* 484.137 */    
/* 484.138 */    
/* 484.139 */}
/* 484.140 */
/* ===== End of the Emit ===== */

//菜单页绘制组件
/* ===== Emitted by MacroCall @Component in draw.cj:573:1 ===== */
/* 573.1 */public class MenuPage <: CustomView {
/* 573.2 */    
/* 573.3 */    
/* 573.4 */    var MenuFlag: Bool = true
/* 573.5 */    
/* 573.6 */    
/* 573.7 */    private var stateVarDecl_step_: ObservedProperty < Int64 >
/* 573.8 */    
/* 573.9 */    
/* 573.10 */    private mut prop step: Int64 {
/* 573.11 */        get() {
/* 573.12 */            return this.stateVarDecl_step_.get()
/* 573.13 */        }
/* 573.14 */        set(v) {
/* 573.15 */            this.stateVarDecl_step_.set(v)
/* 573.16 */        }
/* 573.17 */    }
/* 573.18 */    
/* 573.19 */    
/* 573.20 */    private var stateVarDecl_pre_step_: ObservedProperty < Int64 >
/* 573.21 */    
/* 573.22 */    
/* 573.23 */    private mut prop pre_step: Int64 {
/* 573.24 */        get() {
/* 573.25 */            return this.stateVarDecl_pre_step_.get()
/* 573.26 */        }
/* 573.27 */        set(v) {
/* 573.28 */            this.stateVarDecl_pre_step_.set(v)
/* 573.29 */        }
/* 573.30 */    }
/* 573.31 */    
/* 573.32 */    
/* 573.33 */    private var stateVarDecl_MenuOpacity_: ObservedProperty < Float64 >= ObservedProperty < Float64 >("stateVarDecl_MenuOpacity_", 0.0)
/* 573.34 */    
/* 573.35 */    
/* 573.36 */    private mut prop MenuOpacity: Float64 {
/* 573.37 */        get() {
/* 573.38 */            return this.stateVarDecl_MenuOpacity_.get()
/* 573.39 */        }
/* 573.40 */        set(v) {
/* 573.41 */            this.stateVarDecl_MenuOpacity_.set(v)
/* 573.42 */        }
/* 573.43 */    }
/* 573.44 */    
/* 573.45 */    
/* 573.46 */    private var stateVarDecl_PVP_Opacity_: ObservedProperty < Float64 >= ObservedProperty < Float64 >("stateVarDecl_PVP_Opacity_", 0.0)
/* 573.47 */    
/* 573.48 */    
/* 573.49 */    private mut prop PVP_Opacity: Float64 {
/* 573.50 */        get() {
/* 573.51 */            return this.stateVarDecl_PVP_Opacity_.get()
/* 573.52 */        }
/* 573.53 */        set(v) {
/* 573.54 */            this.stateVarDecl_PVP_Opacity_.set(v)
/* 573.55 */        }
/* 573.56 */    }
/* 573.57 */    
/* 573.58 */    
/* 573.59 */    private var stateVarDecl_PVE_Opacity_: ObservedProperty < Float64 >= ObservedProperty < Float64 >("stateVarDecl_PVE_Opacity_", 1.0)
/* 573.60 */    
/* 573.61 */    
/* 573.62 */    private mut prop PVE_Opacity: Float64 {
/* 573.63 */        get() {
/* 573.64 */            return this.stateVarDecl_PVE_Opacity_.get()
/* 573.65 */        }
/* 573.66 */        set(v) {
/* 573.67 */            this.stateVarDecl_PVE_Opacity_.set(v)
/* 573.68 */        }
/* 573.69 */    }
/* 573.70 */    
/* 573.71 */    
/* 573.72 */    private var stateVarDecl_Learn_Opacity_: ObservedProperty < Float64 >= ObservedProperty < Float64 >("stateVarDecl_Learn_Opacity_", 0.0)
/* 573.73 */    
/* 573.74 */    
/* 573.75 */    private mut prop Learn_Opacity: Float64 {
/* 573.76 */        get() {
/* 573.77 */            return this.stateVarDecl_Learn_Opacity_.get()
/* 573.78 */        }
/* 573.79 */        set(v) {
/* 573.80 */            this.stateVarDecl_Learn_Opacity_.set(v)
/* 573.81 */        }
/* 573.82 */    }
/* 573.83 */    
/* 573.84 */    
/* 573.85 */    private var stateVarDecl_PVP_Button_X_: ObservedProperty < Int64 >= ObservedProperty < Int64 >("stateVarDecl_PVP_Button_X_", 325)
/* 573.86 */    
/* 573.87 */    
/* 573.88 */    private mut prop PVP_Button_X: Int64 {
/* 573.89 */        get() {
/* 573.90 */            return this.stateVarDecl_PVP_Button_X_.get()
/* 573.91 */        }
/* 573.92 */        set(v) {
/* 573.93 */            this.stateVarDecl_PVP_Button_X_.set(v)
/* 573.94 */        }
/* 573.95 */    }
/* 573.96 */    
/* 573.97 */    
/* 573.98 */    private var stateVarDecl_PVP_Button_Y_: ObservedProperty < Int64 >= ObservedProperty < Int64 >("stateVarDecl_PVP_Button_Y_", 150)
/* 573.99 */    
/* 573.100 */    
/* 573.101 */    private mut prop PVP_Button_Y: Int64 {
/* 573.102 */        get() {
/* 573.103 */            return this.stateVarDecl_PVP_Button_Y_.get()
/* 573.104 */        }
/* 573.105 */        set(v) {
/* 573.106 */            this.stateVarDecl_PVP_Button_Y_.set(v)
/* 573.107 */        }
/* 573.108 */    }
/* 573.109 */    
/* 573.110 */    
/* 573.111 */    private var stateVarDecl_Learn_Button_X_: ObservedProperty < Int64 >= ObservedProperty < Int64 >("stateVarDecl_Learn_Button_X_", 325)
/* 573.112 */    
/* 573.113 */    
/* 573.114 */    private mut prop Learn_Button_X: Int64 {
/* 573.115 */        get() {
/* 573.116 */            return this.stateVarDecl_Learn_Button_X_.get()
/* 573.117 */        }
/* 573.118 */        set(v) {
/* 573.119 */            this.stateVarDecl_Learn_Button_X_.set(v)
/* 573.120 */        }
/* 573.121 */    }
/* 573.122 */    
/* 573.123 */    
/* 573.124 */    private var stateVarDecl_Learn_Button_Y_: ObservedProperty < Int64 >= ObservedProperty < Int64 >("stateVarDecl_Learn_Button_Y_", 150)
/* 573.125 */    
/* 573.126 */    
/* 573.127 */    private mut prop Learn_Button_Y: Int64 {
/* 573.128 */        get() {
/* 573.129 */            return this.stateVarDecl_Learn_Button_Y_.get()
/* 573.130 */        }
/* 573.131 */        set(v) {
/* 573.132 */            this.stateVarDecl_Learn_Button_Y_.set(v)
/* 573.133 */        }
/* 573.134 */    }
/* 573.135 */    
/* 573.136 */    
/* 573.137 */    
/* 573.138 */    public func build() {
/* 573.139 */        
/* 573.140 */        this.observeComponentCreation({ elmtId, isInitialRender =>
/* 573.141 */            Stack { this.observeComponentCreation({ elmtId, isInitialRender => Image(__GenerateResource__("", "", "", app.media.background4, "app.media.background4",[], 20000)).height(400).width(860).position(x: 0, y: - 5) })
/* 573.142 */            this.observeComponentCreation({ elmtId, isInitialRender => Image(__GenerateResource__("", "", "", app.media.Menu_border, "app.media.Menu_border",[], 20000)).height(400).width(860).position(x: 0, y: - 5) })
/* 573.143 */            this.observeComponentCreation({ elmtId, isInitialRender => Image(__GenerateResource__("", "", "", app.media.Menu_Button_PVP, "app.media.Menu_Button_PVP",[], 20000)).height(86).width(203).position(x: PVP_Button_X, y: PVP_Button_Y).objectFit(ImageFit.Contain).opacity(this.PVP_Opacity).onClick({ evt => animateTo(AnimateParam(duration: 300, curve: Curve.Linear, delay: 0, iterations: 3, playMode: PlayMode.Alternate, onFinish: { => this.pre_step = 2
/* 573.144 */                this.step = 2
/* 573.145 */                PVP_Button_X = 325
/* 573.146 */                PVP_Button_Y = 150
/* 573.147 */                Learn_Button_X = 325
/* 573.148 */            Learn_Button_Y = 150 }, expectedFrameRateRange: ExpectedFrameRateRange(min: 20, max: 120, expected: 90)), { => PVP_Opacity = 0.3 }) }) })
/* 573.149 */            this.observeComponentCreation({ elmtId, isInitialRender => Image(__GenerateResource__("", "", "", app.media.Menu_Button_Learn, "app.media.Menu_Button_Learn",[], 20000)).height(86).width(203).position(x: Learn_Button_X, y: Learn_Button_Y).objectFit(ImageFit.Contain).opacity(this.Learn_Opacity).onClick({ evt => animateTo(AnimateParam(duration: 300, curve: Curve.Linear, delay: 0, iterations: 3, playMode: PlayMode.Alternate, onFinish: { => this.step = 2
/* 573.150 */                PVP_Button_X = 325
/* 573.151 */                PVP_Button_Y = 150
/* 573.152 */                Learn_Button_X = 325
/* 573.153 */            Learn_Button_Y = 150 }, expectedFrameRateRange: ExpectedFrameRateRange(min: 20, max: 120, expected: 90)), { => this.Learn_Opacity = 0.3 }) }) })
/* 573.154 */            this.observeComponentCreation({ elmtId, isInitialRender => Image(__GenerateResource__("", "", "", app.media.Menu_Button_PVE, "app.media.Menu_Button_PVE",[], 20000)).height(86).width(203).position(x: 325, y: 150).objectFit(ImageFit.Contain).opacity(this.PVE_Opacity).onClick({ evt => animateTo(AnimateParam(duration: 300, curve: Curve.Linear, delay: 0, iterations: 3, playMode: PlayMode.Alternate, onFinish: { => this.pre_step = 3
/* 573.155 */                this.step = 3
/* 573.156 */                PVP_Button_X = 325
/* 573.157 */                PVP_Button_Y = 150
/* 573.158 */                Learn_Button_X = 325
/* 573.159 */            Learn_Button_Y = 150 }, expectedFrameRateRange: ExpectedFrameRateRange(min: 20, max: 120, expected: 90)), { => this.PVE_Opacity = 0.3 }) }) }) }.opacity(this.MenuOpacity).onAppear({ => animateTo(AnimateParam(duration: 300, curve: Curve.EaseIn, delay: 0, iterations: 1, playMode: PlayMode.Alternate, onFinish: { => animateTo(AnimateParam(duration: 300, curve: Curve.EaseIn, delay: 0, iterations: 1, playMode: PlayMode.Alternate, onFinish: { => AppLog.info("onfinish") }, expectedFrameRateRange: ExpectedFrameRateRange(min: 20, max: 120, expected: 90)), { => PVP_Opacity = 1.0
/* 573.160 */                Learn_Opacity = 1.0
/* 573.161 */                PVP_Button_X = 150
/* 573.162 */                PVP_Button_Y = 50
/* 573.163 */                Learn_Button_X = 500
/* 573.164 */            Learn_Button_Y = 250 }) }, expectedFrameRateRange: ExpectedFrameRateRange(min: 20, max: 120, expected: 90)), { => this.MenuOpacity = 1.0 }) })
/* 573.165 */        })
/* 573.166 */        
/* 573.167 */        ()
/* 573.168 */        
/* 573.169 */    }
/* 573.170 */    
/* 573.171 */    
/* 573.172 */    public init(parent: Option < CustomView >, MenuFlag!: Option < ObservedProperty < Bool >>= None, step!: ObservedProperty < Int64 >, pre_step!: ObservedProperty < Int64 >, MenuOpacity!: Option < ObservedProperty < Float64 >>= None, PVP_Opacity!: Option < ObservedProperty < Float64 >>= None, PVE_Opacity!: Option < ObservedProperty < Float64 >>= None, Learn_Opacity!: Option < ObservedProperty < Float64 >>= None, PVP_Button_X!: Option < ObservedProperty < Int64 >>= None, PVP_Button_Y!: Option < ObservedProperty < Int64 >>= None, Learn_Button_X!: Option < ObservedProperty < Int64 >>= None, Learn_Button_Y!: Option < ObservedProperty < Int64 >>= None, localStorage!: Option < LocalStorage >= None) {
/* 573.173 */        super(parent, localStorage)
/* 573.174 */        
/* 573.175 */        
/* 573.176 */        match(MenuFlag) {
/* 573.177 */            case Some(v) => this.MenuFlag = v.get()
/* 573.178 */            case _ =>()
/* 573.179 */        }
/* 573.180 */        
/* 573.181 */        this.stateVarDecl_step_ = step
/* 573.182 */        
/* 573.183 */        this.stateVarDecl_pre_step_ = pre_step
/* 573.184 */        
/* 573.185 */        match(MenuOpacity) {
/* 573.186 */            case Some(v) => this.stateVarDecl_MenuOpacity_ = ObservedProperty < Float64 >("stateVarDecl_MenuOpacity_", v.get())
/* 573.187 */            case _ =>()
/* 573.188 */        }
/* 573.189 */        
/* 573.190 */        match(PVP_Opacity) {
/* 573.191 */            case Some(v) => this.stateVarDecl_PVP_Opacity_ = ObservedProperty < Float64 >("stateVarDecl_PVP_Opacity_", v.get())
/* 573.192 */            case _ =>()
/* 573.193 */        }
/* 573.194 */        
/* 573.195 */        match(PVE_Opacity) {
/* 573.196 */            case Some(v) => this.stateVarDecl_PVE_Opacity_ = ObservedProperty < Float64 >("stateVarDecl_PVE_Opacity_", v.get())
/* 573.197 */            case _ =>()
/* 573.198 */        }
/* 573.199 */        
/* 573.200 */        match(Learn_Opacity) {
/* 573.201 */            case Some(v) => this.stateVarDecl_Learn_Opacity_ = ObservedProperty < Float64 >("stateVarDecl_Learn_Opacity_", v.get())
/* 573.202 */            case _ =>()
/* 573.203 */        }
/* 573.204 */        
/* 573.205 */        match(PVP_Button_X) {
/* 573.206 */            case Some(v) => this.stateVarDecl_PVP_Button_X_ = ObservedProperty < Int64 >("stateVarDecl_PVP_Button_X_", v.get())
/* 573.207 */            case _ =>()
/* 573.208 */        }
/* 573.209 */        
/* 573.210 */        match(PVP_Button_Y) {
/* 573.211 */            case Some(v) => this.stateVarDecl_PVP_Button_Y_ = ObservedProperty < Int64 >("stateVarDecl_PVP_Button_Y_", v.get())
/* 573.212 */            case _ =>()
/* 573.213 */        }
/* 573.214 */        
/* 573.215 */        match(Learn_Button_X) {
/* 573.216 */            case Some(v) => this.stateVarDecl_Learn_Button_X_ = ObservedProperty < Int64 >("stateVarDecl_Learn_Button_X_", v.get())
/* 573.217 */            case _ =>()
/* 573.218 */        }
/* 573.219 */        
/* 573.220 */        match(Learn_Button_Y) {
/* 573.221 */            case Some(v) => this.stateVarDecl_Learn_Button_Y_ = ObservedProperty < Int64 >("stateVarDecl_Learn_Button_Y_", v.get())
/* 573.222 */            case _ =>()
/* 573.223 */        }
/* 573.224 */        
/* 573.225 */        
/* 573.226 */        this.stateVarDecl_step_.subscribeEx(this)
/* 573.227 */        
/* 573.228 */        this.stateVarDecl_pre_step_.subscribeEx(this)
/* 573.229 */        
/* 573.230 */        this.stateVarDecl_MenuOpacity_.subscribeEx(this)
/* 573.231 */        
/* 573.232 */        this.stateVarDecl_PVP_Opacity_.subscribeEx(this)
/* 573.233 */        
/* 573.234 */        this.stateVarDecl_PVE_Opacity_.subscribeEx(this)
/* 573.235 */        
/* 573.236 */        this.stateVarDecl_Learn_Opacity_.subscribeEx(this)
/* 573.237 */        
/* 573.238 */        this.stateVarDecl_PVP_Button_X_.subscribeEx(this)
/* 573.239 */        
/* 573.240 */        this.stateVarDecl_PVP_Button_Y_.subscribeEx(this)
/* 573.241 */        
/* 573.242 */        this.stateVarDecl_Learn_Button_X_.subscribeEx(this)
/* 573.243 */        
/* 573.244 */        this.stateVarDecl_Learn_Button_Y_.subscribeEx(this)
/* 573.245 */        
/* 573.246 */        SubscriberManager.getInstance().add(this)
/* 573.247 */        
/* 573.248 */        
/* 573.249 */        registerSelf()
/* 573.250 */        parent?.addChildById(id(), this)
/* 573.251 */    }
/* 573.252 */    
/* 573.253 */    
/* 573.254 */    public override func aboutToBeDeleted() {
/* 573.255 */        
/* 573.256 */        this.stateVarDecl_step_.unsubscribeEx(this)
/* 573.257 */        
/* 573.258 */        this.stateVarDecl_pre_step_.unsubscribeEx(this)
/* 573.259 */        
/* 573.260 */        this.stateVarDecl_MenuOpacity_.unsubscribeEx(this)
/* 573.261 */        
/* 573.262 */        this.stateVarDecl_PVP_Opacity_.unsubscribeEx(this)
/* 573.263 */        
/* 573.264 */        this.stateVarDecl_PVE_Opacity_.unsubscribeEx(this)
/* 573.265 */        
/* 573.266 */        this.stateVarDecl_Learn_Opacity_.unsubscribeEx(this)
/* 573.267 */        
/* 573.268 */        this.stateVarDecl_PVP_Button_X_.unsubscribeEx(this)
/* 573.269 */        
/* 573.270 */        this.stateVarDecl_PVP_Button_Y_.unsubscribeEx(this)
/* 573.271 */        
/* 573.272 */        this.stateVarDecl_Learn_Button_X_.unsubscribeEx(this)
/* 573.273 */        
/* 573.274 */        this.stateVarDecl_Learn_Button_Y_.unsubscribeEx(this)
/* 573.275 */        
/* 573.276 */        SubscriberManager.getInstance().delete(this)
/* 573.277 */        this.aboutToBeDeletedInternal()
/* 573.278 */    }
/* 573.279 */    
/* 573.280 */    
/* 573.281 */    func updateWithValueParams(MenuFlag!: Option < Bool >= Option < Bool >.None, step!: Option < Int64 >= Option < Int64 >.None, pre_step!: Option < Int64 >= Option < Int64 >.None, MenuOpacity!: Option < Float64 >= Option < Float64 >.None, PVP_Opacity!: Option < Float64 >= Option < Float64 >.None, PVE_Opacity!: Option < Float64 >= Option < Float64 >.None, Learn_Opacity!: Option < Float64 >= Option < Float64 >.None, PVP_Button_X!: Option < Int64 >= Option < Int64 >.None, PVP_Button_Y!: Option < Int64 >= Option < Int64 >.None, Learn_Button_X!: Option < Int64 >= Option < Int64 >.None, Learn_Button_Y!: Option < Int64 >= Option < Int64 >.None): Unit {
/* 573.282 */        
/* 573.283 */        match(MenuOpacity) {
/* 573.284 */            case Some(v) => this.MenuOpacity = v
/* 573.285 */            case _ =>()
/* 573.286 */        }
/* 573.287 */        
/* 573.288 */        match(PVP_Opacity) {
/* 573.289 */            case Some(v) => this.PVP_Opacity = v
/* 573.290 */            case _ =>()
/* 573.291 */        }
/* 573.292 */        
/* 573.293 */        match(PVE_Opacity) {
/* 573.294 */            case Some(v) => this.PVE_Opacity = v
/* 573.295 */            case _ =>()
/* 573.296 */        }
/* 573.297 */        
/* 573.298 */        match(Learn_Opacity) {
/* 573.299 */            case Some(v) => this.Learn_Opacity = v
/* 573.300 */            case _ =>()
/* 573.301 */        }
/* 573.302 */        
/* 573.303 */        match(PVP_Button_X) {
/* 573.304 */            case Some(v) => this.PVP_Button_X = v
/* 573.305 */            case _ =>()
/* 573.306 */        }
/* 573.307 */        
/* 573.308 */        match(PVP_Button_Y) {
/* 573.309 */            case Some(v) => this.PVP_Button_Y = v
/* 573.310 */            case _ =>()
/* 573.311 */        }
/* 573.312 */        
/* 573.313 */        match(Learn_Button_X) {
/* 573.314 */            case Some(v) => this.Learn_Button_X = v
/* 573.315 */            case _ =>()
/* 573.316 */        }
/* 573.317 */        
/* 573.318 */        match(Learn_Button_Y) {
/* 573.319 */            case Some(v) => this.Learn_Button_Y = v
/* 573.320 */            case _ =>()
/* 573.321 */        }
/* 573.322 */        
/* 573.323 */    }
/* 573.324 */    
/* 573.325 */    
/* 573.326 */    public func rerender() {
/* 573.327 */        this.updateDirtyElements()
/* 573.328 */    }
/* 573.329 */    
/* 573.330 */    
/* 573.331 */    public func purgeVariableDependenciesOnElmtId(rmElmtId: Int64) {
/* 573.332 */        
/* 573.333 */        this.stateVarDecl_step_.purgeDependencyOnElmtId(rmElmtId)
/* 573.334 */        
/* 573.335 */        this.stateVarDecl_pre_step_.purgeDependencyOnElmtId(rmElmtId)
/* 573.336 */        
/* 573.337 */        this.stateVarDecl_MenuOpacity_.purgeDependencyOnElmtId(rmElmtId)
/* 573.338 */        
/* 573.339 */        this.stateVarDecl_PVP_Opacity_.purgeDependencyOnElmtId(rmElmtId)
/* 573.340 */        
/* 573.341 */        this.stateVarDecl_PVE_Opacity_.purgeDependencyOnElmtId(rmElmtId)
/* 573.342 */        
/* 573.343 */        this.stateVarDecl_Learn_Opacity_.purgeDependencyOnElmtId(rmElmtId)
/* 573.344 */        
/* 573.345 */        this.stateVarDecl_PVP_Button_X_.purgeDependencyOnElmtId(rmElmtId)
/* 573.346 */        
/* 573.347 */        this.stateVarDecl_PVP_Button_Y_.purgeDependencyOnElmtId(rmElmtId)
/* 573.348 */        
/* 573.349 */        this.stateVarDecl_Learn_Button_X_.purgeDependencyOnElmtId(rmElmtId)
/* 573.350 */        
/* 573.351 */        this.stateVarDecl_Learn_Button_Y_.purgeDependencyOnElmtId(rmElmtId)
/* 573.352 */        
/* 573.353 */    }
/* 573.354 */    
/* 573.355 */    
/* 573.356 */    public func forceRerender(deep!: Bool = false) {
/* 573.357 */        this.forceCompleteRerender(deep)
/* 573.358 */    }
/* 573.359 */    
/* 573.360 */    
/* 573.361 */}
/* 573.362 */
/* ===== End of the Emit ===== */

//结束页绘制组件
/* ===== Emitted by MacroCall @Component in draw.cj:759:1 ===== */
/* 759.1 */public class GameEndPage <: CustomView {
/* 759.2 */    
/* 759.3 */    
/* 759.4 */    private var stateVarDecl_game_: ObservedProperty < FourAscendGame >
/* 759.5 */    
/* 759.6 */    
/* 759.7 */    private mut prop game: FourAscendGame {
/* 759.8 */        get() {
/* 759.9 */            return this.stateVarDecl_game_.get()
/* 759.10 */        }
/* 759.11 */        set(v) {
/* 759.12 */            this.stateVarDecl_game_.set(v)
/* 759.13 */        }
/* 759.14 */    }
/* 759.15 */    
/* 759.16 */    
/* 759.17 */    private var stateVarDecl_game_state_: ObservedProperty < Board >
/* 759.18 */    
/* 759.19 */    
/* 759.20 */    private mut prop game_state: Board {
/* 759.21 */        get() {
/* 759.22 */            return this.stateVarDecl_game_state_.get()
/* 759.23 */        }
/* 759.24 */        set(v) {
/* 759.25 */            this.stateVarDecl_game_state_.set(v)
/* 759.26 */        }
/* 759.27 */    }
/* 759.28 */    
/* 759.29 */    
/* 759.30 */    private var stateVarDecl_data_: ObservedProperty < ObservedMatrix >
/* 759.31 */    
/* 759.32 */    
/* 759.33 */    private mut prop data: ObservedMatrix {
/* 759.34 */        get() {
/* 759.35 */            return this.stateVarDecl_data_.get()
/* 759.36 */        }
/* 759.37 */        set(v) {
/* 759.38 */            this.stateVarDecl_data_.set(v)
/* 759.39 */        }
/* 759.40 */    }
/* 759.41 */    
/* 759.42 */    
/* 759.43 */    private var stateVarDecl_ai_: ObservedProperty < StupidFourAscendPlayer >
/* 759.44 */    
/* 759.45 */    
/* 759.46 */    private mut prop ai: StupidFourAscendPlayer {
/* 759.47 */        get() {
/* 759.48 */            return this.stateVarDecl_ai_.get()
/* 759.49 */        }
/* 759.50 */        set(v) {
/* 759.51 */            this.stateVarDecl_ai_.set(v)
/* 759.52 */        }
/* 759.53 */    }
/* 759.54 */    
/* 759.55 */    
/* 759.56 */    private var stateVarDecl_step_: ObservedProperty < Int64 >
/* 759.57 */    
/* 759.58 */    
/* 759.59 */    private mut prop step: Int64 {
/* 759.60 */        get() {
/* 759.61 */            return this.stateVarDecl_step_.get()
/* 759.62 */        }
/* 759.63 */        set(v) {
/* 759.64 */            this.stateVarDecl_step_.set(v)
/* 759.65 */        }
/* 759.66 */    }
/* 759.67 */    
/* 759.68 */    
/* 759.69 */    private var stateVarDecl_WhiteAttackPos_: ObservedProperty < ObservedArrayList < Array < Int64 >>>
/* 759.70 */    
/* 759.71 */    
/* 759.72 */    private mut prop WhiteAttackPos: ObservedArrayList < Array < Int64 >> {
/* 759.73 */        get() {
/* 759.74 */            return this.stateVarDecl_WhiteAttackPos_.get()
/* 759.75 */        }
/* 759.76 */        set(v) {
/* 759.77 */            this.stateVarDecl_WhiteAttackPos_.set(v)
/* 759.78 */        }
/* 759.79 */    }
/* 759.80 */    
/* 759.81 */    
/* 759.82 */    private var stateVarDecl_BlackAttackPos_: ObservedProperty < ObservedArrayList < Array < Int64 >>>
/* 759.83 */    
/* 759.84 */    
/* 759.85 */    private mut prop BlackAttackPos: ObservedArrayList < Array < Int64 >> {
/* 759.86 */        get() {
/* 759.87 */            return this.stateVarDecl_BlackAttackPos_.get()
/* 759.88 */        }
/* 759.89 */        set(v) {
/* 759.90 */            this.stateVarDecl_BlackAttackPos_.set(v)
/* 759.91 */        }
/* 759.92 */    }
/* 759.93 */    
/* 759.94 */    
/* 759.95 */    private var stateVarDecl_animateFlag_: ObservedProperty < Bool >
/* 759.96 */    
/* 759.97 */    
/* 759.98 */    private mut prop animateFlag: Bool {
/* 759.99 */        get() {
/* 759.100 */            return this.stateVarDecl_animateFlag_.get()
/* 759.101 */        }
/* 759.102 */        set(v) {
/* 759.103 */            this.stateVarDecl_animateFlag_.set(v)
/* 759.104 */        }
/* 759.105 */    }
/* 759.106 */    
/* 759.107 */    
/* 759.108 */    private var stateVarDecl_player_: ObservedProperty < Int64 >
/* 759.109 */    
/* 759.110 */    
/* 759.111 */    private mut prop player: Int64 {
/* 759.112 */        get() {
/* 759.113 */            return this.stateVarDecl_player_.get()
/* 759.114 */        }
/* 759.115 */        set(v) {
/* 759.116 */            this.stateVarDecl_player_.set(v)
/* 759.117 */        }
/* 759.118 */    }
/* 759.119 */    
/* 759.120 */    
/* 759.121 */    private var stateVarDecl_backto_: ObservedProperty < Int64 >
/* 759.122 */    
/* 759.123 */    
/* 759.124 */    private mut prop backto: Int64 {
/* 759.125 */        get() {
/* 759.126 */            return this.stateVarDecl_backto_.get()
/* 759.127 */        }
/* 759.128 */        set(v) {
/* 759.129 */            this.stateVarDecl_backto_.set(v)
/* 759.130 */        }
/* 759.131 */    }
/* 759.132 */    
/* 759.133 */    
/* 759.134 */    private var stateVarDecl_P1_angle_: ObservedProperty < Float32 >= ObservedProperty < Float32 >("stateVarDecl_P1_angle_", 10.0)
/* 759.135 */    
/* 759.136 */    
/* 759.137 */    private mut prop P1_angle: Float32 {
/* 759.138 */        get() {
/* 759.139 */            return this.stateVarDecl_P1_angle_.get()
/* 759.140 */        }
/* 759.141 */        set(v) {
/* 759.142 */            this.stateVarDecl_P1_angle_.set(v)
/* 759.143 */        }
/* 759.144 */    }
/* 759.145 */    
/* 759.146 */    
/* 759.147 */    private var stateVarDecl_P1_height_: ObservedProperty < Int64 >= ObservedProperty < Int64 >("stateVarDecl_P1_height_", 40)
/* 759.148 */    
/* 759.149 */    
/* 759.150 */    private mut prop P1_height: Int64 {
/* 759.151 */        get() {
/* 759.152 */            return this.stateVarDecl_P1_height_.get()
/* 759.153 */        }
/* 759.154 */        set(v) {
/* 759.155 */            this.stateVarDecl_P1_height_.set(v)
/* 759.156 */        }
/* 759.157 */    }
/* 759.158 */    
/* 759.159 */    
/* 759.160 */    private var stateVarDecl_P1_width_: ObservedProperty < Int64 >= ObservedProperty < Int64 >("stateVarDecl_P1_width_", 80)
/* 759.161 */    
/* 759.162 */    
/* 759.163 */    private mut prop P1_width: Int64 {
/* 759.164 */        get() {
/* 759.165 */            return this.stateVarDecl_P1_width_.get()
/* 759.166 */        }
/* 759.167 */        set(v) {
/* 759.168 */            this.stateVarDecl_P1_width_.set(v)
/* 759.169 */        }
/* 759.170 */    }
/* 759.171 */    
/* 759.172 */    
/* 759.173 */    private var stateVarDecl_P2_angle_: ObservedProperty < Float32 >= ObservedProperty < Float32 >("stateVarDecl_P2_angle_", - 10.0)
/* 759.174 */    
/* 759.175 */    
/* 759.176 */    private mut prop P2_angle: Float32 {
/* 759.177 */        get() {
/* 759.178 */            return this.stateVarDecl_P2_angle_.get()
/* 759.179 */        }
/* 759.180 */        set(v) {
/* 759.181 */            this.stateVarDecl_P2_angle_.set(v)
/* 759.182 */        }
/* 759.183 */    }
/* 759.184 */    
/* 759.185 */    
/* 759.186 */    private var stateVarDecl_P2_height_: ObservedProperty < Int64 >= ObservedProperty < Int64 >("stateVarDecl_P2_height_", 40)
/* 759.187 */    
/* 759.188 */    
/* 759.189 */    private mut prop P2_height: Int64 {
/* 759.190 */        get() {
/* 759.191 */            return this.stateVarDecl_P2_height_.get()
/* 759.192 */        }
/* 759.193 */        set(v) {
/* 759.194 */            this.stateVarDecl_P2_height_.set(v)
/* 759.195 */        }
/* 759.196 */    }
/* 759.197 */    
/* 759.198 */    
/* 759.199 */    private var stateVarDecl_P2_width_: ObservedProperty < Int64 >= ObservedProperty < Int64 >("stateVarDecl_P2_width_", 80)
/* 759.200 */    
/* 759.201 */    
/* 759.202 */    private mut prop P2_width: Int64 {
/* 759.203 */        get() {
/* 759.204 */            return this.stateVarDecl_P2_width_.get()
/* 759.205 */        }
/* 759.206 */        set(v) {
/* 759.207 */            this.stateVarDecl_P2_width_.set(v)
/* 759.208 */        }
/* 759.209 */    }
/* 759.210 */    
/* 759.211 */    
/* 759.212 */    var P1_PosX: Int64 = 230
/* 759.213 */    
/* 759.214 */    
/* 759.215 */    var P1_PosY: Int64 = 150
/* 759.216 */    
/* 759.217 */    
/* 759.218 */    var P2_PosX: Int64 = 580
/* 759.219 */    
/* 759.220 */    
/* 759.221 */    var P2_PosY: Int64 = 150
/* 759.222 */    
/* 759.223 */    
/* 759.224 */    private var stateVarDecl_opa_: ObservedProperty < Float64 >= ObservedProperty < Float64 >("stateVarDecl_opa_", 0.0)
/* 759.225 */    
/* 759.226 */    
/* 759.227 */    private mut prop opa: Float64 {
/* 759.228 */        get() {
/* 759.229 */            return this.stateVarDecl_opa_.get()
/* 759.230 */        }
/* 759.231 */        set(v) {
/* 759.232 */            this.stateVarDecl_opa_.set(v)
/* 759.233 */        }
/* 759.234 */    }
/* 759.235 */    
/* 759.236 */    
/* 759.237 */    let animateOpt = AnimateParam(duration: 800, curve: Curve.Smooth, delay: 0, iterations: - 1, playMode: PlayMode.Alternate, onFinish: { => AppLog.info("onfinish") }, expectedFrameRateRange: ExpectedFrameRateRange(min: 20, max: 120, expected: 90))
/* 759.238 */    
/* 759.239 */    
/* 759.240 */    
/* 759.241 */    public func build() {
/* 759.242 */        
/* 759.243 */        this.observeComponentCreation({ elmtId, isInitialRender =>
/* 759.244 */            Stack { this.observeComponentCreation({ elmtId, isInitialRender => If { if(step == 4) {
/* 759.245 */                this.ifElseBranchUpdateFunction(0, { => this.observeComponentCreation({ elmtId, isInitialRender => Image(__GenerateResource__("", "", "", app.media.Game_End_Image, "app.media.Game_End_Image",[], 20000)).height(400).width(860).position(x: 0, y: 0) })
/* 759.246 */                this.observeComponentCreation({ elmtId, isInitialRender => If { if(game.hp1 > 0) {
/* 759.247 */                    this.ifElseBranchUpdateFunction(0, { => this.observeComponentCreation({ elmtId, isInitialRender => Text("P1 Wins !").position(x: 300, y: 50).fontSize(80).fontFamily(__GenerateResource__("", "", "", app.string.ProggyTinySZ, "app.string.ProggyTinySZ",[], 10003)) }) })
/* 759.248 */                }
/* 759.249 */                else {
/* 759.250 */                    this.ifElseBranchUpdateFunction(1, { => this.observeComponentCreation({ elmtId, isInitialRender => Text("P2 Wins !").position(x: 300, y: 50).fontSize(80).fontFamily(__GenerateResource__("", "", "", app.string.ProggyTinySZ, "app.string.ProggyTinySZ",[], 10003)) }) })
/* 759.251 */                }
/* 759.252 */            } })
/* 759.253 */            this.observeComponentCreation({ elmtId, isInitialRender => Image(__GenerateResource__("", "", "", app.media.player, "app.media.player",[], 20000)).animationStart(animateOpt).position(x: P1_PosX, y: P1_PosY).height(P1_height).width(P1_width).objectFit(ImageFit.Fill).rotate(P1_angle).onAppear({ => this.P1_angle = - 10.0
/* 759.254 */                this.P1_width = 62
/* 759.255 */            this.P1_height = 63 }).animationEnd() })
/* 759.256 */            this.observeComponentCreation({ elmtId, isInitialRender => Image(__GenerateResource__("", "", "", app.media.enemy, "app.media.enemy",[], 20000)).animationStart(animateOpt).position(x: P2_PosX, y: P2_PosY).height(this.P2_height).width(this.P2_width).objectFit(ImageFit.Fill).rotate(P2_angle).onAppear({ => this.P2_angle = 10.0
/* 759.257 */                this.P2_height = 62
/* 759.258 */            this.P2_width = 63 }).animationEnd() })
/* 759.259 */            this.observeComponentCreation({ elmtId, isInitialRender => Text("Restart").position(x: 350, y: 300).fontSize(50).fontFamily(__GenerateResource__("", "", "", app.string.ProggyTinySZ, "app.string.ProggyTinySZ",[], 10003)).onClick({ evt => game = FourAscendGame(9, 6, 6)
/* 759.260 */                ai = StupidFourAscendPlayer(game)
/* 759.261 */                this.game_state = game.getInitBoard()
/* 759.262 */                this.data = ObservedArray < Int64 >(Array < Int64 >(81, { _ => 0 }))
/* 759.263 */                this.step = this.backto
/* 759.264 */                this.WhiteAttackPos = ObservedArrayList(ArrayList())
/* 759.265 */                this.BlackAttackPos = ObservedArrayList(ArrayList())
/* 759.266 */                this.animateFlag = false
/* 759.267 */            this.player = 1 }) }) })
/* 759.268 */        }
/* 759.269 */        else {
/* 759.270 */            If.branchId(1)
/* 759.271 */        }
/* 759.272 */    } }) }.opacity(opa).onAppear { animateTo(AnimateParam(duration: 800, curve: Curve.Smooth, delay: 0, iterations: 1, playMode: PlayMode.Alternate, onFinish: { => }, expectedFrameRateRange: ExpectedFrameRateRange(min: 20, max: 120, expected: 90)), { => this.opa = 1.0 }) }
/* 759.273 */})
/* 759.274 */
/* 759.275 */()
/* 759.276 */
/* 759.277 */}
/* 759.278 */
/* 759.279 */
/* 759.280 */public init(parent: Option < CustomView >, game!: ObservedProperty < FourAscendGame >, game_state!: ObservedProperty < Board >, data!: ObservedProperty < ObservedMatrix >, ai!: ObservedProperty < StupidFourAscendPlayer >, step!: ObservedProperty < Int64 >, WhiteAttackPos!: ObservedProperty < ObservedArrayList < Array < Int64 >>>, BlackAttackPos!: ObservedProperty < ObservedArrayList < Array < Int64 >>>, animateFlag!: ObservedProperty < Bool >, player!: ObservedProperty < Int64 >, backto!: ObservedProperty < Int64 >, P1_angle!: Option < ObservedProperty < Float32 >>= None, P1_height!: Option < ObservedProperty < Int64 >>= None, P1_width!: Option < ObservedProperty < Int64 >>= None, P2_angle!: Option < ObservedProperty < Float32 >>= None, P2_height!: Option < ObservedProperty < Int64 >>= None, P2_width!: Option < ObservedProperty < Int64 >>= None, P1_PosX!: Option < ObservedProperty < Int64 >>= None, P1_PosY!: Option < ObservedProperty < Int64 >>= None, P2_PosX!: Option < ObservedProperty < Int64 >>= None, P2_PosY!: Option < ObservedProperty < Int64 >>= None, opa!: Option < ObservedProperty < Float64 >>= None, localStorage!: Option < LocalStorage >= None) {
/* 759.281 */super(parent, localStorage)
/* 759.282 */
/* 759.283 */
/* 759.284 */this.stateVarDecl_game_ = game
/* 759.285 */
/* 759.286 */this.stateVarDecl_game_state_ = game_state
/* 759.287 */
/* 759.288 */this.stateVarDecl_data_ = data
/* 759.289 */
/* 759.290 */this.stateVarDecl_ai_ = ai
/* 759.291 */
/* 759.292 */this.stateVarDecl_step_ = step
/* 759.293 */
/* 759.294 */this.stateVarDecl_WhiteAttackPos_ = WhiteAttackPos
/* 759.295 */
/* 759.296 */this.stateVarDecl_BlackAttackPos_ = BlackAttackPos
/* 759.297 */
/* 759.298 */this.stateVarDecl_animateFlag_ = animateFlag
/* 759.299 */
/* 759.300 */this.stateVarDecl_player_ = player
/* 759.301 */
/* 759.302 */this.stateVarDecl_backto_ = backto
/* 759.303 */
/* 759.304 */match(P1_angle) {
/* 759.305 */    case Some(v) => this.stateVarDecl_P1_angle_ = ObservedProperty < Float32 >("stateVarDecl_P1_angle_", v.get())
/* 759.306 */    case _ =>()
/* 759.307 */}
/* 759.308 */
/* 759.309 */match(P1_height) {
/* 759.310 */    case Some(v) => this.stateVarDecl_P1_height_ = ObservedProperty < Int64 >("stateVarDecl_P1_height_", v.get())
/* 759.311 */    case _ =>()
/* 759.312 */}
/* 759.313 */
/* 759.314 */match(P1_width) {
/* 759.315 */    case Some(v) => this.stateVarDecl_P1_width_ = ObservedProperty < Int64 >("stateVarDecl_P1_width_", v.get())
/* 759.316 */    case _ =>()
/* 759.317 */}
/* 759.318 */
/* 759.319 */match(P2_angle) {
/* 759.320 */    case Some(v) => this.stateVarDecl_P2_angle_ = ObservedProperty < Float32 >("stateVarDecl_P2_angle_", v.get())
/* 759.321 */    case _ =>()
/* 759.322 */}
/* 759.323 */
/* 759.324 */match(P2_height) {
/* 759.325 */    case Some(v) => this.stateVarDecl_P2_height_ = ObservedProperty < Int64 >("stateVarDecl_P2_height_", v.get())
/* 759.326 */    case _ =>()
/* 759.327 */}
/* 759.328 */
/* 759.329 */match(P2_width) {
/* 759.330 */    case Some(v) => this.stateVarDecl_P2_width_ = ObservedProperty < Int64 >("stateVarDecl_P2_width_", v.get())
/* 759.331 */    case _ =>()
/* 759.332 */}
/* 759.333 */
/* 759.334 */match(P1_PosX) {
/* 759.335 */    case Some(v) => this.P1_PosX = v.get()
/* 759.336 */    case _ =>()
/* 759.337 */}
/* 759.338 */
/* 759.339 */match(P1_PosY) {
/* 759.340 */    case Some(v) => this.P1_PosY = v.get()
/* 759.341 */    case _ =>()
/* 759.342 */}
/* 759.343 */
/* 759.344 */match(P2_PosX) {
/* 759.345 */    case Some(v) => this.P2_PosX = v.get()
/* 759.346 */    case _ =>()
/* 759.347 */}
/* 759.348 */
/* 759.349 */match(P2_PosY) {
/* 759.350 */    case Some(v) => this.P2_PosY = v.get()
/* 759.351 */    case _ =>()
/* 759.352 */}
/* 759.353 */
/* 759.354 */match(opa) {
/* 759.355 */    case Some(v) => this.stateVarDecl_opa_ = ObservedProperty < Float64 >("stateVarDecl_opa_", v.get())
/* 759.356 */    case _ =>()
/* 759.357 */}
/* 759.358 */
/* 759.359 */
/* 759.360 */this.stateVarDecl_game_.subscribeEx(this)
/* 759.361 */
/* 759.362 */this.stateVarDecl_game_state_.subscribeEx(this)
/* 759.363 */
/* 759.364 */this.stateVarDecl_data_.subscribeEx(this)
/* 759.365 */
/* 759.366 */this.stateVarDecl_ai_.subscribeEx(this)
/* 759.367 */
/* 759.368 */this.stateVarDecl_step_.subscribeEx(this)
/* 759.369 */
/* 759.370 */this.stateVarDecl_WhiteAttackPos_.subscribeEx(this)
/* 759.371 */
/* 759.372 */this.stateVarDecl_BlackAttackPos_.subscribeEx(this)
/* 759.373 */
/* 759.374 */this.stateVarDecl_animateFlag_.subscribeEx(this)
/* 759.375 */
/* 759.376 */this.stateVarDecl_player_.subscribeEx(this)
/* 759.377 */
/* 759.378 */this.stateVarDecl_backto_.subscribeEx(this)
/* 759.379 */
/* 759.380 */this.stateVarDecl_P1_angle_.subscribeEx(this)
/* 759.381 */
/* 759.382 */this.stateVarDecl_P1_height_.subscribeEx(this)
/* 759.383 */
/* 759.384 */this.stateVarDecl_P1_width_.subscribeEx(this)
/* 759.385 */
/* 759.386 */this.stateVarDecl_P2_angle_.subscribeEx(this)
/* 759.387 */
/* 759.388 */this.stateVarDecl_P2_height_.subscribeEx(this)
/* 759.389 */
/* 759.390 */this.stateVarDecl_P2_width_.subscribeEx(this)
/* 759.391 */
/* 759.392 */this.stateVarDecl_opa_.subscribeEx(this)
/* 759.393 */
/* 759.394 */SubscriberManager.getInstance().add(this)
/* 759.395 */
/* 759.396 */
/* 759.397 */registerSelf()
/* 759.398 */parent?.addChildById(id(), this)
/* 759.399 */}
/* 759.400 */
/* 759.401 */
/* 759.402 */public override func aboutToBeDeleted() {
/* 759.403 */
/* 759.404 */this.stateVarDecl_game_.unsubscribeEx(this)
/* 759.405 */
/* 759.406 */this.stateVarDecl_game_state_.unsubscribeEx(this)
/* 759.407 */
/* 759.408 */this.stateVarDecl_data_.unsubscribeEx(this)
/* 759.409 */
/* 759.410 */this.stateVarDecl_ai_.unsubscribeEx(this)
/* 759.411 */
/* 759.412 */this.stateVarDecl_step_.unsubscribeEx(this)
/* 759.413 */
/* 759.414 */this.stateVarDecl_WhiteAttackPos_.unsubscribeEx(this)
/* 759.415 */
/* 759.416 */this.stateVarDecl_BlackAttackPos_.unsubscribeEx(this)
/* 759.417 */
/* 759.418 */this.stateVarDecl_animateFlag_.unsubscribeEx(this)
/* 759.419 */
/* 759.420 */this.stateVarDecl_player_.unsubscribeEx(this)
/* 759.421 */
/* 759.422 */this.stateVarDecl_backto_.unsubscribeEx(this)
/* 759.423 */
/* 759.424 */this.stateVarDecl_P1_angle_.unsubscribeEx(this)
/* 759.425 */
/* 759.426 */this.stateVarDecl_P1_height_.unsubscribeEx(this)
/* 759.427 */
/* 759.428 */this.stateVarDecl_P1_width_.unsubscribeEx(this)
/* 759.429 */
/* 759.430 */this.stateVarDecl_P2_angle_.unsubscribeEx(this)
/* 759.431 */
/* 759.432 */this.stateVarDecl_P2_height_.unsubscribeEx(this)
/* 759.433 */
/* 759.434 */this.stateVarDecl_P2_width_.unsubscribeEx(this)
/* 759.435 */
/* 759.436 */this.stateVarDecl_opa_.unsubscribeEx(this)
/* 759.437 */
/* 759.438 */SubscriberManager.getInstance().delete(this)
/* 759.439 */this.aboutToBeDeletedInternal()
/* 759.440 */}
/* 759.441 */
/* 759.442 */
/* 759.443 */func updateWithValueParams(game!: Option < FourAscendGame >= Option < FourAscendGame >.None, game_state!: Option < Board >= Option < Board >.None, data!: Option < ObservedMatrix >= Option < ObservedMatrix >.None, ai!: Option < StupidFourAscendPlayer >= Option < StupidFourAscendPlayer >.None, step!: Option < Int64 >= Option < Int64 >.None, WhiteAttackPos!: Option < ObservedArrayList < Array < Int64 >>>= Option < ObservedArrayList < Array < Int64 >>>.None, BlackAttackPos!: Option < ObservedArrayList < Array < Int64 >>>= Option < ObservedArrayList < Array < Int64 >>>.None, animateFlag!: Option < Bool >= Option < Bool >.None, player!: Option < Int64 >= Option < Int64 >.None, backto!: Option < Int64 >= Option < Int64 >.None, P1_angle!: Option < Float32 >= Option < Float32 >.None, P1_height!: Option < Int64 >= Option < Int64 >.None, P1_width!: Option < Int64 >= Option < Int64 >.None, P2_angle!: Option < Float32 >= Option < Float32 >.None, P2_height!: Option < Int64 >= Option < Int64 >.None, P2_width!: Option < Int64 >= Option < Int64 >.None, P1_PosX!: Option < Int64 >= Option < Int64 >.None, P1_PosY!: Option < Int64 >= Option < Int64 >.None, P2_PosX!: Option < Int64 >= Option < Int64 >.None, P2_PosY!: Option < Int64 >= Option < Int64 >.None, opa!: Option < Float64 >= Option < Float64 >.None): Unit {
/* 759.444 */
/* 759.445 */match(P1_angle) {
/* 759.446 */    case Some(v) => this.P1_angle = v
/* 759.447 */    case _ =>()
/* 759.448 */}
/* 759.449 */
/* 759.450 */match(P1_height) {
/* 759.451 */    case Some(v) => this.P1_height = v
/* 759.452 */    case _ =>()
/* 759.453 */}
/* 759.454 */
/* 759.455 */match(P1_width) {
/* 759.456 */    case Some(v) => this.P1_width = v
/* 759.457 */    case _ =>()
/* 759.458 */}
/* 759.459 */
/* 759.460 */match(P2_angle) {
/* 759.461 */    case Some(v) => this.P2_angle = v
/* 759.462 */    case _ =>()
/* 759.463 */}
/* 759.464 */
/* 759.465 */match(P2_height) {
/* 759.466 */    case Some(v) => this.P2_height = v
/* 759.467 */    case _ =>()
/* 759.468 */}
/* 759.469 */
/* 759.470 */match(P2_width) {
/* 759.471 */    case Some(v) => this.P2_width = v
/* 759.472 */    case _ =>()
/* 759.473 */}
/* 759.474 */
/* 759.475 */match(opa) {
/* 759.476 */    case Some(v) => this.opa = v
/* 759.477 */    case _ =>()
/* 759.478 */}
/* 759.479 */
/* 759.480 */}
/* 759.481 */
/* 759.482 */
/* 759.483 */public func rerender() {
/* 759.484 */this.updateDirtyElements()
/* 759.485 */}
/* 759.486 */
/* 759.487 */
/* 759.488 */public func purgeVariableDependenciesOnElmtId(rmElmtId: Int64) {
/* 759.489 */
/* 759.490 */this.stateVarDecl_game_.purgeDependencyOnElmtId(rmElmtId)
/* 759.491 */
/* 759.492 */this.stateVarDecl_game_state_.purgeDependencyOnElmtId(rmElmtId)
/* 759.493 */
/* 759.494 */this.stateVarDecl_data_.purgeDependencyOnElmtId(rmElmtId)
/* 759.495 */
/* 759.496 */this.stateVarDecl_ai_.purgeDependencyOnElmtId(rmElmtId)
/* 759.497 */
/* 759.498 */this.stateVarDecl_step_.purgeDependencyOnElmtId(rmElmtId)
/* 759.499 */
/* 759.500 */this.stateVarDecl_WhiteAttackPos_.purgeDependencyOnElmtId(rmElmtId)
/* 759.501 */
/* 759.502 */this.stateVarDecl_BlackAttackPos_.purgeDependencyOnElmtId(rmElmtId)
/* 759.503 */
/* 759.504 */this.stateVarDecl_animateFlag_.purgeDependencyOnElmtId(rmElmtId)
/* 759.505 */
/* 759.506 */this.stateVarDecl_player_.purgeDependencyOnElmtId(rmElmtId)
/* 759.507 */
/* 759.508 */this.stateVarDecl_backto_.purgeDependencyOnElmtId(rmElmtId)
/* 759.509 */
/* 759.510 */this.stateVarDecl_P1_angle_.purgeDependencyOnElmtId(rmElmtId)
/* 759.511 */
/* 759.512 */this.stateVarDecl_P1_height_.purgeDependencyOnElmtId(rmElmtId)
/* 759.513 */
/* 759.514 */this.stateVarDecl_P1_width_.purgeDependencyOnElmtId(rmElmtId)
/* 759.515 */
/* 759.516 */this.stateVarDecl_P2_angle_.purgeDependencyOnElmtId(rmElmtId)
/* 759.517 */
/* 759.518 */this.stateVarDecl_P2_height_.purgeDependencyOnElmtId(rmElmtId)
/* 759.519 */
/* 759.520 */this.stateVarDecl_P2_width_.purgeDependencyOnElmtId(rmElmtId)
/* 759.521 */
/* 759.522 */this.stateVarDecl_opa_.purgeDependencyOnElmtId(rmElmtId)
/* 759.523 */
/* 759.524 */}
/* 759.525 */
/* 759.526 */
/* 759.527 */public func forceRerender(deep!: Bool = false) {
/* 759.528 */this.forceCompleteRerender(deep)
/* 759.529 */}
/* 759.530 */
/* 759.531 */
/* 759.532 */}
/* 759.533 */
/* ===== End of the Emit ===== */

//返回按钮绘制组件
/* ===== Emitted by MacroCall @Component in draw.cj:912:1 ===== */
/* 912.1 */public class backarrow <: CustomView {
/* 912.2 */    
/* 912.3 */    
/* 912.4 */    private var stateVarDecl_game_: ObservedProperty < FourAscendGame >
/* 912.5 */    
/* 912.6 */    
/* 912.7 */    private mut prop game: FourAscendGame {
/* 912.8 */        get() {
/* 912.9 */            return this.stateVarDecl_game_.get()
/* 912.10 */        }
/* 912.11 */        set(v) {
/* 912.12 */            this.stateVarDecl_game_.set(v)
/* 912.13 */        }
/* 912.14 */    }
/* 912.15 */    
/* 912.16 */    
/* 912.17 */    private var stateVarDecl_game_state_: ObservedProperty < Board >
/* 912.18 */    
/* 912.19 */    
/* 912.20 */    private mut prop game_state: Board {
/* 912.21 */        get() {
/* 912.22 */            return this.stateVarDecl_game_state_.get()
/* 912.23 */        }
/* 912.24 */        set(v) {
/* 912.25 */            this.stateVarDecl_game_state_.set(v)
/* 912.26 */        }
/* 912.27 */    }
/* 912.28 */    
/* 912.29 */    
/* 912.30 */    private var stateVarDecl_data_: ObservedProperty < ObservedMatrix >
/* 912.31 */    
/* 912.32 */    
/* 912.33 */    private mut prop data: ObservedMatrix {
/* 912.34 */        get() {
/* 912.35 */            return this.stateVarDecl_data_.get()
/* 912.36 */        }
/* 912.37 */        set(v) {
/* 912.38 */            this.stateVarDecl_data_.set(v)
/* 912.39 */        }
/* 912.40 */    }
/* 912.41 */    
/* 912.42 */    
/* 912.43 */    private var stateVarDecl_ai_: ObservedProperty < StupidFourAscendPlayer >
/* 912.44 */    
/* 912.45 */    
/* 912.46 */    private mut prop ai: StupidFourAscendPlayer {
/* 912.47 */        get() {
/* 912.48 */            return this.stateVarDecl_ai_.get()
/* 912.49 */        }
/* 912.50 */        set(v) {
/* 912.51 */            this.stateVarDecl_ai_.set(v)
/* 912.52 */        }
/* 912.53 */    }
/* 912.54 */    
/* 912.55 */    
/* 912.56 */    private var stateVarDecl_step_: ObservedProperty < Int64 >
/* 912.57 */    
/* 912.58 */    
/* 912.59 */    private mut prop step: Int64 {
/* 912.60 */        get() {
/* 912.61 */            return this.stateVarDecl_step_.get()
/* 912.62 */        }
/* 912.63 */        set(v) {
/* 912.64 */            this.stateVarDecl_step_.set(v)
/* 912.65 */        }
/* 912.66 */    }
/* 912.67 */    
/* 912.68 */    
/* 912.69 */    private var stateVarDecl_WhiteAttackPos_: ObservedProperty < ObservedArrayList < Array < Int64 >>>
/* 912.70 */    
/* 912.71 */    
/* 912.72 */    private mut prop WhiteAttackPos: ObservedArrayList < Array < Int64 >> {
/* 912.73 */        get() {
/* 912.74 */            return this.stateVarDecl_WhiteAttackPos_.get()
/* 912.75 */        }
/* 912.76 */        set(v) {
/* 912.77 */            this.stateVarDecl_WhiteAttackPos_.set(v)
/* 912.78 */        }
/* 912.79 */    }
/* 912.80 */    
/* 912.81 */    
/* 912.82 */    private var stateVarDecl_BlackAttackPos_: ObservedProperty < ObservedArrayList < Array < Int64 >>>
/* 912.83 */    
/* 912.84 */    
/* 912.85 */    private mut prop BlackAttackPos: ObservedArrayList < Array < Int64 >> {
/* 912.86 */        get() {
/* 912.87 */            return this.stateVarDecl_BlackAttackPos_.get()
/* 912.88 */        }
/* 912.89 */        set(v) {
/* 912.90 */            this.stateVarDecl_BlackAttackPos_.set(v)
/* 912.91 */        }
/* 912.92 */    }
/* 912.93 */    
/* 912.94 */    
/* 912.95 */    private var stateVarDecl_animateFlag_: ObservedProperty < Bool >
/* 912.96 */    
/* 912.97 */    
/* 912.98 */    private mut prop animateFlag: Bool {
/* 912.99 */        get() {
/* 912.100 */            return this.stateVarDecl_animateFlag_.get()
/* 912.101 */        }
/* 912.102 */        set(v) {
/* 912.103 */            this.stateVarDecl_animateFlag_.set(v)
/* 912.104 */        }
/* 912.105 */    }
/* 912.106 */    
/* 912.107 */    
/* 912.108 */    private var stateVarDecl_player_: ObservedProperty < Int64 >
/* 912.109 */    
/* 912.110 */    
/* 912.111 */    private mut prop player: Int64 {
/* 912.112 */        get() {
/* 912.113 */            return this.stateVarDecl_player_.get()
/* 912.114 */        }
/* 912.115 */        set(v) {
/* 912.116 */            this.stateVarDecl_player_.set(v)
/* 912.117 */        }
/* 912.118 */    }
/* 912.119 */    
/* 912.120 */    
/* 912.121 */    
/* 912.122 */    public func build() {
/* 912.123 */        
/* 912.124 */        this.observeComponentCreation({ elmtId, isInitialRender =>
/* 912.125 */            Image(__GenerateResource__("", "", "", app.media.backarrow, "app.media.backarrow",[], 20000)).height(45).width(50).position(x: - 100, y: 30).onClick({ evt => game = FourAscendGame(9, 6, 6)
/* 912.126 */                ai = StupidFourAscendPlayer(game)
/* 912.127 */                this.game_state = game.getInitBoard()
/* 912.128 */                this.data = ObservedArray < Int64 >(Array < Int64 >(81, { _ => 0 }))
/* 912.129 */                this.step = 1
/* 912.130 */                this.WhiteAttackPos = ObservedArrayList(ArrayList())
/* 912.131 */                this.BlackAttackPos = ObservedArrayList(ArrayList())
/* 912.132 */                this.animateFlag = false
/* 912.133 */            this.player = 1 })
/* 912.134 */        })
/* 912.135 */        
/* 912.136 */        ()
/* 912.137 */        
/* 912.138 */    }
/* 912.139 */    
/* 912.140 */    
/* 912.141 */    public init(parent: Option < CustomView >, game!: ObservedProperty < FourAscendGame >, game_state!: ObservedProperty < Board >, data!: ObservedProperty < ObservedMatrix >, ai!: ObservedProperty < StupidFourAscendPlayer >, step!: ObservedProperty < Int64 >, WhiteAttackPos!: ObservedProperty < ObservedArrayList < Array < Int64 >>>, BlackAttackPos!: ObservedProperty < ObservedArrayList < Array < Int64 >>>, animateFlag!: ObservedProperty < Bool >, player!: ObservedProperty < Int64 >, localStorage!: Option < LocalStorage >= None) {
/* 912.142 */        super(parent, localStorage)
/* 912.143 */        
/* 912.144 */        
/* 912.145 */        this.stateVarDecl_game_ = game
/* 912.146 */        
/* 912.147 */        this.stateVarDecl_game_state_ = game_state
/* 912.148 */        
/* 912.149 */        this.stateVarDecl_data_ = data
/* 912.150 */        
/* 912.151 */        this.stateVarDecl_ai_ = ai
/* 912.152 */        
/* 912.153 */        this.stateVarDecl_step_ = step
/* 912.154 */        
/* 912.155 */        this.stateVarDecl_WhiteAttackPos_ = WhiteAttackPos
/* 912.156 */        
/* 912.157 */        this.stateVarDecl_BlackAttackPos_ = BlackAttackPos
/* 912.158 */        
/* 912.159 */        this.stateVarDecl_animateFlag_ = animateFlag
/* 912.160 */        
/* 912.161 */        this.stateVarDecl_player_ = player
/* 912.162 */        
/* 912.163 */        
/* 912.164 */        this.stateVarDecl_game_.subscribeEx(this)
/* 912.165 */        
/* 912.166 */        this.stateVarDecl_game_state_.subscribeEx(this)
/* 912.167 */        
/* 912.168 */        this.stateVarDecl_data_.subscribeEx(this)
/* 912.169 */        
/* 912.170 */        this.stateVarDecl_ai_.subscribeEx(this)
/* 912.171 */        
/* 912.172 */        this.stateVarDecl_step_.subscribeEx(this)
/* 912.173 */        
/* 912.174 */        this.stateVarDecl_WhiteAttackPos_.subscribeEx(this)
/* 912.175 */        
/* 912.176 */        this.stateVarDecl_BlackAttackPos_.subscribeEx(this)
/* 912.177 */        
/* 912.178 */        this.stateVarDecl_animateFlag_.subscribeEx(this)
/* 912.179 */        
/* 912.180 */        this.stateVarDecl_player_.subscribeEx(this)
/* 912.181 */        
/* 912.182 */        SubscriberManager.getInstance().add(this)
/* 912.183 */        
/* 912.184 */        
/* 912.185 */        registerSelf()
/* 912.186 */        parent?.addChildById(id(), this)
/* 912.187 */    }
/* 912.188 */    
/* 912.189 */    
/* 912.190 */    public override func aboutToBeDeleted() {
/* 912.191 */        
/* 912.192 */        this.stateVarDecl_game_.unsubscribeEx(this)
/* 912.193 */        
/* 912.194 */        this.stateVarDecl_game_state_.unsubscribeEx(this)
/* 912.195 */        
/* 912.196 */        this.stateVarDecl_data_.unsubscribeEx(this)
/* 912.197 */        
/* 912.198 */        this.stateVarDecl_ai_.unsubscribeEx(this)
/* 912.199 */        
/* 912.200 */        this.stateVarDecl_step_.unsubscribeEx(this)
/* 912.201 */        
/* 912.202 */        this.stateVarDecl_WhiteAttackPos_.unsubscribeEx(this)
/* 912.203 */        
/* 912.204 */        this.stateVarDecl_BlackAttackPos_.unsubscribeEx(this)
/* 912.205 */        
/* 912.206 */        this.stateVarDecl_animateFlag_.unsubscribeEx(this)
/* 912.207 */        
/* 912.208 */        this.stateVarDecl_player_.unsubscribeEx(this)
/* 912.209 */        
/* 912.210 */        SubscriberManager.getInstance().delete(this)
/* 912.211 */        this.aboutToBeDeletedInternal()
/* 912.212 */    }
/* 912.213 */    
/* 912.214 */    
/* 912.215 */    func updateWithValueParams(game!: Option < FourAscendGame >= Option < FourAscendGame >.None, game_state!: Option < Board >= Option < Board >.None, data!: Option < ObservedMatrix >= Option < ObservedMatrix >.None, ai!: Option < StupidFourAscendPlayer >= Option < StupidFourAscendPlayer >.None, step!: Option < Int64 >= Option < Int64 >.None, WhiteAttackPos!: Option < ObservedArrayList < Array < Int64 >>>= Option < ObservedArrayList < Array < Int64 >>>.None, BlackAttackPos!: Option < ObservedArrayList < Array < Int64 >>>= Option < ObservedArrayList < Array < Int64 >>>.None, animateFlag!: Option < Bool >= Option < Bool >.None, player!: Option < Int64 >= Option < Int64 >.None): Unit {
/* 912.216 */        
/* 912.217 */    }
/* 912.218 */    
/* 912.219 */    
/* 912.220 */    public func rerender() {
/* 912.221 */        this.updateDirtyElements()
/* 912.222 */    }
/* 912.223 */    
/* 912.224 */    
/* 912.225 */    public func purgeVariableDependenciesOnElmtId(rmElmtId: Int64) {
/* 912.226 */        
/* 912.227 */        this.stateVarDecl_game_.purgeDependencyOnElmtId(rmElmtId)
/* 912.228 */        
/* 912.229 */        this.stateVarDecl_game_state_.purgeDependencyOnElmtId(rmElmtId)
/* 912.230 */        
/* 912.231 */        this.stateVarDecl_data_.purgeDependencyOnElmtId(rmElmtId)
/* 912.232 */        
/* 912.233 */        this.stateVarDecl_ai_.purgeDependencyOnElmtId(rmElmtId)
/* 912.234 */        
/* 912.235 */        this.stateVarDecl_step_.purgeDependencyOnElmtId(rmElmtId)
/* 912.236 */        
/* 912.237 */        this.stateVarDecl_WhiteAttackPos_.purgeDependencyOnElmtId(rmElmtId)
/* 912.238 */        
/* 912.239 */        this.stateVarDecl_BlackAttackPos_.purgeDependencyOnElmtId(rmElmtId)
/* 912.240 */        
/* 912.241 */        this.stateVarDecl_animateFlag_.purgeDependencyOnElmtId(rmElmtId)
/* 912.242 */        
/* 912.243 */        this.stateVarDecl_player_.purgeDependencyOnElmtId(rmElmtId)
/* 912.244 */        
/* 912.245 */    }
/* 912.246 */    
/* 912.247 */    
/* 912.248 */    public func forceRerender(deep!: Bool = false) {
/* 912.249 */        this.forceCompleteRerender(deep)
/* 912.250 */    }
/* 912.251 */    
/* 912.252 */    
/* 912.253 */}
/* 912.254 */
/* ===== End of the Emit ===== */

//棋子动画绘制组件
/* ===== Emitted by MacroCall @Component in draw.cj:956:1 ===== */
/* 956.1 */public class AttackAnimation <: CustomView {
/* 956.2 */    
/* 956.3 */    
/* 956.4 */    private var stateVarDecl_wp_: ObservedProperty < ObservedArrayList < Array < Int64 >>>
/* 956.5 */    
/* 956.6 */    
/* 956.7 */    private mut prop wp: ObservedArrayList < Array < Int64 >> {
/* 956.8 */        get() {
/* 956.9 */            return this.stateVarDecl_wp_.get()
/* 956.10 */        }
/* 956.11 */        set(v) {
/* 956.12 */            this.stateVarDecl_wp_.set(v)
/* 956.13 */        }
/* 956.14 */    }
/* 956.15 */    
/* 956.16 */    
/* 956.17 */    private var stateVarDecl_bp_: ObservedProperty < ObservedArrayList < Array < Int64 >>>
/* 956.18 */    
/* 956.19 */    
/* 956.20 */    private mut prop bp: ObservedArrayList < Array < Int64 >> {
/* 956.21 */        get() {
/* 956.22 */            return this.stateVarDecl_bp_.get()
/* 956.23 */        }
/* 956.24 */        set(v) {
/* 956.25 */            this.stateVarDecl_bp_.set(v)
/* 956.26 */        }
/* 956.27 */    }
/* 956.28 */    
/* 956.29 */    
/* 956.30 */    private var stateVarDecl_step_W_: ObservedProperty < Int64 >= ObservedProperty < Int64 >("stateVarDecl_step_W_", 0)
/* 956.31 */    
/* 956.32 */    
/* 956.33 */    private mut prop step_W: Int64 {
/* 956.34 */        get() {
/* 956.35 */            return this.stateVarDecl_step_W_.get()
/* 956.36 */        }
/* 956.37 */        set(v) {
/* 956.38 */            this.stateVarDecl_step_W_.set(v)
/* 956.39 */        }
/* 956.40 */    }
/* 956.41 */    
/* 956.42 */    
/* 956.43 */    private var stateVarDecl_step_B_: ObservedProperty < Int64 >= ObservedProperty < Int64 >("stateVarDecl_step_B_", 0)
/* 956.44 */    
/* 956.45 */    
/* 956.46 */    private mut prop step_B: Int64 {
/* 956.47 */        get() {
/* 956.48 */            return this.stateVarDecl_step_B_.get()
/* 956.49 */        }
/* 956.50 */        set(v) {
/* 956.51 */            this.stateVarDecl_step_B_.set(v)
/* 956.52 */        }
/* 956.53 */    }
/* 956.54 */    
/* 956.55 */    
/* 956.56 */    private var stateVarDecl_animateFlag_: ObservedProperty < Bool >
/* 956.57 */    
/* 956.58 */    
/* 956.59 */    private mut prop animateFlag: Bool {
/* 956.60 */        get() {
/* 956.61 */            return this.stateVarDecl_animateFlag_.get()
/* 956.62 */        }
/* 956.63 */        set(v) {
/* 956.64 */            this.stateVarDecl_animateFlag_.set(v)
/* 956.65 */        }
/* 956.66 */    }
/* 956.67 */    
/* 956.68 */    
/* 956.69 */    private var stateVarDecl_unopposed_: ObservedProperty < Bool >
/* 956.70 */    
/* 956.71 */    
/* 956.72 */    private mut prop unopposed: Bool {
/* 956.73 */        get() {
/* 956.74 */            return this.stateVarDecl_unopposed_.get()
/* 956.75 */        }
/* 956.76 */        set(v) {
/* 956.77 */            this.stateVarDecl_unopposed_.set(v)
/* 956.78 */        }
/* 956.79 */    }
/* 956.80 */    
/* 956.81 */    
/* 956.82 */    private var stateVarDecl_onHit_: ObservedProperty < Bool >
/* 956.83 */    
/* 956.84 */    
/* 956.85 */    private mut prop onHit: Bool {
/* 956.86 */        get() {
/* 956.87 */            return this.stateVarDecl_onHit_.get()
/* 956.88 */        }
/* 956.89 */        set(v) {
/* 956.90 */            this.stateVarDecl_onHit_.set(v)
/* 956.91 */        }
/* 956.92 */    }
/* 956.93 */    
/* 956.94 */    
/* 956.95 */    var Minsize: Int64 = 0
/* 956.96 */    
/* 956.97 */    
/* 956.98 */    var Maxsize: Int64 = 0
/* 956.99 */    
/* 956.100 */    
/* 956.101 */    let animateOpt = AnimateParam(duration: 800, curve: Curve.Smooth, delay: 0, iterations: 1, playMode: PlayMode.Alternate, onFinish: { => AppLog.info("onfinish") }, expectedFrameRateRange: ExpectedFrameRateRange(min: 20, max: 120, expected: 90))
/* 956.102 */    
/* 956.103 */    
/* 956.104 */    private func WhiteAttackCheck(p: Int64): Float64 {
/* 956.105 */        if((step_W == 0 && this.animateFlag) || step_W > 0) {
/* 956.106 */            return 1.0
/* 956.107 */        }
/* 956.108 */        else {
/* 956.109 */            return 0.0
/* 956.110 */        }
/* 956.111 */    }
/* 956.112 */    
/* 956.113 */    
/* 956.114 */    private func BlackAttackCheck(p: Int64): Float64 {
/* 956.115 */        if((step_B == 0 && this.animateFlag) || step_B > 0) {
/* 956.116 */            return 1.0
/* 956.117 */        }
/* 956.118 */        else {
/* 956.119 */            return 0.0
/* 956.120 */        }
/* 956.121 */    }
/* 956.122 */    
/* 956.123 */    
/* 956.124 */    private func getPosX(x: Int64, player: Int64) {
/* 956.125 */        let m: Random = Random()
/* 956.126 */        if(! this.animateFlag) {
/* 956.127 */            return x * 40 + 85
/* 956.128 */        }
/* 956.129 */        else {
/* 956.130 */            if(player == 1 && step_W == 1) {
/* 956.131 */                return 0 + m.nextInt64(40)
/* 956.132 */            }
/* 956.133 */            else if(player == - 1 && step_B == 1) {
/* 956.134 */                return 450 + m.nextInt64(40)
/* 956.135 */            }
/* 956.136 */            else if(step_B == 2 && step_W == 2) {
/* 956.137 */                return 225
/* 956.138 */            }
/* 956.139 */            else if(step_B == 3 && step_W == 3) {
/* 956.140 */                if(player == 1) {
/* 956.141 */                    return 500
/* 956.142 */                }
/* 956.143 */                else {
/* 956.144 */                    return 0
/* 956.145 */                }
/* 956.146 */            }
/* 956.147 */            else {
/* 956.148 */                return x * 40 + 85
/* 956.149 */            }
/* 956.150 */        }
/* 956.151 */    }
/* 956.152 */    
/* 956.153 */    
/* 956.154 */    private func getPosY(x: Int64, y: Int64, player: Int64) {
/* 956.155 */        let m: Random = Random()
/* 956.156 */        if(! this.animateFlag) {
/* 956.157 */            return y * 40 + 15
/* 956.158 */        }
/* 956.159 */        else {
/* 956.160 */            if(player == 1 && step_W == 1) {
/* 956.161 */                for(i in 0 .. wp.size) {
/* 956.162 */                    if(wp[i][0] == y && wp[i][1] == x) {
/* 956.163 */                        return(50 + 350 / wp.size * i)
/* 956.164 */                    }
/* 956.165 */                }
/* 956.166 */                return(50 + 350 + m.nextInt64(10))
/* 956.167 */            }
/* 956.168 */            else if(player == - 1 && step_B == 1) {
/* 956.169 */                for(i in 0 .. bp.size) {
/* 956.170 */                    if(bp[i][0] == y && bp[i][1] == x) {
/* 956.171 */                        return(50 + 350 / bp.size * i)
/* 956.172 */                    }
/* 956.173 */                }
/* 956.174 */                return(50 + 350 + m.nextInt64(10))
/* 956.175 */            }
/* 956.176 */            else if(step_B == 2 && step_W == 2) {
/* 956.177 */                if(wp.size == 0 || bp.size == 0) {
/* 956.178 */                    if(bp.size == 0) {
/* 956.179 */                        for(i in 0 .. wp.size) {
/* 956.180 */                            if(wp[i][0] == y && wp[i][1] == x) {
/* 956.181 */                                return(50 + 350 / this.Maxsize *(i + this.Minsize))
/* 956.182 */                            }
/* 956.183 */                        }
/* 956.184 */                    }
/* 956.185 */                    else {
/* 956.186 */                        for(i in 0 .. bp.size) {
/* 956.187 */                            if(bp[i][0] == y && bp[i][1] == x) {
/* 956.188 */                                return(50 + 350 / this.Maxsize *(i + this.Minsize))
/* 956.189 */                            }
/* 956.190 */                        }
/* 956.191 */                    }
/* 956.192 */                }
/* 956.193 */                else {
/* 956.194 */                    var min_size = 0
/* 956.195 */                    var max_size = 0
/* 956.196 */                    if(wp.size > bp.size) {
/* 956.197 */                        min_size = bp.size
/* 956.198 */                        max_size = wp.size
/* 956.199 */                    }
/* 956.200 */                    else {
/* 956.201 */                        min_size = wp.size
/* 956.202 */                        max_size = bp.size
/* 956.203 */                    }
/* 956.204 */                    if(this.Minsize == 0 || this.Maxsize == 0) {
/* 956.205 */                        this.Minsize = min_size
/* 956.206 */                        this.Maxsize = max_size
/* 956.207 */                    }
/* 956.208 */                    for(i in 0 .. min_size) {
/* 956.209 */                        if(player == 1) {
/* 956.210 */                            if(wp[i][0] == y && wp[i][1] == x) {
/* 956.211 */                                return((50 + 350 / wp.size * i + 50 + 350 / bp.size * i) / 2)
/* 956.212 */                            }
/* 956.213 */                        }
/* 956.214 */                        else {
/* 956.215 */                            if(bp[i][0] == y && bp[i][1] == x) {
/* 956.216 */                                return((50 + 350 / wp.size * i + 50 + 350 / bp.size * i) / 2)
/* 956.217 */                            }
/* 956.218 */                        }
/* 956.219 */                    }
/* 956.220 */                    for(i in min_size .. max_size) {
/* 956.221 */                        if(max_size == wp.size) {
/* 956.222 */                            if(wp[i][0] == y && wp[i][1] == x) {
/* 956.223 */                                return(50 + 350 / wp.size * i)
/* 956.224 */                            }
/* 956.225 */                        }
/* 956.226 */                        else {
/* 956.227 */                            if(bp[i][0] == y && bp[i][1] == x) {
/* 956.228 */                                return(50 + 350 / bp.size * i)
/* 956.229 */                            }
/* 956.230 */                        }
/* 956.231 */                    }
/* 956.232 */                }
/* 956.233 */                return y * 40 + 15
/* 956.234 */            }
/* 956.235 */            else if(step_B == 3 && step_W == 3) {
/* 956.236 */                return 130
/* 956.237 */            }
/* 956.238 */            else {
/* 956.239 */                return y * 40 + 15
/* 956.240 */            }
/* 956.241 */        }
/* 956.242 */    }
/* 956.243 */    
/* 956.244 */    
/* 956.245 */    
/* 956.246 */    public func build() {
/* 956.247 */        
/* 956.248 */        this.observeComponentCreation({ elmtId, isInitialRender =>
/* 956.249 */            Stack { this.observeComponentCreation({ elmtId, isInitialRender => ForEach { let forEachItemGenFunction = { entity: Array < Int64 >, index: Int64 => this.observeComponentCreation({ elmtId, isInitialRender => Image(__GenerateResource__("", "", "", app.media.white_Chess, "app.media.white_Chess",[], 20000)).height(30.0).width(30.0).opacity(WhiteAttackCheck(index)).position(x: getPosX(entity[1], 1), y: getPosY(entity[1], entity[0], 1)).onAppear({ => if(this.animateFlag && ! unopposed) {
/* 956.250 */                animateTo(AnimateParam(duration: 600, curve: Curve.EaseOut, delay: 0, iterations: 1, playMode: PlayMode.Alternate, onFinish: { => animateTo(AnimateParam(duration: 400, curve: Curve.EaseIn, delay: 0, iterations: 1, playMode: PlayMode.Alternate, onFinish: { => animateTo(AnimateParam(duration: 100, curve: Curve.Smooth, delay: 0, iterations: 1, playMode: PlayMode.Alternate, onFinish: { => if(this.wp.size == this.bp.size) {
/* 956.251 */                    this.step_B = 0
/* 956.252 */                    this.step_W = 0
/* 956.253 */                    this.animateFlag = false
/* 956.254 */                    this.Minsize = 0
/* 956.255 */                    this.Maxsize = 0
/* 956.256 */                }
/* 956.257 */                else {
/* 956.258 */                    animateTo(AnimateParam(duration: 400, curve: Curve.EaseIn, delay: 0, iterations: 1, playMode: PlayMode.Alternate, onFinish: { => this.step_B = 0
/* 956.259 */                        this.step_W = 0
/* 956.260 */                        this.animateFlag = false
/* 956.261 */                        this.wp = ObservedArrayList(ArrayList())
/* 956.262 */                        this.bp = ObservedArrayList(ArrayList())
/* 956.263 */                        this.Minsize = 0
/* 956.264 */                        this.Maxsize = 0
/* 956.265 */                    this.onHit = true }, expectedFrameRateRange: ExpectedFrameRateRange(min: 20, max: 120, expected: 90)), { => this.step_B = 3
/* 956.266 */                    this.step_W = 3 })
/* 956.267 */                }
/* 956.268 */            }, expectedFrameRateRange: ExpectedFrameRateRange(min: 20, max: 120, expected: 90)), { => if(this.step_B == 2 && this.step_W == 2) {
/* 956.269 */                if(this.wp.size > this.bp.size) {
/* 956.270 */                    var temp: ObservedArrayList < Array < Int64 >>= ObservedArrayList(ArrayList())
/* 956.271 */                    for(i in(this.bp.size) ..(this.wp.size)) {
/* 956.272 */                        temp.append(this.wp[i])
/* 956.273 */                    }
/* 956.274 */                    this.wp = temp
/* 956.275 */                    this.bp = ObservedArrayList(ArrayList())
/* 956.276 */                }
/* 956.277 */                else {
/* 956.278 */                    var temp: ObservedArrayList < Array < Int64 >>= ObservedArrayList(ArrayList())
/* 956.279 */                    for(i in(this.wp.size) ..(this.bp.size)) {
/* 956.280 */                        temp.append(this.bp[i])
/* 956.281 */                    }
/* 956.282 */                    this.bp = temp
/* 956.283 */                    this.wp = ObservedArrayList(ArrayList())
/* 956.284 */                }
/* 956.285 */            }
/* 956.286 */        }) }, expectedFrameRateRange: ExpectedFrameRateRange(min: 20, max: 120, expected: 90)), { => this.step_B = 2
/* 956.287 */        this.step_W = 2 }) }, expectedFrameRateRange: ExpectedFrameRateRange(min: 20, max: 120, expected: 90)), { => if(this.animateFlag && this.step_W < 1) {
/* 956.288 */            this.step_W = 1
/* 956.289 */            if(this.step_B == 0) {
/* 956.290 */                this.step_B = 1
/* 956.291 */            }
/* 956.292 */        }
/* 956.293 */    })
/* 956.294 */}
/* 956.295 */else if(this.animateFlag && unopposed) {
/* 956.296 */    animateTo(AnimateParam(duration: 600, curve: Curve.EaseOut, delay: 0, iterations: 1, playMode: PlayMode.Alternate, onFinish: { => animateTo(AnimateParam(duration: 400, curve: Curve.EaseIn, delay: 0, iterations: 1, playMode: PlayMode.Alternate, onFinish: { => this.step_B = 0
/* 956.297 */        this.step_W = 0
/* 956.298 */        this.animateFlag = false
/* 956.299 */        this.wp = ObservedArrayList(ArrayList())
/* 956.300 */        this.bp = ObservedArrayList(ArrayList())
/* 956.301 */        this.Minsize = 0
/* 956.302 */        this.Maxsize = 0
/* 956.303 */    this.onHit = true }, expectedFrameRateRange: ExpectedFrameRateRange(min: 20, max: 120, expected: 90)), { => this.step_W = 3
/* 956.304 */    this.step_B = 3 }) }, expectedFrameRateRange: ExpectedFrameRateRange(min: 20, max: 120, expected: 90)), { => this.step_W = 1
/* 956.305 */    this.step_B = 1 })
/* 956.306 */}
/* 956.307 */}) }) }
/* 956.308 */
/* 956.309 */this.forEachUpdateFunction(elmtId, wp, itemGenFunc: forEachItemGenFunction) } })
/* 956.310 */this.observeComponentCreation({ elmtId, isInitialRender => ForEach { let forEachItemGenFunction = { entity: Array < Int64 >, index: Int64 => this.observeComponentCreation({ elmtId, isInitialRender => Image(__GenerateResource__("", "", "", app.media.black_Chess, "app.media.black_Chess",[], 20000)).height(30.0).width(30.0).opacity(BlackAttackCheck(index)).position(x: getPosX(entity[1], - 1), y: getPosY(entity[1], entity[0], - 1)).onAppear({ => if(this.animateFlag && ! unopposed) {
/* 956.311 */animateTo(AnimateParam(duration: 600, curve: Curve.EaseOut, delay: 0, iterations: 1, playMode: PlayMode.Alternate, onFinish: { => animateTo(AnimateParam(duration: 400, curve: Curve.EaseIn, delay: 0, iterations: 1, playMode: PlayMode.Alternate, onFinish: { => animateTo(AnimateParam(duration: 100, curve: Curve.Smooth, delay: 0, iterations: 1, playMode: PlayMode.Alternate, onFinish: { => if(this.wp.size == this.bp.size) {
/* 956.312 */this.step_B = 0
/* 956.313 */this.step_W = 0
/* 956.314 */this.animateFlag = false
/* 956.315 */this.Minsize = 0
/* 956.316 */this.Maxsize = 0
/* 956.317 */}
/* 956.318 */else {
/* 956.319 */animateTo(AnimateParam(duration: 400, curve: Curve.EaseIn, delay: 0, iterations: 1, playMode: PlayMode.Alternate, onFinish: { => this.step_B = 0
/* 956.320 */    this.step_W = 0
/* 956.321 */    this.animateFlag = false
/* 956.322 */    this.wp = ObservedArrayList(ArrayList())
/* 956.323 */    this.bp = ObservedArrayList(ArrayList())
/* 956.324 */    this.Minsize = 0
/* 956.325 */    this.Maxsize = 0
/* 956.326 */this.onHit = true }, expectedFrameRateRange: ExpectedFrameRateRange(min: 20, max: 120, expected: 90)), { => this.step_B = 3
/* 956.327 */this.step_W = 3 })
/* 956.328 */}
/* 956.329 */}, expectedFrameRateRange: ExpectedFrameRateRange(min: 20, max: 120, expected: 90)), { => if(this.step_B == 2 && this.step_W == 2) {
/* 956.330 */if(this.wp.size > this.bp.size) {
/* 956.331 */var temp: ObservedArrayList < Array < Int64 >>= ObservedArrayList(ArrayList())
/* 956.332 */for(i in(this.bp.size) ..(this.wp.size)) {
/* 956.333 */    temp.append(this.wp[i])
/* 956.334 */}
/* 956.335 */this.wp = temp
/* 956.336 */this.bp = ObservedArrayList(ArrayList())
/* 956.337 */}
/* 956.338 */else {
/* 956.339 */var temp: ObservedArrayList < Array < Int64 >>= ObservedArrayList(ArrayList())
/* 956.340 */for(i in(this.wp.size) ..(this.bp.size)) {
/* 956.341 */    temp.append(this.bp[i])
/* 956.342 */}
/* 956.343 */this.bp = temp
/* 956.344 */this.wp = ObservedArrayList(ArrayList())
/* 956.345 */}
/* 956.346 */}
/* 956.347 */}) }, expectedFrameRateRange: ExpectedFrameRateRange(min: 20, max: 120, expected: 90)), { => this.step_B = 2
/* 956.348 */this.step_W = 2 }) }, expectedFrameRateRange: ExpectedFrameRateRange(min: 20, max: 120, expected: 90)), { => if(this.animateFlag && this.step_B < 1) {
/* 956.349 */this.step_B = 1
/* 956.350 */if(this.step_W == 0) {
/* 956.351 */this.step_W = 1
/* 956.352 */}
/* 956.353 */}
/* 956.354 */})
/* 956.355 */}
/* 956.356 */else if(this.animateFlag && unopposed) {
/* 956.357 */animateTo(AnimateParam(duration: 600, curve: Curve.EaseOut, delay: 0, iterations: 1, playMode: PlayMode.Alternate, onFinish: { => animateTo(AnimateParam(duration: 800, curve: Curve.Smooth, delay: 0, iterations: 1, playMode: PlayMode.Alternate, onFinish: { => this.step_B = 0
/* 956.358 */this.step_W = 0
/* 956.359 */this.animateFlag = false
/* 956.360 */this.wp = ObservedArrayList(ArrayList())
/* 956.361 */this.bp = ObservedArrayList(ArrayList())
/* 956.362 */this.Minsize = 0
/* 956.363 */this.Maxsize = 0
/* 956.364 */this.onHit = true }, expectedFrameRateRange: ExpectedFrameRateRange(min: 20, max: 120, expected: 90)), { => this.step_W = 3
/* 956.365 */this.step_B = 3 }) }, expectedFrameRateRange: ExpectedFrameRateRange(min: 20, max: 120, expected: 90)), { => this.step_W = 1
/* 956.366 */this.step_B = 1 })
/* 956.367 */}
/* 956.368 */}) }) }
/* 956.369 */
/* 956.370 */this.forEachUpdateFunction(elmtId, bp, itemGenFunc: forEachItemGenFunction) } }) }.position(x: 0, y: 0).height(800).width(500)
/* 956.371 */})
/* 956.372 */
/* 956.373 */()
/* 956.374 */
/* 956.375 */}
/* 956.376 */
/* 956.377 */
/* 956.378 */public init(parent: Option < CustomView >, wp!: ObservedProperty < ObservedArrayList < Array < Int64 >>>, bp!: ObservedProperty < ObservedArrayList < Array < Int64 >>>, step_W!: Option < ObservedProperty < Int64 >>= None, step_B!: Option < ObservedProperty < Int64 >>= None, animateFlag!: ObservedProperty < Bool >, unopposed!: ObservedProperty < Bool >, onHit!: ObservedProperty < Bool >, Minsize!: Option < ObservedProperty < Int64 >>= None, Maxsize!: Option < ObservedProperty < Int64 >>= None, localStorage!: Option < LocalStorage >= None) {
/* 956.379 */super(parent, localStorage)
/* 956.380 */
/* 956.381 */
/* 956.382 */this.stateVarDecl_wp_ = wp
/* 956.383 */
/* 956.384 */this.stateVarDecl_bp_ = bp
/* 956.385 */
/* 956.386 */match(step_W) {
/* 956.387 */case Some(v) => this.stateVarDecl_step_W_ = ObservedProperty < Int64 >("stateVarDecl_step_W_", v.get())
/* 956.388 */case _ =>()
/* 956.389 */}
/* 956.390 */
/* 956.391 */match(step_B) {
/* 956.392 */case Some(v) => this.stateVarDecl_step_B_ = ObservedProperty < Int64 >("stateVarDecl_step_B_", v.get())
/* 956.393 */case _ =>()
/* 956.394 */}
/* 956.395 */
/* 956.396 */this.stateVarDecl_animateFlag_ = animateFlag
/* 956.397 */
/* 956.398 */this.stateVarDecl_unopposed_ = unopposed
/* 956.399 */
/* 956.400 */this.stateVarDecl_onHit_ = onHit
/* 956.401 */
/* 956.402 */match(Minsize) {
/* 956.403 */case Some(v) => this.Minsize = v.get()
/* 956.404 */case _ =>()
/* 956.405 */}
/* 956.406 */
/* 956.407 */match(Maxsize) {
/* 956.408 */case Some(v) => this.Maxsize = v.get()
/* 956.409 */case _ =>()
/* 956.410 */}
/* 956.411 */
/* 956.412 */
/* 956.413 */this.stateVarDecl_wp_.subscribeEx(this)
/* 956.414 */
/* 956.415 */this.stateVarDecl_bp_.subscribeEx(this)
/* 956.416 */
/* 956.417 */this.stateVarDecl_step_W_.subscribeEx(this)
/* 956.418 */
/* 956.419 */this.stateVarDecl_step_B_.subscribeEx(this)
/* 956.420 */
/* 956.421 */this.stateVarDecl_animateFlag_.subscribeEx(this)
/* 956.422 */
/* 956.423 */this.stateVarDecl_unopposed_.subscribeEx(this)
/* 956.424 */
/* 956.425 */this.stateVarDecl_onHit_.subscribeEx(this)
/* 956.426 */
/* 956.427 */SubscriberManager.getInstance().add(this)
/* 956.428 */
/* 956.429 */
/* 956.430 */registerSelf()
/* 956.431 */parent?.addChildById(id(), this)
/* 956.432 */}
/* 956.433 */
/* 956.434 */
/* 956.435 */public override func aboutToBeDeleted() {
/* 956.436 */
/* 956.437 */this.stateVarDecl_wp_.unsubscribeEx(this)
/* 956.438 */
/* 956.439 */this.stateVarDecl_bp_.unsubscribeEx(this)
/* 956.440 */
/* 956.441 */this.stateVarDecl_step_W_.unsubscribeEx(this)
/* 956.442 */
/* 956.443 */this.stateVarDecl_step_B_.unsubscribeEx(this)
/* 956.444 */
/* 956.445 */this.stateVarDecl_animateFlag_.unsubscribeEx(this)
/* 956.446 */
/* 956.447 */this.stateVarDecl_unopposed_.unsubscribeEx(this)
/* 956.448 */
/* 956.449 */this.stateVarDecl_onHit_.unsubscribeEx(this)
/* 956.450 */
/* 956.451 */SubscriberManager.getInstance().delete(this)
/* 956.452 */this.aboutToBeDeletedInternal()
/* 956.453 */}
/* 956.454 */
/* 956.455 */
/* 956.456 */func updateWithValueParams(wp!: Option < ObservedArrayList < Array < Int64 >>>= Option < ObservedArrayList < Array < Int64 >>>.None, bp!: Option < ObservedArrayList < Array < Int64 >>>= Option < ObservedArrayList < Array < Int64 >>>.None, step_W!: Option < Int64 >= Option < Int64 >.None, step_B!: Option < Int64 >= Option < Int64 >.None, animateFlag!: Option < Bool >= Option < Bool >.None, unopposed!: Option < Bool >= Option < Bool >.None, onHit!: Option < Bool >= Option < Bool >.None, Minsize!: Option < Int64 >= Option < Int64 >.None, Maxsize!: Option < Int64 >= Option < Int64 >.None): Unit {
/* 956.457 */
/* 956.458 */match(step_W) {
/* 956.459 */case Some(v) => this.step_W = v
/* 956.460 */case _ =>()
/* 956.461 */}
/* 956.462 */
/* 956.463 */match(step_B) {
/* 956.464 */case Some(v) => this.step_B = v
/* 956.465 */case _ =>()
/* 956.466 */}
/* 956.467 */
/* 956.468 */}
/* 956.469 */
/* 956.470 */
/* 956.471 */public func rerender() {
/* 956.472 */this.updateDirtyElements()
/* 956.473 */}
/* 956.474 */
/* 956.475 */
/* 956.476 */public func purgeVariableDependenciesOnElmtId(rmElmtId: Int64) {
/* 956.477 */
/* 956.478 */this.stateVarDecl_wp_.purgeDependencyOnElmtId(rmElmtId)
/* 956.479 */
/* 956.480 */this.stateVarDecl_bp_.purgeDependencyOnElmtId(rmElmtId)
/* 956.481 */
/* 956.482 */this.stateVarDecl_step_W_.purgeDependencyOnElmtId(rmElmtId)
/* 956.483 */
/* 956.484 */this.stateVarDecl_step_B_.purgeDependencyOnElmtId(rmElmtId)
/* 956.485 */
/* 956.486 */this.stateVarDecl_animateFlag_.purgeDependencyOnElmtId(rmElmtId)
/* 956.487 */
/* 956.488 */this.stateVarDecl_unopposed_.purgeDependencyOnElmtId(rmElmtId)
/* 956.489 */
/* 956.490 */this.stateVarDecl_onHit_.purgeDependencyOnElmtId(rmElmtId)
/* 956.491 */
/* 956.492 */}
/* 956.493 */
/* 956.494 */
/* 956.495 */public func forceRerender(deep!: Bool = false) {
/* 956.496 */this.forceCompleteRerender(deep)
/* 956.497 */}
/* 956.498 */
/* 956.499 */
/* 956.500 */}
/* 956.501 */
/* ===== End of the Emit ===== */