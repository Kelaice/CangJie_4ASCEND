package ohos_app_cangjie_entry.game_body

import ohos.base.*
import ohos.component.*
import ohos.state_manage.*
import ohos.state_macro_manage.*
import cj_res_entry.*
import std.sync.*
import ohos.font.*
import std.time.*
import std.collection.ArrayList
import std.random.Random

type ObservedMatrix = ObservedArray<Int64>

type OpacityMatrix = ObservedArray<Float64>

//棋盘绘制组件
/* ===== Emitted by MacroCall @Component in draw.cj:19:1 ===== */
/* 19.1 */public class chessGrid <: CustomView {
/* 19.2 */    
/* 19.3 */    
/* 19.4 */    private var stateVarDecl_opc_: ObservedProperty < Float64 >= ObservedProperty < Float64 >("stateVarDecl_opc_", 0.0)
/* 19.5 */    
/* 19.6 */    
/* 19.7 */    private mut prop opc: Float64 {
/* 19.8 */        get() {
/* 19.9 */            return this.stateVarDecl_opc_.get()
/* 19.10 */        }
/* 19.11 */        set(v) {
/* 19.12 */            this.stateVarDecl_opc_.set(v)
/* 19.13 */        }
/* 19.14 */    }
/* 19.15 */    
/* 19.16 */    
/* 19.17 */    
/* 19.18 */    public func build() {
/* 19.19 */        
/* 19.20 */        this.observeComponentCreation({ elmtId, isInitialRender =>
/* 19.21 */            Grid { this.observeComponentCreation({ elmtId, isInitialRender => ForEach { let forEachItemGenFunction = { entity: Int64, index: Int64 => this.observeComponentCreation({ elmtId, isInitialRender => GridItem { this.observeComponentCreation({ elmtId, isInitialRender => Image(__GenerateResource__("", "", "", app.media.chessGridItem, "app.media.chessGridItem",[], 20000)) }) } }) }
/* 19.22 */            
/* 19.23 */            this.forEachUpdateFunction(elmtId, Array < Int64 >(81, { _ => 0 }), itemGenFunc: forEachItemGenFunction) } }) }.rowsTemplate("1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr ").columnsTemplate("1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr ").height(360).width(360).position(x: 249, y: 10).opacity(opc).onAppear({ => animateTo(AnimateParam(duration: 300, curve: Curve.Linear, delay: 0, iterations: 1, playMode: PlayMode.Alternate, onFinish: { => }, expectedFrameRateRange: ExpectedFrameRateRange(min: 20, max: 120, expected: 90)), { => opc = 1.0 }) })
/* 19.24 */        })
/* 19.25 */        
/* 19.26 */        ()
/* 19.27 */        
/* 19.28 */    }
/* 19.29 */    
/* 19.30 */    
/* 19.31 */    public init(parent: Option < CustomView >, opc!: Option < ObservedProperty < Float64 >>= None, localStorage!: Option < LocalStorage >= None) {
/* 19.32 */        super(parent, localStorage)
/* 19.33 */        
/* 19.34 */        
/* 19.35 */        match(opc) {
/* 19.36 */            case Some(v) => this.stateVarDecl_opc_ = ObservedProperty < Float64 >("stateVarDecl_opc_", v.get())
/* 19.37 */            case _ =>()
/* 19.38 */        }
/* 19.39 */        
/* 19.40 */        
/* 19.41 */        this.stateVarDecl_opc_.subscribeEx(this)
/* 19.42 */        
/* 19.43 */        SubscriberManager.getInstance().add(this)
/* 19.44 */        
/* 19.45 */        
/* 19.46 */        registerSelf()
/* 19.47 */        parent?.addChildById(id(), this)
/* 19.48 */    }
/* 19.49 */    
/* 19.50 */    
/* 19.51 */    public override func aboutToBeDeleted() {
/* 19.52 */        
/* 19.53 */        this.stateVarDecl_opc_.unsubscribeEx(this)
/* 19.54 */        
/* 19.55 */        SubscriberManager.getInstance().delete(this)
/* 19.56 */        this.aboutToBeDeletedInternal()
/* 19.57 */    }
/* 19.58 */    
/* 19.59 */    
/* 19.60 */    func updateWithValueParams(opc!: Option < Float64 >= Option < Float64 >.None): Unit {
/* 19.61 */        
/* 19.62 */        match(opc) {
/* 19.63 */            case Some(v) => this.opc = v
/* 19.64 */            case _ =>()
/* 19.65 */        }
/* 19.66 */        
/* 19.67 */    }
/* 19.68 */    
/* 19.69 */    
/* 19.70 */    public func rerender() {
/* 19.71 */        this.updateDirtyElements()
/* 19.72 */    }
/* 19.73 */    
/* 19.74 */    
/* 19.75 */    public func purgeVariableDependenciesOnElmtId(rmElmtId: Int64) {
/* 19.76 */        
/* 19.77 */        this.stateVarDecl_opc_.purgeDependencyOnElmtId(rmElmtId)
/* 19.78 */        
/* 19.79 */    }
/* 19.80 */    
/* 19.81 */    
/* 19.82 */    public func forceRerender(deep!: Bool = false) {
/* 19.83 */        this.forceCompleteRerender(deep)
/* 19.84 */    }
/* 19.85 */    
/* 19.86 */    
/* 19.87 */}
/* 19.88 */
/* ===== End of the Emit ===== */

/* ===== Emitted by MacroCall @Component in draw.cj:67:1 ===== */
/* 67.1 */public class testboard <: CustomView {
/* 67.2 */    
/* 67.3 */    
/* 67.4 */    private var stateVarDecl_data_: ObservedProperty < ObservedMatrix >
/* 67.5 */    
/* 67.6 */    
/* 67.7 */    private mut prop data: ObservedMatrix {
/* 67.8 */        get() {
/* 67.9 */            return this.stateVarDecl_data_.get()
/* 67.10 */        }
/* 67.11 */        set(v) {
/* 67.12 */            this.stateVarDecl_data_.set(v)
/* 67.13 */        }
/* 67.14 */    }
/* 67.15 */    
/* 67.16 */    
/* 67.17 */    private var stateVarDecl_game_: ObservedProperty < FourAscendGame >
/* 67.18 */    
/* 67.19 */    
/* 67.20 */    private mut prop game: FourAscendGame {
/* 67.21 */        get() {
/* 67.22 */            return this.stateVarDecl_game_.get()
/* 67.23 */        }
/* 67.24 */        set(v) {
/* 67.25 */            this.stateVarDecl_game_.set(v)
/* 67.26 */        }
/* 67.27 */    }
/* 67.28 */    
/* 67.29 */    
/* 67.30 */    private var stateVarDecl_game_state_: ObservedProperty < Board >
/* 67.31 */    
/* 67.32 */    
/* 67.33 */    private mut prop game_state: Board {
/* 67.34 */        get() {
/* 67.35 */            return this.stateVarDecl_game_state_.get()
/* 67.36 */        }
/* 67.37 */        set(v) {
/* 67.38 */            this.stateVarDecl_game_state_.set(v)
/* 67.39 */        }
/* 67.40 */    }
/* 67.41 */    
/* 67.42 */    
/* 67.43 */    private var stateVarDecl_player_: ObservedProperty < Int64 >
/* 67.44 */    
/* 67.45 */    
/* 67.46 */    private mut prop player: Int64 {
/* 67.47 */        get() {
/* 67.48 */            return this.stateVarDecl_player_.get()
/* 67.49 */        }
/* 67.50 */        set(v) {
/* 67.51 */            this.stateVarDecl_player_.set(v)
/* 67.52 */        }
/* 67.53 */    }
/* 67.54 */    
/* 67.55 */    
/* 67.56 */    private var stateVarDecl_step_: ObservedProperty < Int64 >
/* 67.57 */    
/* 67.58 */    
/* 67.59 */    private mut prop step: Int64 {
/* 67.60 */        get() {
/* 67.61 */            return this.stateVarDecl_step_.get()
/* 67.62 */        }
/* 67.63 */        set(v) {
/* 67.64 */            this.stateVarDecl_step_.set(v)
/* 67.65 */        }
/* 67.66 */    }
/* 67.67 */    
/* 67.68 */    
/* 67.69 */    private var stateVarDecl_AI_: ObservedProperty < StupidFourAscendPlayer >
/* 67.70 */    
/* 67.71 */    
/* 67.72 */    private mut prop AI: StupidFourAscendPlayer {
/* 67.73 */        get() {
/* 67.74 */            return this.stateVarDecl_AI_.get()
/* 67.75 */        }
/* 67.76 */        set(v) {
/* 67.77 */            this.stateVarDecl_AI_.set(v)
/* 67.78 */        }
/* 67.79 */    }
/* 67.80 */    
/* 67.81 */    
/* 67.82 */    private var stateVarDecl_opacityArray_: ObservedProperty < OpacityMatrix >
/* 67.83 */    
/* 67.84 */    
/* 67.85 */    private mut prop opacityArray: OpacityMatrix {
/* 67.86 */        get() {
/* 67.87 */            return this.stateVarDecl_opacityArray_.get()
/* 67.88 */        }
/* 67.89 */        set(v) {
/* 67.90 */            this.stateVarDecl_opacityArray_.set(v)
/* 67.91 */        }
/* 67.92 */    }
/* 67.93 */    
/* 67.94 */    
/* 67.95 */    private var stateVarDecl_wp_: ObservedProperty < ObservedArrayList < Array < Int64 >>>
/* 67.96 */    
/* 67.97 */    
/* 67.98 */    private mut prop wp: ObservedArrayList < Array < Int64 >> {
/* 67.99 */        get() {
/* 67.100 */            return this.stateVarDecl_wp_.get()
/* 67.101 */        }
/* 67.102 */        set(v) {
/* 67.103 */            this.stateVarDecl_wp_.set(v)
/* 67.104 */        }
/* 67.105 */    }
/* 67.106 */    
/* 67.107 */    
/* 67.108 */    private var stateVarDecl_bp_: ObservedProperty < ObservedArrayList < Array < Int64 >>>
/* 67.109 */    
/* 67.110 */    
/* 67.111 */    private mut prop bp: ObservedArrayList < Array < Int64 >> {
/* 67.112 */        get() {
/* 67.113 */            return this.stateVarDecl_bp_.get()
/* 67.114 */        }
/* 67.115 */        set(v) {
/* 67.116 */            this.stateVarDecl_bp_.set(v)
/* 67.117 */        }
/* 67.118 */    }
/* 67.119 */    
/* 67.120 */    
/* 67.121 */    private var stateVarDecl_animateFlag_: ObservedProperty < Bool >
/* 67.122 */    
/* 67.123 */    
/* 67.124 */    private mut prop animateFlag: Bool {
/* 67.125 */        get() {
/* 67.126 */            return this.stateVarDecl_animateFlag_.get()
/* 67.127 */        }
/* 67.128 */        set(v) {
/* 67.129 */            this.stateVarDecl_animateFlag_.set(v)
/* 67.130 */        }
/* 67.131 */    }
/* 67.132 */    
/* 67.133 */    
/* 67.134 */    private var stateVarDecl_unopposed_: ObservedProperty < Bool >
/* 67.135 */    
/* 67.136 */    
/* 67.137 */    private mut prop unopposed: Bool {
/* 67.138 */        get() {
/* 67.139 */            return this.stateVarDecl_unopposed_.get()
/* 67.140 */        }
/* 67.141 */        set(v) {
/* 67.142 */            this.stateVarDecl_unopposed_.set(v)
/* 67.143 */        }
/* 67.144 */    }
/* 67.145 */    
/* 67.146 */    
/* 67.147 */    let animateOpt = AnimateParam(duration: 600, curve: Curve.Smooth, delay: 0, iterations: - 1, playMode: PlayMode.Alternate, onFinish: { => AppLog.info("onfinish") }, expectedFrameRateRange: ExpectedFrameRateRange(min: 20, max: 120, expected: 90))
/* 67.148 */    
/* 67.149 */    
/* 67.150 */    private func changeOpacity(ascend_state: Array < Array < Int64 >>) {
/* 67.151 */        for(i in 0 .. 9) {
/* 67.152 */            for(j in 0 .. 9) {
/* 67.153 */                if(data[i * 9 + j] == 0 && this.game_state[2][i][j] == 1) {
/* 67.154 */                    this.opacityArray[i * 9 + j] = 0.8 - 0.5 * Float64(ascend_state[i][j])
/* 67.155 */                }
/* 67.156 */                else if(data[i * 9 + j] == 0 && this.game_state[2][i][j] == - 1) {
/* 67.157 */                    this.opacityArray[i * 9 + j] = 0.8 + 0.5 * Float64(ascend_state[i][j])
/* 67.158 */                }
/* 67.159 */            }
/* 67.160 */        }
/* 67.161 */    }
/* 67.162 */    
/* 67.163 */    
/* 67.164 */    private func JudgeAscendState() {
/* 67.165 */        for(i in 0 .. 9) {
/* 67.166 */            for(j in 0 .. 9) {
/* 67.167 */                if(data[i * 9 + j] == 0 && this.game_state[2][i][j] == 1) {
/* 67.168 */                    return false
/* 67.169 */                }
/* 67.170 */                else if(data[i * 9 + j] == 0 && this.game_state[2][i][j] == - 1) {
/* 67.171 */                    return false
/* 67.172 */                }
/* 67.173 */            }
/* 67.174 */        }
/* 67.175 */        return true
/* 67.176 */    }
/* 67.177 */    
/* 67.178 */    
/* 67.179 */    private func InitOpacitArray() {
/* 67.180 */        for(i in 0 .. 81) {
/* 67.181 */            this.opacityArray[i] = 0.8
/* 67.182 */        }
/* 67.183 */    }
/* 67.184 */    
/* 67.185 */    
/* 67.186 */    public func AddAscendChess() {
/* 67.187 */    }
/* 67.188 */    
/* 67.189 */    
/* 67.190 */    
/* 67.191 */    public func build() {
/* 67.192 */        
/* 67.193 */        this.observeComponentCreation({ elmtId, isInitialRender =>
/* 67.194 */            Stack { this.observeComponentCreation({ elmtId, isInitialRender => Grid { this.observeComponentCreation({ elmtId, isInitialRender => ForEach { let forEachItemGenFunction = { entity: Int64, index: Int64 => this.observeComponentCreation({ elmtId, isInitialRender => GridItem { this.observeComponentCreation({ elmtId, isInitialRender => If { if(data[index] == 1 && this.game_state[1][index / 9][index % 9] == 1) {
/* 67.195 */                this.ifElseBranchUpdateFunction(0, { => this.observeComponentCreation({ elmtId, isInitialRender => Image(__GenerateResource__("", "", "", app.media.White_Chess_Plant, "app.media.White_Chess_Plant",[], 20000)).height(30.0).width(30.0) }) })
/* 67.196 */            }
/* 67.197 */            else if(data[index] == 0 && this.game_state[1][index / 9][index % 9] == 1 && this.game_state[2][index / 9][index % 9] == 1) {
/* 67.198 */                this.ifElseBranchUpdateFunction(1, { => this.observeComponentCreation({ elmtId, isInitialRender => Image(__GenerateResource__("", "", "", app.media.White_Chess_Plant, "app.media.White_Chess_Plant",[], 20000)).animationStart(animateOpt).height(30.0).width(30.0).opacity(opacityArray[index]).onAppear({ => changeOpacity(this.game_state[2]) }).animationEnd() }) })
/* 67.199 */            }
/* 67.200 */            else if(data[index] == - 1 && this.game_state[1][index / 9][index % 9] == 1) {
/* 67.201 */                this.ifElseBranchUpdateFunction(2, { => this.observeComponentCreation({ elmtId, isInitialRender => Image(__GenerateResource__("", "", "", app.media.Black_Chess_Plant, "app.media.Black_Chess_Plant",[], 20000)).height(30.0).width(30.0) }) })
/* 67.202 */            }
/* 67.203 */            else if(data[index] == 0 && this.game_state[1][index / 9][index % 9] == 1 && this.game_state[2][index / 9][index % 9] == - 1) {
/* 67.204 */                this.ifElseBranchUpdateFunction(3, { => this.observeComponentCreation({ elmtId, isInitialRender => Image(__GenerateResource__("", "", "", app.media.Black_Chess_Plant, "app.media.Black_Chess_Plant",[], 20000)).animationStart(animateOpt).height(30.0).width(30.0).opacity(opacityArray[index]).onAppear({ => changeOpacity(this.game_state[2]) }).animationEnd() }) })
/* 67.205 */            }
/* 67.206 */            else if(data[index] == 1) {
/* 67.207 */                this.ifElseBranchUpdateFunction(4, { => this.observeComponentCreation({ elmtId, isInitialRender => Image(__GenerateResource__("", "", "", app.media.white_Chess, "app.media.white_Chess",[], 20000)).height(30.0).width(30.0) }) })
/* 67.208 */            }
/* 67.209 */            else if(data[index] == 0 && this.game_state[2][index / 9][index % 9] == 1) {
/* 67.210 */                this.ifElseBranchUpdateFunction(5, { => this.observeComponentCreation({ elmtId, isInitialRender => Image(__GenerateResource__("", "", "", app.media.white_Chess, "app.media.white_Chess",[], 20000)).animationStart(animateOpt).height(30.0).width(30.0).opacity(opacityArray[index]).onAppear({ => changeOpacity(this.game_state[2]) }).animationEnd() }) })
/* 67.211 */            }
/* 67.212 */            else if(data[index] == - 1) {
/* 67.213 */                this.ifElseBranchUpdateFunction(6, { => this.observeComponentCreation({ elmtId, isInitialRender => Image(__GenerateResource__("", "", "", app.media.black_Chess, "app.media.black_Chess",[], 20000)).height(30.0).width(30.0) }) })
/* 67.214 */            }
/* 67.215 */            else if(data[index] == 0 && this.game_state[2][index / 9][index % 9] == - 1) {
/* 67.216 */                this.ifElseBranchUpdateFunction(7, { => this.observeComponentCreation({ elmtId, isInitialRender => Image(__GenerateResource__("", "", "", app.media.black_Chess, "app.media.black_Chess",[], 20000)).animationStart(animateOpt).height(30.0).width(30.0).opacity(opacityArray[index]).onAppear({ => changeOpacity(this.game_state[2]) }).animationEnd() }) })
/* 67.217 */            }
/* 67.218 */            else {
/* 67.219 */                If.branchId(8)
/* 67.220 */            }
/* 67.221 */        } })
/* 67.222 */        this.observeComponentCreation({ elmtId, isInitialRender => If { if(game_state[1][index / 9][index % 9] == 1 && data[index] == 0 && game_state[2][index / 9][index % 9] == 0) {
/* 67.223 */            this.ifElseBranchUpdateFunction(0, { => this.observeComponentCreation({ elmtId, isInitialRender => Rect(width: 10, height: 10).foregroundColor(0xf7e200) }) })
/* 67.224 */        }
/* 67.225 */        else {
/* 67.226 */            If.branchId(1)
/* 67.227 */        }
/* 67.228 */    } }) }.height(40).width(40).onClick({ evt => if(data[index] == 0) {
/* 67.229 */        var back:(Int64, Int64, Board) = run(this.data, this.game, this.game_state, index, this.player, this.step)
/* 67.230 */        this.step = back[0]
/* 67.231 */        this.player = back[1]
/* 67.232 */        this.game_state = back[2]
/* 67.233 */        this.game.hp1 = game_state[3]
/* 67.234 */        this.game.hp2 = game_state[4]
/* 67.235 */        this.animateFlag = this.game.animateFlag
/* 67.236 */        this.unopposed = this.game.unopposed
/* 67.237 */        if(this.animateFlag) {
/* 67.238 */            this.wp = this.game.wp
/* 67.239 */            this.bp = this.game.bp
/* 67.240 */            if(step == 2) {
/* 67.241 */                this.game.wp = ObservedArrayList(ArrayList())
/* 67.242 */                this.game.bp = ObservedArrayList(ArrayList())
/* 67.243 */            }
/* 67.244 */        }
/* 67.245 */        if(step == 2) {
/* 67.246 */            this.game.animateFlag = false
/* 67.247 */            this.game.unopposed = false
/* 67.248 */        }
/* 67.249 */    }
/* 67.250 */    
/* 67.251 */    if(step == 3 && this.player == - 1) {
/* 67.252 */        var ai_move = ai_move(this.AI, this.game_state)
/* 67.253 */        var back:(Int64, Int64, Board) = run(this.data, this.game, this.game_state, ai_move, this.player, this.step)
/* 67.254 */        this.step = back[0]
/* 67.255 */        this.player = back[1]
/* 67.256 */        this.game_state = back[2]
/* 67.257 */        this.game.hp1 = game_state[3]
/* 67.258 */        this.game.hp2 = game_state[4]
/* 67.259 */        this.animateFlag = this.game.animateFlag
/* 67.260 */        this.unopposed = this.game.unopposed
/* 67.261 */        if(this.animateFlag) {
/* 67.262 */            this.wp = this.game.wp
/* 67.263 */            this.bp = this.game.bp
/* 67.264 */            this.game.wp = ObservedArrayList(ArrayList())
/* 67.265 */            this.game.bp = ObservedArrayList(ArrayList())
/* 67.266 */        }
/* 67.267 */        this.game.animateFlag = false
/* 67.268 */        this.game.unopposed = false
/* 67.269 */    }
/* 67.270 */    
/* 67.271 */    if(JudgeAscendState()) {
/* 67.272 */        InitOpacitArray()
/* 67.273 */    }
/* 67.274 */}) }) }
/* 67.275 */
/* 67.276 */this.forEachUpdateFunction(elmtId, data, itemGenFunc: forEachItemGenFunction) } }) }.rowsTemplate("1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr ").columnsTemplate("1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr ").height(360).width(360).position(x: 10, y: 10) }) }
/* 67.277 */})
/* 67.278 */
/* 67.279 */()
/* 67.280 */
/* 67.281 */}
/* 67.282 */
/* 67.283 */
/* 67.284 */public init(parent: Option < CustomView >, data!: ObservedProperty < ObservedMatrix >, game!: ObservedProperty < FourAscendGame >, game_state!: ObservedProperty < Board >, player!: ObservedProperty < Int64 >, step!: ObservedProperty < Int64 >, AI!: ObservedProperty < StupidFourAscendPlayer >, opacityArray!: ObservedProperty < OpacityMatrix >, wp!: ObservedProperty < ObservedArrayList < Array < Int64 >>>, bp!: ObservedProperty < ObservedArrayList < Array < Int64 >>>, animateFlag!: ObservedProperty < Bool >, unopposed!: ObservedProperty < Bool >, localStorage!: Option < LocalStorage >= None) {
/* 67.285 */super(parent, localStorage)
/* 67.286 */
/* 67.287 */
/* 67.288 */this.stateVarDecl_data_ = data
/* 67.289 */
/* 67.290 */this.stateVarDecl_game_ = game
/* 67.291 */
/* 67.292 */this.stateVarDecl_game_state_ = game_state
/* 67.293 */
/* 67.294 */this.stateVarDecl_player_ = player
/* 67.295 */
/* 67.296 */this.stateVarDecl_step_ = step
/* 67.297 */
/* 67.298 */this.stateVarDecl_AI_ = AI
/* 67.299 */
/* 67.300 */this.stateVarDecl_opacityArray_ = opacityArray
/* 67.301 */
/* 67.302 */this.stateVarDecl_wp_ = wp
/* 67.303 */
/* 67.304 */this.stateVarDecl_bp_ = bp
/* 67.305 */
/* 67.306 */this.stateVarDecl_animateFlag_ = animateFlag
/* 67.307 */
/* 67.308 */this.stateVarDecl_unopposed_ = unopposed
/* 67.309 */
/* 67.310 */
/* 67.311 */this.stateVarDecl_data_.subscribeEx(this)
/* 67.312 */
/* 67.313 */this.stateVarDecl_game_.subscribeEx(this)
/* 67.314 */
/* 67.315 */this.stateVarDecl_game_state_.subscribeEx(this)
/* 67.316 */
/* 67.317 */this.stateVarDecl_player_.subscribeEx(this)
/* 67.318 */
/* 67.319 */this.stateVarDecl_step_.subscribeEx(this)
/* 67.320 */
/* 67.321 */this.stateVarDecl_AI_.subscribeEx(this)
/* 67.322 */
/* 67.323 */this.stateVarDecl_opacityArray_.subscribeEx(this)
/* 67.324 */
/* 67.325 */this.stateVarDecl_wp_.subscribeEx(this)
/* 67.326 */
/* 67.327 */this.stateVarDecl_bp_.subscribeEx(this)
/* 67.328 */
/* 67.329 */this.stateVarDecl_animateFlag_.subscribeEx(this)
/* 67.330 */
/* 67.331 */this.stateVarDecl_unopposed_.subscribeEx(this)
/* 67.332 */
/* 67.333 */SubscriberManager.getInstance().add(this)
/* 67.334 */
/* 67.335 */
/* 67.336 */registerSelf()
/* 67.337 */parent?.addChildById(id(), this)
/* 67.338 */}
/* 67.339 */
/* 67.340 */
/* 67.341 */public override func aboutToBeDeleted() {
/* 67.342 */
/* 67.343 */this.stateVarDecl_data_.unsubscribeEx(this)
/* 67.344 */
/* 67.345 */this.stateVarDecl_game_.unsubscribeEx(this)
/* 67.346 */
/* 67.347 */this.stateVarDecl_game_state_.unsubscribeEx(this)
/* 67.348 */
/* 67.349 */this.stateVarDecl_player_.unsubscribeEx(this)
/* 67.350 */
/* 67.351 */this.stateVarDecl_step_.unsubscribeEx(this)
/* 67.352 */
/* 67.353 */this.stateVarDecl_AI_.unsubscribeEx(this)
/* 67.354 */
/* 67.355 */this.stateVarDecl_opacityArray_.unsubscribeEx(this)
/* 67.356 */
/* 67.357 */this.stateVarDecl_wp_.unsubscribeEx(this)
/* 67.358 */
/* 67.359 */this.stateVarDecl_bp_.unsubscribeEx(this)
/* 67.360 */
/* 67.361 */this.stateVarDecl_animateFlag_.unsubscribeEx(this)
/* 67.362 */
/* 67.363 */this.stateVarDecl_unopposed_.unsubscribeEx(this)
/* 67.364 */
/* 67.365 */SubscriberManager.getInstance().delete(this)
/* 67.366 */this.aboutToBeDeletedInternal()
/* 67.367 */}
/* 67.368 */
/* 67.369 */
/* 67.370 */func updateWithValueParams(data!: Option < ObservedMatrix >= Option < ObservedMatrix >.None, game!: Option < FourAscendGame >= Option < FourAscendGame >.None, game_state!: Option < Board >= Option < Board >.None, player!: Option < Int64 >= Option < Int64 >.None, step!: Option < Int64 >= Option < Int64 >.None, AI!: Option < StupidFourAscendPlayer >= Option < StupidFourAscendPlayer >.None, opacityArray!: Option < OpacityMatrix >= Option < OpacityMatrix >.None, wp!: Option < ObservedArrayList < Array < Int64 >>>= Option < ObservedArrayList < Array < Int64 >>>.None, bp!: Option < ObservedArrayList < Array < Int64 >>>= Option < ObservedArrayList < Array < Int64 >>>.None, animateFlag!: Option < Bool >= Option < Bool >.None, unopposed!: Option < Bool >= Option < Bool >.None): Unit {
/* 67.371 */
/* 67.372 */}
/* 67.373 */
/* 67.374 */
/* 67.375 */public func rerender() {
/* 67.376 */this.updateDirtyElements()
/* 67.377 */}
/* 67.378 */
/* 67.379 */
/* 67.380 */public func purgeVariableDependenciesOnElmtId(rmElmtId: Int64) {
/* 67.381 */
/* 67.382 */this.stateVarDecl_data_.purgeDependencyOnElmtId(rmElmtId)
/* 67.383 */
/* 67.384 */this.stateVarDecl_game_.purgeDependencyOnElmtId(rmElmtId)
/* 67.385 */
/* 67.386 */this.stateVarDecl_game_state_.purgeDependencyOnElmtId(rmElmtId)
/* 67.387 */
/* 67.388 */this.stateVarDecl_player_.purgeDependencyOnElmtId(rmElmtId)
/* 67.389 */
/* 67.390 */this.stateVarDecl_step_.purgeDependencyOnElmtId(rmElmtId)
/* 67.391 */
/* 67.392 */this.stateVarDecl_AI_.purgeDependencyOnElmtId(rmElmtId)
/* 67.393 */
/* 67.394 */this.stateVarDecl_opacityArray_.purgeDependencyOnElmtId(rmElmtId)
/* 67.395 */
/* 67.396 */this.stateVarDecl_wp_.purgeDependencyOnElmtId(rmElmtId)
/* 67.397 */
/* 67.398 */this.stateVarDecl_bp_.purgeDependencyOnElmtId(rmElmtId)
/* 67.399 */
/* 67.400 */this.stateVarDecl_animateFlag_.purgeDependencyOnElmtId(rmElmtId)
/* 67.401 */
/* 67.402 */this.stateVarDecl_unopposed_.purgeDependencyOnElmtId(rmElmtId)
/* 67.403 */
/* 67.404 */}
/* 67.405 */
/* 67.406 */
/* 67.407 */public func forceRerender(deep!: Bool = false) {
/* 67.408 */this.forceCompleteRerender(deep)
/* 67.409 */}
/* 67.410 */
/* 67.411 */
/* 67.412 */}
/* 67.413 */
/* ===== End of the Emit ===== */

//玩家状态绘制组件
/* ===== Emitted by MacroCall @Component in draw.cj:284:1 ===== */
/* 284.1 */public class playerstate <: CustomView {
/* 284.2 */    
/* 284.3 */    
/* 284.4 */    private var stateVarDecl_game_state_: ObservedProperty < Board >
/* 284.5 */    
/* 284.6 */    
/* 284.7 */    private mut prop game_state: Board {
/* 284.8 */        get() {
/* 284.9 */            return this.stateVarDecl_game_state_.get()
/* 284.10 */        }
/* 284.11 */        set(v) {
/* 284.12 */            this.stateVarDecl_game_state_.set(v)
/* 284.13 */        }
/* 284.14 */    }
/* 284.15 */    
/* 284.16 */    
/* 284.17 */    var y_pos: Int64 = 180
/* 284.18 */    
/* 284.19 */    
/* 284.20 */    var x_pos: Int64 = 100
/* 284.21 */    
/* 284.22 */    
/* 284.23 */    private var stateVarDecl_player_posX_: ObservedProperty < Int64 >= ObservedProperty < Int64 >("stateVarDecl_player_posX_", 90)
/* 284.24 */    
/* 284.25 */    
/* 284.26 */    private mut prop player_posX: Int64 {
/* 284.27 */        get() {
/* 284.28 */            return this.stateVarDecl_player_posX_.get()
/* 284.29 */        }
/* 284.30 */        set(v) {
/* 284.31 */            this.stateVarDecl_player_posX_.set(v)
/* 284.32 */        }
/* 284.33 */    }
/* 284.34 */    
/* 284.35 */    
/* 284.36 */    private var stateVarDecl_player_posY_: ObservedProperty < Int64 >= ObservedProperty < Int64 >("stateVarDecl_player_posY_", 100)
/* 284.37 */    
/* 284.38 */    
/* 284.39 */    private mut prop player_posY: Int64 {
/* 284.40 */        get() {
/* 284.41 */            return this.stateVarDecl_player_posY_.get()
/* 284.42 */        }
/* 284.43 */        set(v) {
/* 284.44 */            this.stateVarDecl_player_posY_.set(v)
/* 284.45 */        }
/* 284.46 */    }
/* 284.47 */    
/* 284.48 */    
/* 284.49 */    private var stateVarDecl_player_angel_: ObservedProperty < Float32 >= ObservedProperty < Float32 >("stateVarDecl_player_angel_", 0.0)
/* 284.50 */    
/* 284.51 */    
/* 284.52 */    private mut prop player_angel: Float32 {
/* 284.53 */        get() {
/* 284.54 */            return this.stateVarDecl_player_angel_.get()
/* 284.55 */        }
/* 284.56 */        set(v) {
/* 284.57 */            this.stateVarDecl_player_angel_.set(v)
/* 284.58 */        }
/* 284.59 */    }
/* 284.60 */    
/* 284.61 */    
/* 284.62 */    private var stateVarDecl_enemy_posX_: ObservedProperty < Int64 >= ObservedProperty < Int64 >("stateVarDecl_enemy_posX_", 690)
/* 284.63 */    
/* 284.64 */    
/* 284.65 */    private mut prop enemy_posX: Int64 {
/* 284.66 */        get() {
/* 284.67 */            return this.stateVarDecl_enemy_posX_.get()
/* 284.68 */        }
/* 284.69 */        set(v) {
/* 284.70 */            this.stateVarDecl_enemy_posX_.set(v)
/* 284.71 */        }
/* 284.72 */    }
/* 284.73 */    
/* 284.74 */    
/* 284.75 */    private var stateVarDecl_enemy_posY_: ObservedProperty < Int64 >= ObservedProperty < Int64 >("stateVarDecl_enemy_posY_", 102)
/* 284.76 */    
/* 284.77 */    
/* 284.78 */    private mut prop enemy_posY: Int64 {
/* 284.79 */        get() {
/* 284.80 */            return this.stateVarDecl_enemy_posY_.get()
/* 284.81 */        }
/* 284.82 */        set(v) {
/* 284.83 */            this.stateVarDecl_enemy_posY_.set(v)
/* 284.84 */        }
/* 284.85 */    }
/* 284.86 */    
/* 284.87 */    
/* 284.88 */    private var stateVarDecl_enemy_angel_: ObservedProperty < Float32 >= ObservedProperty < Float32 >("stateVarDecl_enemy_angel_", 0.0)
/* 284.89 */    
/* 284.90 */    
/* 284.91 */    private mut prop enemy_angel: Float32 {
/* 284.92 */        get() {
/* 284.93 */            return this.stateVarDecl_enemy_angel_.get()
/* 284.94 */        }
/* 284.95 */        set(v) {
/* 284.96 */            this.stateVarDecl_enemy_angel_.set(v)
/* 284.97 */        }
/* 284.98 */    }
/* 284.99 */    
/* 284.100 */    
/* 284.101 */    private var stateVarDecl_opc_: ObservedProperty < Float64 >= ObservedProperty < Float64 >("stateVarDecl_opc_", 0.0)
/* 284.102 */    
/* 284.103 */    
/* 284.104 */    private mut prop opc: Float64 {
/* 284.105 */        get() {
/* 284.106 */            return this.stateVarDecl_opc_.get()
/* 284.107 */        }
/* 284.108 */        set(v) {
/* 284.109 */            this.stateVarDecl_opc_.set(v)
/* 284.110 */        }
/* 284.111 */    }
/* 284.112 */    
/* 284.113 */    
/* 284.114 */    private var stateVarDecl_hp1_: ObservedProperty < Int64 >= ObservedProperty < Int64 >("stateVarDecl_hp1_", 6)
/* 284.115 */    
/* 284.116 */    
/* 284.117 */    private mut prop hp1: Int64 {
/* 284.118 */        get() {
/* 284.119 */            return this.stateVarDecl_hp1_.get()
/* 284.120 */        }
/* 284.121 */        set(v) {
/* 284.122 */            this.stateVarDecl_hp1_.set(v)
/* 284.123 */        }
/* 284.124 */    }
/* 284.125 */    
/* 284.126 */    
/* 284.127 */    private var stateVarDecl_hp2_: ObservedProperty < Int64 >= ObservedProperty < Int64 >("stateVarDecl_hp2_", 6)
/* 284.128 */    
/* 284.129 */    
/* 284.130 */    private mut prop hp2: Int64 {
/* 284.131 */        get() {
/* 284.132 */            return this.stateVarDecl_hp2_.get()
/* 284.133 */        }
/* 284.134 */        set(v) {
/* 284.135 */            this.stateVarDecl_hp2_.set(v)
/* 284.136 */        }
/* 284.137 */    }
/* 284.138 */    
/* 284.139 */    
/* 284.140 */    private var stateVarDecl_player_flash_opa_: ObservedProperty < Float64 >= ObservedProperty < Float64 >("stateVarDecl_player_flash_opa_", 0.0)
/* 284.141 */    
/* 284.142 */    
/* 284.143 */    private mut prop player_flash_opa: Float64 {
/* 284.144 */        get() {
/* 284.145 */            return this.stateVarDecl_player_flash_opa_.get()
/* 284.146 */        }
/* 284.147 */        set(v) {
/* 284.148 */            this.stateVarDecl_player_flash_opa_.set(v)
/* 284.149 */        }
/* 284.150 */    }
/* 284.151 */    
/* 284.152 */    
/* 284.153 */    private var stateVarDecl_enemy_flash_opa_: ObservedProperty < Float64 >= ObservedProperty < Float64 >("stateVarDecl_enemy_flash_opa_", 0.0)
/* 284.154 */    
/* 284.155 */    
/* 284.156 */    private mut prop enemy_flash_opa: Float64 {
/* 284.157 */        get() {
/* 284.158 */            return this.stateVarDecl_enemy_flash_opa_.get()
/* 284.159 */        }
/* 284.160 */        set(v) {
/* 284.161 */            this.stateVarDecl_enemy_flash_opa_.set(v)
/* 284.162 */        }
/* 284.163 */    }
/* 284.164 */    
/* 284.165 */    
/* 284.166 */    private var stateVarDecl_player_flash_: ObservedProperty < Bool >= ObservedProperty < Bool >("stateVarDecl_player_flash_", false)
/* 284.167 */    
/* 284.168 */    
/* 284.169 */    private mut prop player_flash: Bool {
/* 284.170 */        get() {
/* 284.171 */            return this.stateVarDecl_player_flash_.get()
/* 284.172 */        }
/* 284.173 */        set(v) {
/* 284.174 */            this.stateVarDecl_player_flash_.set(v)
/* 284.175 */        }
/* 284.176 */    }
/* 284.177 */    
/* 284.178 */    
/* 284.179 */    private var stateVarDecl_enemy_flash_: ObservedProperty < Bool >= ObservedProperty < Bool >("stateVarDecl_enemy_flash_", false)
/* 284.180 */    
/* 284.181 */    
/* 284.182 */    private mut prop enemy_flash: Bool {
/* 284.183 */        get() {
/* 284.184 */            return this.stateVarDecl_enemy_flash_.get()
/* 284.185 */        }
/* 284.186 */        set(v) {
/* 284.187 */            this.stateVarDecl_enemy_flash_.set(v)
/* 284.188 */        }
/* 284.189 */    }
/* 284.190 */    
/* 284.191 */    
/* 284.192 */    private var stateVarDecl_onHit_: ObservedProperty < Bool >
/* 284.193 */    
/* 284.194 */    
/* 284.195 */    private mut prop onHit: Bool {
/* 284.196 */        get() {
/* 284.197 */            return this.stateVarDecl_onHit_.get()
/* 284.198 */        }
/* 284.199 */        set(v) {
/* 284.200 */            this.stateVarDecl_onHit_.set(v)
/* 284.201 */        }
/* 284.202 */    }
/* 284.203 */    
/* 284.204 */    
/* 284.205 */    private var stateVarDecl_step_: ObservedProperty < Int64 >
/* 284.206 */    
/* 284.207 */    
/* 284.208 */    private mut prop step: Int64 {
/* 284.209 */        get() {
/* 284.210 */            return this.stateVarDecl_step_.get()
/* 284.211 */        }
/* 284.212 */        set(v) {
/* 284.213 */            this.stateVarDecl_step_.set(v)
/* 284.214 */        }
/* 284.215 */    }
/* 284.216 */    
/* 284.217 */    
/* 284.218 */    private func HP1_HitJudge() {
/* 284.219 */        if(onHit && game_state[3] != hp1) {
/* 284.220 */            hp1 = game_state[3]
/* 284.221 */            player_flash = true
/* 284.222 */            player_flash_opa = 1.0
/* 284.223 */        }
/* 284.224 */        return hp1
/* 284.225 */    }
/* 284.226 */    
/* 284.227 */    
/* 284.228 */    private func HP2_HitJudge() {
/* 284.229 */        if(onHit && game_state[4] != hp2) {
/* 284.230 */            hp2 = game_state[4]
/* 284.231 */            enemy_flash = true
/* 284.232 */            enemy_flash_opa = 1.0
/* 284.233 */        }
/* 284.234 */        return hp2
/* 284.235 */    }
/* 284.236 */    
/* 284.237 */    
/* 284.238 */    
/* 284.239 */    public func build() {
/* 284.240 */        
/* 284.241 */        this.observeComponentCreation({ elmtId, isInitialRender =>
/* 284.242 */            Column { this.observeComponentCreation({ elmtId, isInitialRender => Stack { this.observeComponentCreation({ elmtId, isInitialRender => Image(__GenerateResource__("", "", "", app.media.player, "app.media.player",[], 20000)).height(62).width(63).objectFit(ImageFit.Contain) })
/* 284.243 */            this.observeComponentCreation({ elmtId, isInitialRender => Image(__GenerateResource__("", "", "", app.media.player_onHit, "app.media.player_onHit",[], 20000)).animationStart(AnimateParam(duration: 50, curve: Curve.Linear, delay: 0, iterations: 1, playMode: PlayMode.Alternate, onFinish: { => this.player_flash_opa = 0.0
/* 284.244 */                this.player_flash = false
/* 284.245 */                if(hp1 <= 0 || hp2 <= 0) {
/* 284.246 */                    animateTo(AnimateParam(duration: 1000, curve: Curve.EaseOut, delay: 0, iterations: 1, playMode: PlayMode.Alternate, onFinish: { => this.step = 4
/* 284.247 */                        this.player_posX = 90
/* 284.248 */                        this.player_posY = 100
/* 284.249 */                    this.player_angel = 0.0 }, expectedFrameRateRange: ExpectedFrameRateRange(min: 20, max: 120, expected: 90)), { => this.player_posX = - 200
/* 284.250 */                        this.player_posY = 0
/* 284.251 */                    this.player_angel = - 720.0 })
/* 284.252 */                }
/* 284.253 */            }, expectedFrameRateRange: ExpectedFrameRateRange(min: 20, max: 120, expected: 90))).height(62).width(63).objectFit(ImageFit.Contain).opacity(player_flash_opa).animationEnd() }) }.position(x: player_posX, y: player_posY).height(62).width(63).rotate(player_angel) })
/* 284.254 */            this.observeComponentCreation({ elmtId, isInitialRender => Image(__GenerateResource__("", "", "", app.media.HP_Image, "app.media.HP_Image",[], 20000)).position(x: x_pos, y: y_pos).height(37).width(40) })
/* 284.255 */            this.observeComponentCreation({ elmtId, isInitialRender => Text("${HP1_HitJudge()}").animationStart(AnimateParam(duration: 300, curve: Curve.Linear, delay: 0, iterations: 1, playMode: PlayMode.Alternate, onFinish: { => this.onHit = false }, expectedFrameRateRange: ExpectedFrameRateRange(min: 20, max: 120, expected: 90))).textAlign(TextAlign.Center).fontSize(60).fontColor(0xfc037f).position(x: x_pos + 10, y: y_pos + 50).height(50).fontFamily(__GenerateResource__("", "", "", app.string.ProggyTinySZ, "app.string.ProggyTinySZ",[], 10003)).animationEnd() })
/* 284.256 */            this.observeComponentCreation({ elmtId, isInitialRender => Stack { this.observeComponentCreation({ elmtId, isInitialRender => Image(__GenerateResource__("", "", "", app.media.enemy, "app.media.enemy",[], 20000)).height(62).width(63).objectFit(ImageFit.Contain) })
/* 284.257 */            this.observeComponentCreation({ elmtId, isInitialRender => Image(__GenerateResource__("", "", "", app.media.enemy_onHit, "app.media.enemy_onHit",[], 20000)).animationStart(AnimateParam(duration: 50, curve: Curve.Linear, delay: 0, iterations: 1, playMode: PlayMode.Alternate, onFinish: { => this.enemy_flash_opa = 0.0
/* 284.258 */                this.enemy_flash = false
/* 284.259 */                if(hp1 <= 0 || hp2 <= 0) {
/* 284.260 */                    animateTo(AnimateParam(duration: 1000, curve: Curve.EaseOut, delay: 100, iterations: 1, playMode: PlayMode.Alternate, onFinish: { => this.step = 4
/* 284.261 */                        this.enemy_posX = 690
/* 284.262 */                        this.enemy_posY = 102
/* 284.263 */                    this.enemy_angel = 0.0 }, expectedFrameRateRange: ExpectedFrameRateRange(min: 20, max: 120, expected: 90)), { => this.enemy_posX = 900
/* 284.264 */                        this.enemy_posY = 0
/* 284.265 */                    this.enemy_angel = 720.0 })
/* 284.266 */                }
/* 284.267 */            }, expectedFrameRateRange: ExpectedFrameRateRange(min: 20, max: 120, expected: 90))).height(62).width(63).objectFit(ImageFit.Contain).opacity(enemy_flash_opa).animationEnd() }) }.position(x: enemy_posX, y: enemy_posY).height(62).width(63).rotate(enemy_angel) })
/* 284.268 */            this.observeComponentCreation({ elmtId, isInitialRender => Image(__GenerateResource__("", "", "", app.media.HP_Image, "app.media.HP_Image",[], 20000)).position(x: x_pos + 600, y: y_pos).height(37).width(40) })
/* 284.269 */            this.observeComponentCreation({ elmtId, isInitialRender => Text("${HP2_HitJudge()}").animationStart(AnimateParam(duration: 300, curve: Curve.Linear, delay: 0, iterations: 1, playMode: PlayMode.Alternate, onFinish: { => this.onHit = false }, expectedFrameRateRange: ExpectedFrameRateRange(min: 20, max: 120, expected: 90))).textAlign(TextAlign.Center).fontSize(60).fontColor(0xfc037f).position(x: x_pos + 600 + 10, y: y_pos + 50).height(50).fontFamily(__GenerateResource__("", "", "", app.string.ProggyTinySZ, "app.string.ProggyTinySZ",[], 10003)).animationEnd() }) }.opacity(opc).onAppear({ => animateTo(AnimateParam(duration: 300, curve: Curve.Linear, delay: 100, iterations: 1, playMode: PlayMode.Alternate, onFinish: { => }, expectedFrameRateRange: ExpectedFrameRateRange(min: 20, max: 120, expected: 90)), { => opc = 1.0 }) })
/* 284.270 */        })
/* 284.271 */        
/* 284.272 */        ()
/* 284.273 */        
/* 284.274 */    }
/* 284.275 */    
/* 284.276 */    
/* 284.277 */    public init(parent: Option < CustomView >, game_state!: ObservedProperty < Board >, y_pos!: Option < ObservedProperty < Int64 >>= None, x_pos!: Option < ObservedProperty < Int64 >>= None, player_posX!: Option < ObservedProperty < Int64 >>= None, player_posY!: Option < ObservedProperty < Int64 >>= None, player_angel!: Option < ObservedProperty < Float32 >>= None, enemy_posX!: Option < ObservedProperty < Int64 >>= None, enemy_posY!: Option < ObservedProperty < Int64 >>= None, enemy_angel!: Option < ObservedProperty < Float32 >>= None, opc!: Option < ObservedProperty < Float64 >>= None, hp1!: Option < ObservedProperty < Int64 >>= None, hp2!: Option < ObservedProperty < Int64 >>= None, player_flash_opa!: Option < ObservedProperty < Float64 >>= None, enemy_flash_opa!: Option < ObservedProperty < Float64 >>= None, player_flash!: Option < ObservedProperty < Bool >>= None, enemy_flash!: Option < ObservedProperty < Bool >>= None, onHit!: ObservedProperty < Bool >, step!: ObservedProperty < Int64 >, localStorage!: Option < LocalStorage >= None) {
/* 284.278 */        super(parent, localStorage)
/* 284.279 */        
/* 284.280 */        
/* 284.281 */        this.stateVarDecl_game_state_ = game_state.createProp("stateVarDecl_game_state_")
/* 284.282 */        
/* 284.283 */        match(y_pos) {
/* 284.284 */            case Some(v) => this.y_pos = v.get()
/* 284.285 */            case _ =>()
/* 284.286 */        }
/* 284.287 */        
/* 284.288 */        match(x_pos) {
/* 284.289 */            case Some(v) => this.x_pos = v.get()
/* 284.290 */            case _ =>()
/* 284.291 */        }
/* 284.292 */        
/* 284.293 */        match(player_posX) {
/* 284.294 */            case Some(v) => this.stateVarDecl_player_posX_ = ObservedProperty < Int64 >("stateVarDecl_player_posX_", v.get())
/* 284.295 */            case _ =>()
/* 284.296 */        }
/* 284.297 */        
/* 284.298 */        match(player_posY) {
/* 284.299 */            case Some(v) => this.stateVarDecl_player_posY_ = ObservedProperty < Int64 >("stateVarDecl_player_posY_", v.get())
/* 284.300 */            case _ =>()
/* 284.301 */        }
/* 284.302 */        
/* 284.303 */        match(player_angel) {
/* 284.304 */            case Some(v) => this.stateVarDecl_player_angel_ = ObservedProperty < Float32 >("stateVarDecl_player_angel_", v.get())
/* 284.305 */            case _ =>()
/* 284.306 */        }
/* 284.307 */        
/* 284.308 */        match(enemy_posX) {
/* 284.309 */            case Some(v) => this.stateVarDecl_enemy_posX_ = ObservedProperty < Int64 >("stateVarDecl_enemy_posX_", v.get())
/* 284.310 */            case _ =>()
/* 284.311 */        }
/* 284.312 */        
/* 284.313 */        match(enemy_posY) {
/* 284.314 */            case Some(v) => this.stateVarDecl_enemy_posY_ = ObservedProperty < Int64 >("stateVarDecl_enemy_posY_", v.get())
/* 284.315 */            case _ =>()
/* 284.316 */        }
/* 284.317 */        
/* 284.318 */        match(enemy_angel) {
/* 284.319 */            case Some(v) => this.stateVarDecl_enemy_angel_ = ObservedProperty < Float32 >("stateVarDecl_enemy_angel_", v.get())
/* 284.320 */            case _ =>()
/* 284.321 */        }
/* 284.322 */        
/* 284.323 */        match(opc) {
/* 284.324 */            case Some(v) => this.stateVarDecl_opc_ = ObservedProperty < Float64 >("stateVarDecl_opc_", v.get())
/* 284.325 */            case _ =>()
/* 284.326 */        }
/* 284.327 */        
/* 284.328 */        match(hp1) {
/* 284.329 */            case Some(v) => this.stateVarDecl_hp1_ = ObservedProperty < Int64 >("stateVarDecl_hp1_", v.get())
/* 284.330 */            case _ =>()
/* 284.331 */        }
/* 284.332 */        
/* 284.333 */        match(hp2) {
/* 284.334 */            case Some(v) => this.stateVarDecl_hp2_ = ObservedProperty < Int64 >("stateVarDecl_hp2_", v.get())
/* 284.335 */            case _ =>()
/* 284.336 */        }
/* 284.337 */        
/* 284.338 */        match(player_flash_opa) {
/* 284.339 */            case Some(v) => this.stateVarDecl_player_flash_opa_ = ObservedProperty < Float64 >("stateVarDecl_player_flash_opa_", v.get())
/* 284.340 */            case _ =>()
/* 284.341 */        }
/* 284.342 */        
/* 284.343 */        match(enemy_flash_opa) {
/* 284.344 */            case Some(v) => this.stateVarDecl_enemy_flash_opa_ = ObservedProperty < Float64 >("stateVarDecl_enemy_flash_opa_", v.get())
/* 284.345 */            case _ =>()
/* 284.346 */        }
/* 284.347 */        
/* 284.348 */        match(player_flash) {
/* 284.349 */            case Some(v) => this.stateVarDecl_player_flash_ = ObservedProperty < Bool >("stateVarDecl_player_flash_", v.get())
/* 284.350 */            case _ =>()
/* 284.351 */        }
/* 284.352 */        
/* 284.353 */        match(enemy_flash) {
/* 284.354 */            case Some(v) => this.stateVarDecl_enemy_flash_ = ObservedProperty < Bool >("stateVarDecl_enemy_flash_", v.get())
/* 284.355 */            case _ =>()
/* 284.356 */        }
/* 284.357 */        
/* 284.358 */        this.stateVarDecl_onHit_ = onHit
/* 284.359 */        
/* 284.360 */        this.stateVarDecl_step_ = step
/* 284.361 */        
/* 284.362 */        
/* 284.363 */        this.stateVarDecl_game_state_.subscribeEx(this)
/* 284.364 */        
/* 284.365 */        this.stateVarDecl_player_posX_.subscribeEx(this)
/* 284.366 */        
/* 284.367 */        this.stateVarDecl_player_posY_.subscribeEx(this)
/* 284.368 */        
/* 284.369 */        this.stateVarDecl_player_angel_.subscribeEx(this)
/* 284.370 */        
/* 284.371 */        this.stateVarDecl_enemy_posX_.subscribeEx(this)
/* 284.372 */        
/* 284.373 */        this.stateVarDecl_enemy_posY_.subscribeEx(this)
/* 284.374 */        
/* 284.375 */        this.stateVarDecl_enemy_angel_.subscribeEx(this)
/* 284.376 */        
/* 284.377 */        this.stateVarDecl_opc_.subscribeEx(this)
/* 284.378 */        
/* 284.379 */        this.stateVarDecl_hp1_.subscribeEx(this)
/* 284.380 */        
/* 284.381 */        this.stateVarDecl_hp2_.subscribeEx(this)
/* 284.382 */        
/* 284.383 */        this.stateVarDecl_player_flash_opa_.subscribeEx(this)
/* 284.384 */        
/* 284.385 */        this.stateVarDecl_enemy_flash_opa_.subscribeEx(this)
/* 284.386 */        
/* 284.387 */        this.stateVarDecl_player_flash_.subscribeEx(this)
/* 284.388 */        
/* 284.389 */        this.stateVarDecl_enemy_flash_.subscribeEx(this)
/* 284.390 */        
/* 284.391 */        this.stateVarDecl_onHit_.subscribeEx(this)
/* 284.392 */        
/* 284.393 */        this.stateVarDecl_step_.subscribeEx(this)
/* 284.394 */        
/* 284.395 */        SubscriberManager.getInstance().add(this)
/* 284.396 */        
/* 284.397 */        
/* 284.398 */        registerSelf()
/* 284.399 */        parent?.addChildById(id(), this)
/* 284.400 */    }
/* 284.401 */    
/* 284.402 */    
/* 284.403 */    public override func aboutToBeDeleted() {
/* 284.404 */        
/* 284.405 */        this.stateVarDecl_game_state_.unsubscribeEx(this)
/* 284.406 */        
/* 284.407 */        this.stateVarDecl_player_posX_.unsubscribeEx(this)
/* 284.408 */        
/* 284.409 */        this.stateVarDecl_player_posY_.unsubscribeEx(this)
/* 284.410 */        
/* 284.411 */        this.stateVarDecl_player_angel_.unsubscribeEx(this)
/* 284.412 */        
/* 284.413 */        this.stateVarDecl_enemy_posX_.unsubscribeEx(this)
/* 284.414 */        
/* 284.415 */        this.stateVarDecl_enemy_posY_.unsubscribeEx(this)
/* 284.416 */        
/* 284.417 */        this.stateVarDecl_enemy_angel_.unsubscribeEx(this)
/* 284.418 */        
/* 284.419 */        this.stateVarDecl_opc_.unsubscribeEx(this)
/* 284.420 */        
/* 284.421 */        this.stateVarDecl_hp1_.unsubscribeEx(this)
/* 284.422 */        
/* 284.423 */        this.stateVarDecl_hp2_.unsubscribeEx(this)
/* 284.424 */        
/* 284.425 */        this.stateVarDecl_player_flash_opa_.unsubscribeEx(this)
/* 284.426 */        
/* 284.427 */        this.stateVarDecl_enemy_flash_opa_.unsubscribeEx(this)
/* 284.428 */        
/* 284.429 */        this.stateVarDecl_player_flash_.unsubscribeEx(this)
/* 284.430 */        
/* 284.431 */        this.stateVarDecl_enemy_flash_.unsubscribeEx(this)
/* 284.432 */        
/* 284.433 */        this.stateVarDecl_onHit_.unsubscribeEx(this)
/* 284.434 */        
/* 284.435 */        this.stateVarDecl_step_.unsubscribeEx(this)
/* 284.436 */        
/* 284.437 */        SubscriberManager.getInstance().delete(this)
/* 284.438 */        this.aboutToBeDeletedInternal()
/* 284.439 */    }
/* 284.440 */    
/* 284.441 */    
/* 284.442 */    func updateWithValueParams(game_state!: Option < Board >= Option < Board >.None, y_pos!: Option < Int64 >= Option < Int64 >.None, x_pos!: Option < Int64 >= Option < Int64 >.None, player_posX!: Option < Int64 >= Option < Int64 >.None, player_posY!: Option < Int64 >= Option < Int64 >.None, player_angel!: Option < Float32 >= Option < Float32 >.None, enemy_posX!: Option < Int64 >= Option < Int64 >.None, enemy_posY!: Option < Int64 >= Option < Int64 >.None, enemy_angel!: Option < Float32 >= Option < Float32 >.None, opc!: Option < Float64 >= Option < Float64 >.None, hp1!: Option < Int64 >= Option < Int64 >.None, hp2!: Option < Int64 >= Option < Int64 >.None, player_flash_opa!: Option < Float64 >= Option < Float64 >.None, enemy_flash_opa!: Option < Float64 >= Option < Float64 >.None, player_flash!: Option < Bool >= Option < Bool >.None, enemy_flash!: Option < Bool >= Option < Bool >.None, onHit!: Option < Bool >= Option < Bool >.None, step!: Option < Int64 >= Option < Int64 >.None): Unit {
/* 284.443 */        
/* 284.444 */        match(game_state) {
/* 284.445 */            case Some(v) => this.game_state = v
/* 284.446 */            case _ =>()
/* 284.447 */        }
/* 284.448 */        
/* 284.449 */        match(player_posX) {
/* 284.450 */            case Some(v) => this.player_posX = v
/* 284.451 */            case _ =>()
/* 284.452 */        }
/* 284.453 */        
/* 284.454 */        match(player_posY) {
/* 284.455 */            case Some(v) => this.player_posY = v
/* 284.456 */            case _ =>()
/* 284.457 */        }
/* 284.458 */        
/* 284.459 */        match(player_angel) {
/* 284.460 */            case Some(v) => this.player_angel = v
/* 284.461 */            case _ =>()
/* 284.462 */        }
/* 284.463 */        
/* 284.464 */        match(enemy_posX) {
/* 284.465 */            case Some(v) => this.enemy_posX = v
/* 284.466 */            case _ =>()
/* 284.467 */        }
/* 284.468 */        
/* 284.469 */        match(enemy_posY) {
/* 284.470 */            case Some(v) => this.enemy_posY = v
/* 284.471 */            case _ =>()
/* 284.472 */        }
/* 284.473 */        
/* 284.474 */        match(enemy_angel) {
/* 284.475 */            case Some(v) => this.enemy_angel = v
/* 284.476 */            case _ =>()
/* 284.477 */        }
/* 284.478 */        
/* 284.479 */        match(opc) {
/* 284.480 */            case Some(v) => this.opc = v
/* 284.481 */            case _ =>()
/* 284.482 */        }
/* 284.483 */        
/* 284.484 */        match(hp1) {
/* 284.485 */            case Some(v) => this.hp1 = v
/* 284.486 */            case _ =>()
/* 284.487 */        }
/* 284.488 */        
/* 284.489 */        match(hp2) {
/* 284.490 */            case Some(v) => this.hp2 = v
/* 284.491 */            case _ =>()
/* 284.492 */        }
/* 284.493 */        
/* 284.494 */        match(player_flash_opa) {
/* 284.495 */            case Some(v) => this.player_flash_opa = v
/* 284.496 */            case _ =>()
/* 284.497 */        }
/* 284.498 */        
/* 284.499 */        match(enemy_flash_opa) {
/* 284.500 */            case Some(v) => this.enemy_flash_opa = v
/* 284.501 */            case _ =>()
/* 284.502 */        }
/* 284.503 */        
/* 284.504 */        match(player_flash) {
/* 284.505 */            case Some(v) => this.player_flash = v
/* 284.506 */            case _ =>()
/* 284.507 */        }
/* 284.508 */        
/* 284.509 */        match(enemy_flash) {
/* 284.510 */            case Some(v) => this.enemy_flash = v
/* 284.511 */            case _ =>()
/* 284.512 */        }
/* 284.513 */        
/* 284.514 */    }
/* 284.515 */    
/* 284.516 */    
/* 284.517 */    public func rerender() {
/* 284.518 */        this.updateDirtyElements()
/* 284.519 */    }
/* 284.520 */    
/* 284.521 */    
/* 284.522 */    public func purgeVariableDependenciesOnElmtId(rmElmtId: Int64) {
/* 284.523 */        
/* 284.524 */        this.stateVarDecl_game_state_.purgeDependencyOnElmtId(rmElmtId)
/* 284.525 */        
/* 284.526 */        this.stateVarDecl_player_posX_.purgeDependencyOnElmtId(rmElmtId)
/* 284.527 */        
/* 284.528 */        this.stateVarDecl_player_posY_.purgeDependencyOnElmtId(rmElmtId)
/* 284.529 */        
/* 284.530 */        this.stateVarDecl_player_angel_.purgeDependencyOnElmtId(rmElmtId)
/* 284.531 */        
/* 284.532 */        this.stateVarDecl_enemy_posX_.purgeDependencyOnElmtId(rmElmtId)
/* 284.533 */        
/* 284.534 */        this.stateVarDecl_enemy_posY_.purgeDependencyOnElmtId(rmElmtId)
/* 284.535 */        
/* 284.536 */        this.stateVarDecl_enemy_angel_.purgeDependencyOnElmtId(rmElmtId)
/* 284.537 */        
/* 284.538 */        this.stateVarDecl_opc_.purgeDependencyOnElmtId(rmElmtId)
/* 284.539 */        
/* 284.540 */        this.stateVarDecl_hp1_.purgeDependencyOnElmtId(rmElmtId)
/* 284.541 */        
/* 284.542 */        this.stateVarDecl_hp2_.purgeDependencyOnElmtId(rmElmtId)
/* 284.543 */        
/* 284.544 */        this.stateVarDecl_player_flash_opa_.purgeDependencyOnElmtId(rmElmtId)
/* 284.545 */        
/* 284.546 */        this.stateVarDecl_enemy_flash_opa_.purgeDependencyOnElmtId(rmElmtId)
/* 284.547 */        
/* 284.548 */        this.stateVarDecl_player_flash_.purgeDependencyOnElmtId(rmElmtId)
/* 284.549 */        
/* 284.550 */        this.stateVarDecl_enemy_flash_.purgeDependencyOnElmtId(rmElmtId)
/* 284.551 */        
/* 284.552 */        this.stateVarDecl_onHit_.purgeDependencyOnElmtId(rmElmtId)
/* 284.553 */        
/* 284.554 */        this.stateVarDecl_step_.purgeDependencyOnElmtId(rmElmtId)
/* 284.555 */        
/* 284.556 */    }
/* 284.557 */    
/* 284.558 */    
/* 284.559 */    public func forceRerender(deep!: Bool = false) {
/* 284.560 */        this.forceCompleteRerender(deep)
/* 284.561 */    }
/* 284.562 */    
/* 284.563 */    
/* 284.564 */}
/* 284.565 */
/* ===== End of the Emit ===== */

//标题页绘制组件
/* ===== Emitted by MacroCall @Component in draw.cj:547:1 ===== */
/* 547.1 */public class WelcomePage <: CustomView {
/* 547.2 */    
/* 547.3 */    
/* 547.4 */    private var stateVarDecl_step_: ObservedProperty < Int64 >
/* 547.5 */    
/* 547.6 */    
/* 547.7 */    private mut prop step: Int64 {
/* 547.8 */        get() {
/* 547.9 */            return this.stateVarDecl_step_.get()
/* 547.10 */        }
/* 547.11 */        set(v) {
/* 547.12 */            this.stateVarDecl_step_.set(v)
/* 547.13 */        }
/* 547.14 */    }
/* 547.15 */    
/* 547.16 */    
/* 547.17 */    private var stateVarDecl_WelFontOpacity_: ObservedProperty < Float64 >= ObservedProperty < Float64 >("stateVarDecl_WelFontOpacity_", 0.8)
/* 547.18 */    
/* 547.19 */    
/* 547.20 */    private mut prop WelFontOpacity: Float64 {
/* 547.21 */        get() {
/* 547.22 */            return this.stateVarDecl_WelFontOpacity_.get()
/* 547.23 */        }
/* 547.24 */        set(v) {
/* 547.25 */            this.stateVarDecl_WelFontOpacity_.set(v)
/* 547.26 */        }
/* 547.27 */    }
/* 547.28 */    
/* 547.29 */    
/* 547.30 */    private var stateVarDecl_WelOpacity_: ObservedProperty < Float64 >= ObservedProperty < Float64 >("stateVarDecl_WelOpacity_", 1.0)
/* 547.31 */    
/* 547.32 */    
/* 547.33 */    private mut prop WelOpacity: Float64 {
/* 547.34 */        get() {
/* 547.35 */            return this.stateVarDecl_WelOpacity_.get()
/* 547.36 */        }
/* 547.37 */        set(v) {
/* 547.38 */            this.stateVarDecl_WelOpacity_.set(v)
/* 547.39 */        }
/* 547.40 */    }
/* 547.41 */    
/* 547.42 */    
/* 547.43 */    let animateOpt = AnimateParam(duration: 300, curve: Curve.Linear, delay: 0, iterations: - 1, playMode: PlayMode.Alternate, onFinish: { => AppLog.info("onfinish") }, expectedFrameRateRange: ExpectedFrameRateRange(min: 20, max: 120, expected: 90))
/* 547.44 */    
/* 547.45 */    
/* 547.46 */    
/* 547.47 */    public func build() {
/* 547.48 */        
/* 547.49 */        this.observeComponentCreation({ elmtId, isInitialRender =>
/* 547.50 */            Stack { this.observeComponentCreation({ elmtId, isInitialRender => Image(__GenerateResource__("", "", "", app.media.titleBackground, "app.media.titleBackground",[], 20000)).height(400).width(860).position(x: 0, y: 0) })
/* 547.51 */            this.observeComponentCreation({ elmtId, isInitialRender => Text("Touch Screen To Start.").fontSize(50).position(x: 200, y: 300).height(35).width(450).opacity(this.WelFontOpacity).fontFamily(__GenerateResource__("", "", "", app.string.ProggyTinySZ, "app.string.ProggyTinySZ",[], 10003)).onAppear({ => animateTo(AnimateParam(duration: 600, curve: Curve.Linear, delay: 0, iterations: - 1, playMode: PlayMode.Alternate, onFinish: { => AppLog.info("onfinish") }, expectedFrameRateRange: ExpectedFrameRateRange(min: 20, max: 120, expected: 90)), { => this.WelFontOpacity = 0.3 }) }) }) }.onClick({ evt => animateTo(AnimateParam(duration: 600, curve: Curve.Linear, delay: 0, iterations: 1, playMode: PlayMode.Alternate, onFinish: { => step = 1 }, expectedFrameRateRange: ExpectedFrameRateRange(min: 20, max: 120, expected: 90)), { => this.WelOpacity = 0.0 }) }).opacity(WelOpacity)
/* 547.52 */        })
/* 547.53 */        
/* 547.54 */        ()
/* 547.55 */        
/* 547.56 */    }
/* 547.57 */    
/* 547.58 */    
/* 547.59 */    public init(parent: Option < CustomView >, step!: ObservedProperty < Int64 >, WelFontOpacity!: Option < ObservedProperty < Float64 >>= None, WelOpacity!: Option < ObservedProperty < Float64 >>= None, localStorage!: Option < LocalStorage >= None) {
/* 547.60 */        super(parent, localStorage)
/* 547.61 */        
/* 547.62 */        
/* 547.63 */        this.stateVarDecl_step_ = step
/* 547.64 */        
/* 547.65 */        match(WelFontOpacity) {
/* 547.66 */            case Some(v) => this.stateVarDecl_WelFontOpacity_ = ObservedProperty < Float64 >("stateVarDecl_WelFontOpacity_", v.get())
/* 547.67 */            case _ =>()
/* 547.68 */        }
/* 547.69 */        
/* 547.70 */        match(WelOpacity) {
/* 547.71 */            case Some(v) => this.stateVarDecl_WelOpacity_ = ObservedProperty < Float64 >("stateVarDecl_WelOpacity_", v.get())
/* 547.72 */            case _ =>()
/* 547.73 */        }
/* 547.74 */        
/* 547.75 */        
/* 547.76 */        this.stateVarDecl_step_.subscribeEx(this)
/* 547.77 */        
/* 547.78 */        this.stateVarDecl_WelFontOpacity_.subscribeEx(this)
/* 547.79 */        
/* 547.80 */        this.stateVarDecl_WelOpacity_.subscribeEx(this)
/* 547.81 */        
/* 547.82 */        SubscriberManager.getInstance().add(this)
/* 547.83 */        
/* 547.84 */        
/* 547.85 */        registerSelf()
/* 547.86 */        parent?.addChildById(id(), this)
/* 547.87 */    }
/* 547.88 */    
/* 547.89 */    
/* 547.90 */    public override func aboutToBeDeleted() {
/* 547.91 */        
/* 547.92 */        this.stateVarDecl_step_.unsubscribeEx(this)
/* 547.93 */        
/* 547.94 */        this.stateVarDecl_WelFontOpacity_.unsubscribeEx(this)
/* 547.95 */        
/* 547.96 */        this.stateVarDecl_WelOpacity_.unsubscribeEx(this)
/* 547.97 */        
/* 547.98 */        SubscriberManager.getInstance().delete(this)
/* 547.99 */        this.aboutToBeDeletedInternal()
/* 547.100 */    }
/* 547.101 */    
/* 547.102 */    
/* 547.103 */    func updateWithValueParams(step!: Option < Int64 >= Option < Int64 >.None, WelFontOpacity!: Option < Float64 >= Option < Float64 >.None, WelOpacity!: Option < Float64 >= Option < Float64 >.None): Unit {
/* 547.104 */        
/* 547.105 */        match(WelFontOpacity) {
/* 547.106 */            case Some(v) => this.WelFontOpacity = v
/* 547.107 */            case _ =>()
/* 547.108 */        }
/* 547.109 */        
/* 547.110 */        match(WelOpacity) {
/* 547.111 */            case Some(v) => this.WelOpacity = v
/* 547.112 */            case _ =>()
/* 547.113 */        }
/* 547.114 */        
/* 547.115 */    }
/* 547.116 */    
/* 547.117 */    
/* 547.118 */    public func rerender() {
/* 547.119 */        this.updateDirtyElements()
/* 547.120 */    }
/* 547.121 */    
/* 547.122 */    
/* 547.123 */    public func purgeVariableDependenciesOnElmtId(rmElmtId: Int64) {
/* 547.124 */        
/* 547.125 */        this.stateVarDecl_step_.purgeDependencyOnElmtId(rmElmtId)
/* 547.126 */        
/* 547.127 */        this.stateVarDecl_WelFontOpacity_.purgeDependencyOnElmtId(rmElmtId)
/* 547.128 */        
/* 547.129 */        this.stateVarDecl_WelOpacity_.purgeDependencyOnElmtId(rmElmtId)
/* 547.130 */        
/* 547.131 */    }
/* 547.132 */    
/* 547.133 */    
/* 547.134 */    public func forceRerender(deep!: Bool = false) {
/* 547.135 */        this.forceCompleteRerender(deep)
/* 547.136 */    }
/* 547.137 */    
/* 547.138 */    
/* 547.139 */}
/* 547.140 */
/* ===== End of the Emit ===== */

//菜单页绘制组件
/* ===== Emitted by MacroCall @Component in draw.cj:636:1 ===== */
/* 636.1 */public class MenuPage <: CustomView {
/* 636.2 */    
/* 636.3 */    
/* 636.4 */    var MenuFlag: Bool = true
/* 636.5 */    
/* 636.6 */    
/* 636.7 */    private var stateVarDecl_step_: ObservedProperty < Int64 >
/* 636.8 */    
/* 636.9 */    
/* 636.10 */    private mut prop step: Int64 {
/* 636.11 */        get() {
/* 636.12 */            return this.stateVarDecl_step_.get()
/* 636.13 */        }
/* 636.14 */        set(v) {
/* 636.15 */            this.stateVarDecl_step_.set(v)
/* 636.16 */        }
/* 636.17 */    }
/* 636.18 */    
/* 636.19 */    
/* 636.20 */    private var stateVarDecl_pre_step_: ObservedProperty < Int64 >
/* 636.21 */    
/* 636.22 */    
/* 636.23 */    private mut prop pre_step: Int64 {
/* 636.24 */        get() {
/* 636.25 */            return this.stateVarDecl_pre_step_.get()
/* 636.26 */        }
/* 636.27 */        set(v) {
/* 636.28 */            this.stateVarDecl_pre_step_.set(v)
/* 636.29 */        }
/* 636.30 */    }
/* 636.31 */    
/* 636.32 */    
/* 636.33 */    private var stateVarDecl_MenuOpacity_: ObservedProperty < Float64 >= ObservedProperty < Float64 >("stateVarDecl_MenuOpacity_", 0.0)
/* 636.34 */    
/* 636.35 */    
/* 636.36 */    private mut prop MenuOpacity: Float64 {
/* 636.37 */        get() {
/* 636.38 */            return this.stateVarDecl_MenuOpacity_.get()
/* 636.39 */        }
/* 636.40 */        set(v) {
/* 636.41 */            this.stateVarDecl_MenuOpacity_.set(v)
/* 636.42 */        }
/* 636.43 */    }
/* 636.44 */    
/* 636.45 */    
/* 636.46 */    private var stateVarDecl_PVP_Opacity_: ObservedProperty < Float64 >= ObservedProperty < Float64 >("stateVarDecl_PVP_Opacity_", 0.0)
/* 636.47 */    
/* 636.48 */    
/* 636.49 */    private mut prop PVP_Opacity: Float64 {
/* 636.50 */        get() {
/* 636.51 */            return this.stateVarDecl_PVP_Opacity_.get()
/* 636.52 */        }
/* 636.53 */        set(v) {
/* 636.54 */            this.stateVarDecl_PVP_Opacity_.set(v)
/* 636.55 */        }
/* 636.56 */    }
/* 636.57 */    
/* 636.58 */    
/* 636.59 */    private var stateVarDecl_PVE_Opacity_: ObservedProperty < Float64 >= ObservedProperty < Float64 >("stateVarDecl_PVE_Opacity_", 1.0)
/* 636.60 */    
/* 636.61 */    
/* 636.62 */    private mut prop PVE_Opacity: Float64 {
/* 636.63 */        get() {
/* 636.64 */            return this.stateVarDecl_PVE_Opacity_.get()
/* 636.65 */        }
/* 636.66 */        set(v) {
/* 636.67 */            this.stateVarDecl_PVE_Opacity_.set(v)
/* 636.68 */        }
/* 636.69 */    }
/* 636.70 */    
/* 636.71 */    
/* 636.72 */    private var stateVarDecl_Learn_Opacity_: ObservedProperty < Float64 >= ObservedProperty < Float64 >("stateVarDecl_Learn_Opacity_", 0.0)
/* 636.73 */    
/* 636.74 */    
/* 636.75 */    private mut prop Learn_Opacity: Float64 {
/* 636.76 */        get() {
/* 636.77 */            return this.stateVarDecl_Learn_Opacity_.get()
/* 636.78 */        }
/* 636.79 */        set(v) {
/* 636.80 */            this.stateVarDecl_Learn_Opacity_.set(v)
/* 636.81 */        }
/* 636.82 */    }
/* 636.83 */    
/* 636.84 */    
/* 636.85 */    private var stateVarDecl_PVP_Button_X_: ObservedProperty < Int64 >= ObservedProperty < Int64 >("stateVarDecl_PVP_Button_X_", 325)
/* 636.86 */    
/* 636.87 */    
/* 636.88 */    private mut prop PVP_Button_X: Int64 {
/* 636.89 */        get() {
/* 636.90 */            return this.stateVarDecl_PVP_Button_X_.get()
/* 636.91 */        }
/* 636.92 */        set(v) {
/* 636.93 */            this.stateVarDecl_PVP_Button_X_.set(v)
/* 636.94 */        }
/* 636.95 */    }
/* 636.96 */    
/* 636.97 */    
/* 636.98 */    private var stateVarDecl_PVP_Button_Y_: ObservedProperty < Int64 >= ObservedProperty < Int64 >("stateVarDecl_PVP_Button_Y_", 150)
/* 636.99 */    
/* 636.100 */    
/* 636.101 */    private mut prop PVP_Button_Y: Int64 {
/* 636.102 */        get() {
/* 636.103 */            return this.stateVarDecl_PVP_Button_Y_.get()
/* 636.104 */        }
/* 636.105 */        set(v) {
/* 636.106 */            this.stateVarDecl_PVP_Button_Y_.set(v)
/* 636.107 */        }
/* 636.108 */    }
/* 636.109 */    
/* 636.110 */    
/* 636.111 */    private var stateVarDecl_Learn_Button_X_: ObservedProperty < Int64 >= ObservedProperty < Int64 >("stateVarDecl_Learn_Button_X_", 325)
/* 636.112 */    
/* 636.113 */    
/* 636.114 */    private mut prop Learn_Button_X: Int64 {
/* 636.115 */        get() {
/* 636.116 */            return this.stateVarDecl_Learn_Button_X_.get()
/* 636.117 */        }
/* 636.118 */        set(v) {
/* 636.119 */            this.stateVarDecl_Learn_Button_X_.set(v)
/* 636.120 */        }
/* 636.121 */    }
/* 636.122 */    
/* 636.123 */    
/* 636.124 */    private var stateVarDecl_Learn_Button_Y_: ObservedProperty < Int64 >= ObservedProperty < Int64 >("stateVarDecl_Learn_Button_Y_", 150)
/* 636.125 */    
/* 636.126 */    
/* 636.127 */    private mut prop Learn_Button_Y: Int64 {
/* 636.128 */        get() {
/* 636.129 */            return this.stateVarDecl_Learn_Button_Y_.get()
/* 636.130 */        }
/* 636.131 */        set(v) {
/* 636.132 */            this.stateVarDecl_Learn_Button_Y_.set(v)
/* 636.133 */        }
/* 636.134 */    }
/* 636.135 */    
/* 636.136 */    
/* 636.137 */    
/* 636.138 */    public func build() {
/* 636.139 */        
/* 636.140 */        this.observeComponentCreation({ elmtId, isInitialRender =>
/* 636.141 */            Stack { this.observeComponentCreation({ elmtId, isInitialRender => Image(__GenerateResource__("", "", "", app.media.background4, "app.media.background4",[], 20000)).height(400).width(860).position(x: 0, y: - 5) })
/* 636.142 */            this.observeComponentCreation({ elmtId, isInitialRender => Image(__GenerateResource__("", "", "", app.media.Menu_border, "app.media.Menu_border",[], 20000)).height(400).width(860).position(x: 0, y: - 5) })
/* 636.143 */            this.observeComponentCreation({ elmtId, isInitialRender => Image(__GenerateResource__("", "", "", app.media.Menu_Button_PVP, "app.media.Menu_Button_PVP",[], 20000)).height(86).width(203).position(x: PVP_Button_X, y: PVP_Button_Y).objectFit(ImageFit.Contain).opacity(this.PVP_Opacity).onClick({ evt => animateTo(AnimateParam(duration: 300, curve: Curve.Linear, delay: 0, iterations: 3, playMode: PlayMode.Alternate, onFinish: { => this.pre_step = 2
/* 636.144 */                this.step = 2
/* 636.145 */                PVP_Button_X = 325
/* 636.146 */                PVP_Button_Y = 150
/* 636.147 */                Learn_Button_X = 325
/* 636.148 */            Learn_Button_Y = 150 }, expectedFrameRateRange: ExpectedFrameRateRange(min: 20, max: 120, expected: 90)), { => PVP_Opacity = 0.3 }) }) })
/* 636.149 */            this.observeComponentCreation({ elmtId, isInitialRender => Image(__GenerateResource__("", "", "", app.media.Menu_Button_Learn, "app.media.Menu_Button_Learn",[], 20000)).height(86).width(203).position(x: Learn_Button_X, y: Learn_Button_Y).objectFit(ImageFit.Contain).opacity(this.Learn_Opacity).onClick({ evt => animateTo(AnimateParam(duration: 300, curve: Curve.Linear, delay: 0, iterations: 3, playMode: PlayMode.Alternate, onFinish: { => this.step = 5
/* 636.150 */                PVP_Button_X = 325
/* 636.151 */                PVP_Button_Y = 150
/* 636.152 */                Learn_Button_X = 325
/* 636.153 */            Learn_Button_Y = 150 }, expectedFrameRateRange: ExpectedFrameRateRange(min: 20, max: 120, expected: 90)), { => this.Learn_Opacity = 0.3 }) }) })
/* 636.154 */            this.observeComponentCreation({ elmtId, isInitialRender => Image(__GenerateResource__("", "", "", app.media.Menu_Button_PVE, "app.media.Menu_Button_PVE",[], 20000)).height(86).width(203).position(x: 325, y: 150).objectFit(ImageFit.Contain).opacity(this.PVE_Opacity).onClick({ evt => animateTo(AnimateParam(duration: 300, curve: Curve.Linear, delay: 0, iterations: 3, playMode: PlayMode.Alternate, onFinish: { => this.pre_step = 3
/* 636.155 */                this.step = 3
/* 636.156 */                PVP_Button_X = 325
/* 636.157 */                PVP_Button_Y = 150
/* 636.158 */                Learn_Button_X = 325
/* 636.159 */            Learn_Button_Y = 150 }, expectedFrameRateRange: ExpectedFrameRateRange(min: 20, max: 120, expected: 90)), { => this.PVE_Opacity = 0.3 }) }) }) }.opacity(this.MenuOpacity).onAppear({ => animateTo(AnimateParam(duration: 300, curve: Curve.EaseIn, delay: 0, iterations: 1, playMode: PlayMode.Alternate, onFinish: { => animateTo(AnimateParam(duration: 300, curve: Curve.EaseIn, delay: 0, iterations: 1, playMode: PlayMode.Alternate, onFinish: { => AppLog.info("onfinish") }, expectedFrameRateRange: ExpectedFrameRateRange(min: 20, max: 120, expected: 90)), { => PVP_Opacity = 1.0
/* 636.160 */                Learn_Opacity = 1.0
/* 636.161 */                PVP_Button_X = 150
/* 636.162 */                PVP_Button_Y = 50
/* 636.163 */                Learn_Button_X = 500
/* 636.164 */            Learn_Button_Y = 250 }) }, expectedFrameRateRange: ExpectedFrameRateRange(min: 20, max: 120, expected: 90)), { => this.MenuOpacity = 1.0 }) })
/* 636.165 */        })
/* 636.166 */        
/* 636.167 */        ()
/* 636.168 */        
/* 636.169 */    }
/* 636.170 */    
/* 636.171 */    
/* 636.172 */    public init(parent: Option < CustomView >, MenuFlag!: Option < ObservedProperty < Bool >>= None, step!: ObservedProperty < Int64 >, pre_step!: ObservedProperty < Int64 >, MenuOpacity!: Option < ObservedProperty < Float64 >>= None, PVP_Opacity!: Option < ObservedProperty < Float64 >>= None, PVE_Opacity!: Option < ObservedProperty < Float64 >>= None, Learn_Opacity!: Option < ObservedProperty < Float64 >>= None, PVP_Button_X!: Option < ObservedProperty < Int64 >>= None, PVP_Button_Y!: Option < ObservedProperty < Int64 >>= None, Learn_Button_X!: Option < ObservedProperty < Int64 >>= None, Learn_Button_Y!: Option < ObservedProperty < Int64 >>= None, localStorage!: Option < LocalStorage >= None) {
/* 636.173 */        super(parent, localStorage)
/* 636.174 */        
/* 636.175 */        
/* 636.176 */        match(MenuFlag) {
/* 636.177 */            case Some(v) => this.MenuFlag = v.get()
/* 636.178 */            case _ =>()
/* 636.179 */        }
/* 636.180 */        
/* 636.181 */        this.stateVarDecl_step_ = step
/* 636.182 */        
/* 636.183 */        this.stateVarDecl_pre_step_ = pre_step
/* 636.184 */        
/* 636.185 */        match(MenuOpacity) {
/* 636.186 */            case Some(v) => this.stateVarDecl_MenuOpacity_ = ObservedProperty < Float64 >("stateVarDecl_MenuOpacity_", v.get())
/* 636.187 */            case _ =>()
/* 636.188 */        }
/* 636.189 */        
/* 636.190 */        match(PVP_Opacity) {
/* 636.191 */            case Some(v) => this.stateVarDecl_PVP_Opacity_ = ObservedProperty < Float64 >("stateVarDecl_PVP_Opacity_", v.get())
/* 636.192 */            case _ =>()
/* 636.193 */        }
/* 636.194 */        
/* 636.195 */        match(PVE_Opacity) {
/* 636.196 */            case Some(v) => this.stateVarDecl_PVE_Opacity_ = ObservedProperty < Float64 >("stateVarDecl_PVE_Opacity_", v.get())
/* 636.197 */            case _ =>()
/* 636.198 */        }
/* 636.199 */        
/* 636.200 */        match(Learn_Opacity) {
/* 636.201 */            case Some(v) => this.stateVarDecl_Learn_Opacity_ = ObservedProperty < Float64 >("stateVarDecl_Learn_Opacity_", v.get())
/* 636.202 */            case _ =>()
/* 636.203 */        }
/* 636.204 */        
/* 636.205 */        match(PVP_Button_X) {
/* 636.206 */            case Some(v) => this.stateVarDecl_PVP_Button_X_ = ObservedProperty < Int64 >("stateVarDecl_PVP_Button_X_", v.get())
/* 636.207 */            case _ =>()
/* 636.208 */        }
/* 636.209 */        
/* 636.210 */        match(PVP_Button_Y) {
/* 636.211 */            case Some(v) => this.stateVarDecl_PVP_Button_Y_ = ObservedProperty < Int64 >("stateVarDecl_PVP_Button_Y_", v.get())
/* 636.212 */            case _ =>()
/* 636.213 */        }
/* 636.214 */        
/* 636.215 */        match(Learn_Button_X) {
/* 636.216 */            case Some(v) => this.stateVarDecl_Learn_Button_X_ = ObservedProperty < Int64 >("stateVarDecl_Learn_Button_X_", v.get())
/* 636.217 */            case _ =>()
/* 636.218 */        }
/* 636.219 */        
/* 636.220 */        match(Learn_Button_Y) {
/* 636.221 */            case Some(v) => this.stateVarDecl_Learn_Button_Y_ = ObservedProperty < Int64 >("stateVarDecl_Learn_Button_Y_", v.get())
/* 636.222 */            case _ =>()
/* 636.223 */        }
/* 636.224 */        
/* 636.225 */        
/* 636.226 */        this.stateVarDecl_step_.subscribeEx(this)
/* 636.227 */        
/* 636.228 */        this.stateVarDecl_pre_step_.subscribeEx(this)
/* 636.229 */        
/* 636.230 */        this.stateVarDecl_MenuOpacity_.subscribeEx(this)
/* 636.231 */        
/* 636.232 */        this.stateVarDecl_PVP_Opacity_.subscribeEx(this)
/* 636.233 */        
/* 636.234 */        this.stateVarDecl_PVE_Opacity_.subscribeEx(this)
/* 636.235 */        
/* 636.236 */        this.stateVarDecl_Learn_Opacity_.subscribeEx(this)
/* 636.237 */        
/* 636.238 */        this.stateVarDecl_PVP_Button_X_.subscribeEx(this)
/* 636.239 */        
/* 636.240 */        this.stateVarDecl_PVP_Button_Y_.subscribeEx(this)
/* 636.241 */        
/* 636.242 */        this.stateVarDecl_Learn_Button_X_.subscribeEx(this)
/* 636.243 */        
/* 636.244 */        this.stateVarDecl_Learn_Button_Y_.subscribeEx(this)
/* 636.245 */        
/* 636.246 */        SubscriberManager.getInstance().add(this)
/* 636.247 */        
/* 636.248 */        
/* 636.249 */        registerSelf()
/* 636.250 */        parent?.addChildById(id(), this)
/* 636.251 */    }
/* 636.252 */    
/* 636.253 */    
/* 636.254 */    public override func aboutToBeDeleted() {
/* 636.255 */        
/* 636.256 */        this.stateVarDecl_step_.unsubscribeEx(this)
/* 636.257 */        
/* 636.258 */        this.stateVarDecl_pre_step_.unsubscribeEx(this)
/* 636.259 */        
/* 636.260 */        this.stateVarDecl_MenuOpacity_.unsubscribeEx(this)
/* 636.261 */        
/* 636.262 */        this.stateVarDecl_PVP_Opacity_.unsubscribeEx(this)
/* 636.263 */        
/* 636.264 */        this.stateVarDecl_PVE_Opacity_.unsubscribeEx(this)
/* 636.265 */        
/* 636.266 */        this.stateVarDecl_Learn_Opacity_.unsubscribeEx(this)
/* 636.267 */        
/* 636.268 */        this.stateVarDecl_PVP_Button_X_.unsubscribeEx(this)
/* 636.269 */        
/* 636.270 */        this.stateVarDecl_PVP_Button_Y_.unsubscribeEx(this)
/* 636.271 */        
/* 636.272 */        this.stateVarDecl_Learn_Button_X_.unsubscribeEx(this)
/* 636.273 */        
/* 636.274 */        this.stateVarDecl_Learn_Button_Y_.unsubscribeEx(this)
/* 636.275 */        
/* 636.276 */        SubscriberManager.getInstance().delete(this)
/* 636.277 */        this.aboutToBeDeletedInternal()
/* 636.278 */    }
/* 636.279 */    
/* 636.280 */    
/* 636.281 */    func updateWithValueParams(MenuFlag!: Option < Bool >= Option < Bool >.None, step!: Option < Int64 >= Option < Int64 >.None, pre_step!: Option < Int64 >= Option < Int64 >.None, MenuOpacity!: Option < Float64 >= Option < Float64 >.None, PVP_Opacity!: Option < Float64 >= Option < Float64 >.None, PVE_Opacity!: Option < Float64 >= Option < Float64 >.None, Learn_Opacity!: Option < Float64 >= Option < Float64 >.None, PVP_Button_X!: Option < Int64 >= Option < Int64 >.None, PVP_Button_Y!: Option < Int64 >= Option < Int64 >.None, Learn_Button_X!: Option < Int64 >= Option < Int64 >.None, Learn_Button_Y!: Option < Int64 >= Option < Int64 >.None): Unit {
/* 636.282 */        
/* 636.283 */        match(MenuOpacity) {
/* 636.284 */            case Some(v) => this.MenuOpacity = v
/* 636.285 */            case _ =>()
/* 636.286 */        }
/* 636.287 */        
/* 636.288 */        match(PVP_Opacity) {
/* 636.289 */            case Some(v) => this.PVP_Opacity = v
/* 636.290 */            case _ =>()
/* 636.291 */        }
/* 636.292 */        
/* 636.293 */        match(PVE_Opacity) {
/* 636.294 */            case Some(v) => this.PVE_Opacity = v
/* 636.295 */            case _ =>()
/* 636.296 */        }
/* 636.297 */        
/* 636.298 */        match(Learn_Opacity) {
/* 636.299 */            case Some(v) => this.Learn_Opacity = v
/* 636.300 */            case _ =>()
/* 636.301 */        }
/* 636.302 */        
/* 636.303 */        match(PVP_Button_X) {
/* 636.304 */            case Some(v) => this.PVP_Button_X = v
/* 636.305 */            case _ =>()
/* 636.306 */        }
/* 636.307 */        
/* 636.308 */        match(PVP_Button_Y) {
/* 636.309 */            case Some(v) => this.PVP_Button_Y = v
/* 636.310 */            case _ =>()
/* 636.311 */        }
/* 636.312 */        
/* 636.313 */        match(Learn_Button_X) {
/* 636.314 */            case Some(v) => this.Learn_Button_X = v
/* 636.315 */            case _ =>()
/* 636.316 */        }
/* 636.317 */        
/* 636.318 */        match(Learn_Button_Y) {
/* 636.319 */            case Some(v) => this.Learn_Button_Y = v
/* 636.320 */            case _ =>()
/* 636.321 */        }
/* 636.322 */        
/* 636.323 */    }
/* 636.324 */    
/* 636.325 */    
/* 636.326 */    public func rerender() {
/* 636.327 */        this.updateDirtyElements()
/* 636.328 */    }
/* 636.329 */    
/* 636.330 */    
/* 636.331 */    public func purgeVariableDependenciesOnElmtId(rmElmtId: Int64) {
/* 636.332 */        
/* 636.333 */        this.stateVarDecl_step_.purgeDependencyOnElmtId(rmElmtId)
/* 636.334 */        
/* 636.335 */        this.stateVarDecl_pre_step_.purgeDependencyOnElmtId(rmElmtId)
/* 636.336 */        
/* 636.337 */        this.stateVarDecl_MenuOpacity_.purgeDependencyOnElmtId(rmElmtId)
/* 636.338 */        
/* 636.339 */        this.stateVarDecl_PVP_Opacity_.purgeDependencyOnElmtId(rmElmtId)
/* 636.340 */        
/* 636.341 */        this.stateVarDecl_PVE_Opacity_.purgeDependencyOnElmtId(rmElmtId)
/* 636.342 */        
/* 636.343 */        this.stateVarDecl_Learn_Opacity_.purgeDependencyOnElmtId(rmElmtId)
/* 636.344 */        
/* 636.345 */        this.stateVarDecl_PVP_Button_X_.purgeDependencyOnElmtId(rmElmtId)
/* 636.346 */        
/* 636.347 */        this.stateVarDecl_PVP_Button_Y_.purgeDependencyOnElmtId(rmElmtId)
/* 636.348 */        
/* 636.349 */        this.stateVarDecl_Learn_Button_X_.purgeDependencyOnElmtId(rmElmtId)
/* 636.350 */        
/* 636.351 */        this.stateVarDecl_Learn_Button_Y_.purgeDependencyOnElmtId(rmElmtId)
/* 636.352 */        
/* 636.353 */    }
/* 636.354 */    
/* 636.355 */    
/* 636.356 */    public func forceRerender(deep!: Bool = false) {
/* 636.357 */        this.forceCompleteRerender(deep)
/* 636.358 */    }
/* 636.359 */    
/* 636.360 */    
/* 636.361 */}
/* 636.362 */
/* ===== End of the Emit ===== */

//结束页绘制组件
/* ===== Emitted by MacroCall @Component in draw.cj:822:1 ===== */
/* 822.1 */public class GameEndPage <: CustomView {
/* 822.2 */    
/* 822.3 */    
/* 822.4 */    private var stateVarDecl_game_: ObservedProperty < FourAscendGame >
/* 822.5 */    
/* 822.6 */    
/* 822.7 */    private mut prop game: FourAscendGame {
/* 822.8 */        get() {
/* 822.9 */            return this.stateVarDecl_game_.get()
/* 822.10 */        }
/* 822.11 */        set(v) {
/* 822.12 */            this.stateVarDecl_game_.set(v)
/* 822.13 */        }
/* 822.14 */    }
/* 822.15 */    
/* 822.16 */    
/* 822.17 */    private var stateVarDecl_game_state_: ObservedProperty < Board >
/* 822.18 */    
/* 822.19 */    
/* 822.20 */    private mut prop game_state: Board {
/* 822.21 */        get() {
/* 822.22 */            return this.stateVarDecl_game_state_.get()
/* 822.23 */        }
/* 822.24 */        set(v) {
/* 822.25 */            this.stateVarDecl_game_state_.set(v)
/* 822.26 */        }
/* 822.27 */    }
/* 822.28 */    
/* 822.29 */    
/* 822.30 */    private var stateVarDecl_data_: ObservedProperty < ObservedMatrix >
/* 822.31 */    
/* 822.32 */    
/* 822.33 */    private mut prop data: ObservedMatrix {
/* 822.34 */        get() {
/* 822.35 */            return this.stateVarDecl_data_.get()
/* 822.36 */        }
/* 822.37 */        set(v) {
/* 822.38 */            this.stateVarDecl_data_.set(v)
/* 822.39 */        }
/* 822.40 */    }
/* 822.41 */    
/* 822.42 */    
/* 822.43 */    private var stateVarDecl_ai_: ObservedProperty < StupidFourAscendPlayer >
/* 822.44 */    
/* 822.45 */    
/* 822.46 */    private mut prop ai: StupidFourAscendPlayer {
/* 822.47 */        get() {
/* 822.48 */            return this.stateVarDecl_ai_.get()
/* 822.49 */        }
/* 822.50 */        set(v) {
/* 822.51 */            this.stateVarDecl_ai_.set(v)
/* 822.52 */        }
/* 822.53 */    }
/* 822.54 */    
/* 822.55 */    
/* 822.56 */    private var stateVarDecl_step_: ObservedProperty < Int64 >
/* 822.57 */    
/* 822.58 */    
/* 822.59 */    private mut prop step: Int64 {
/* 822.60 */        get() {
/* 822.61 */            return this.stateVarDecl_step_.get()
/* 822.62 */        }
/* 822.63 */        set(v) {
/* 822.64 */            this.stateVarDecl_step_.set(v)
/* 822.65 */        }
/* 822.66 */    }
/* 822.67 */    
/* 822.68 */    
/* 822.69 */    private var stateVarDecl_WhiteAttackPos_: ObservedProperty < ObservedArrayList < Array < Int64 >>>
/* 822.70 */    
/* 822.71 */    
/* 822.72 */    private mut prop WhiteAttackPos: ObservedArrayList < Array < Int64 >> {
/* 822.73 */        get() {
/* 822.74 */            return this.stateVarDecl_WhiteAttackPos_.get()
/* 822.75 */        }
/* 822.76 */        set(v) {
/* 822.77 */            this.stateVarDecl_WhiteAttackPos_.set(v)
/* 822.78 */        }
/* 822.79 */    }
/* 822.80 */    
/* 822.81 */    
/* 822.82 */    private var stateVarDecl_BlackAttackPos_: ObservedProperty < ObservedArrayList < Array < Int64 >>>
/* 822.83 */    
/* 822.84 */    
/* 822.85 */    private mut prop BlackAttackPos: ObservedArrayList < Array < Int64 >> {
/* 822.86 */        get() {
/* 822.87 */            return this.stateVarDecl_BlackAttackPos_.get()
/* 822.88 */        }
/* 822.89 */        set(v) {
/* 822.90 */            this.stateVarDecl_BlackAttackPos_.set(v)
/* 822.91 */        }
/* 822.92 */    }
/* 822.93 */    
/* 822.94 */    
/* 822.95 */    private var stateVarDecl_animateFlag_: ObservedProperty < Bool >
/* 822.96 */    
/* 822.97 */    
/* 822.98 */    private mut prop animateFlag: Bool {
/* 822.99 */        get() {
/* 822.100 */            return this.stateVarDecl_animateFlag_.get()
/* 822.101 */        }
/* 822.102 */        set(v) {
/* 822.103 */            this.stateVarDecl_animateFlag_.set(v)
/* 822.104 */        }
/* 822.105 */    }
/* 822.106 */    
/* 822.107 */    
/* 822.108 */    private var stateVarDecl_player_: ObservedProperty < Int64 >
/* 822.109 */    
/* 822.110 */    
/* 822.111 */    private mut prop player: Int64 {
/* 822.112 */        get() {
/* 822.113 */            return this.stateVarDecl_player_.get()
/* 822.114 */        }
/* 822.115 */        set(v) {
/* 822.116 */            this.stateVarDecl_player_.set(v)
/* 822.117 */        }
/* 822.118 */    }
/* 822.119 */    
/* 822.120 */    
/* 822.121 */    private var stateVarDecl_backto_: ObservedProperty < Int64 >
/* 822.122 */    
/* 822.123 */    
/* 822.124 */    private mut prop backto: Int64 {
/* 822.125 */        get() {
/* 822.126 */            return this.stateVarDecl_backto_.get()
/* 822.127 */        }
/* 822.128 */        set(v) {
/* 822.129 */            this.stateVarDecl_backto_.set(v)
/* 822.130 */        }
/* 822.131 */    }
/* 822.132 */    
/* 822.133 */    
/* 822.134 */    private var stateVarDecl_P1_angle_: ObservedProperty < Float32 >= ObservedProperty < Float32 >("stateVarDecl_P1_angle_", 10.0)
/* 822.135 */    
/* 822.136 */    
/* 822.137 */    private mut prop P1_angle: Float32 {
/* 822.138 */        get() {
/* 822.139 */            return this.stateVarDecl_P1_angle_.get()
/* 822.140 */        }
/* 822.141 */        set(v) {
/* 822.142 */            this.stateVarDecl_P1_angle_.set(v)
/* 822.143 */        }
/* 822.144 */    }
/* 822.145 */    
/* 822.146 */    
/* 822.147 */    private var stateVarDecl_P1_height_: ObservedProperty < Int64 >= ObservedProperty < Int64 >("stateVarDecl_P1_height_", 40)
/* 822.148 */    
/* 822.149 */    
/* 822.150 */    private mut prop P1_height: Int64 {
/* 822.151 */        get() {
/* 822.152 */            return this.stateVarDecl_P1_height_.get()
/* 822.153 */        }
/* 822.154 */        set(v) {
/* 822.155 */            this.stateVarDecl_P1_height_.set(v)
/* 822.156 */        }
/* 822.157 */    }
/* 822.158 */    
/* 822.159 */    
/* 822.160 */    private var stateVarDecl_P1_width_: ObservedProperty < Int64 >= ObservedProperty < Int64 >("stateVarDecl_P1_width_", 80)
/* 822.161 */    
/* 822.162 */    
/* 822.163 */    private mut prop P1_width: Int64 {
/* 822.164 */        get() {
/* 822.165 */            return this.stateVarDecl_P1_width_.get()
/* 822.166 */        }
/* 822.167 */        set(v) {
/* 822.168 */            this.stateVarDecl_P1_width_.set(v)
/* 822.169 */        }
/* 822.170 */    }
/* 822.171 */    
/* 822.172 */    
/* 822.173 */    private var stateVarDecl_P2_angle_: ObservedProperty < Float32 >= ObservedProperty < Float32 >("stateVarDecl_P2_angle_", - 10.0)
/* 822.174 */    
/* 822.175 */    
/* 822.176 */    private mut prop P2_angle: Float32 {
/* 822.177 */        get() {
/* 822.178 */            return this.stateVarDecl_P2_angle_.get()
/* 822.179 */        }
/* 822.180 */        set(v) {
/* 822.181 */            this.stateVarDecl_P2_angle_.set(v)
/* 822.182 */        }
/* 822.183 */    }
/* 822.184 */    
/* 822.185 */    
/* 822.186 */    private var stateVarDecl_P2_height_: ObservedProperty < Int64 >= ObservedProperty < Int64 >("stateVarDecl_P2_height_", 40)
/* 822.187 */    
/* 822.188 */    
/* 822.189 */    private mut prop P2_height: Int64 {
/* 822.190 */        get() {
/* 822.191 */            return this.stateVarDecl_P2_height_.get()
/* 822.192 */        }
/* 822.193 */        set(v) {
/* 822.194 */            this.stateVarDecl_P2_height_.set(v)
/* 822.195 */        }
/* 822.196 */    }
/* 822.197 */    
/* 822.198 */    
/* 822.199 */    private var stateVarDecl_P2_width_: ObservedProperty < Int64 >= ObservedProperty < Int64 >("stateVarDecl_P2_width_", 80)
/* 822.200 */    
/* 822.201 */    
/* 822.202 */    private mut prop P2_width: Int64 {
/* 822.203 */        get() {
/* 822.204 */            return this.stateVarDecl_P2_width_.get()
/* 822.205 */        }
/* 822.206 */        set(v) {
/* 822.207 */            this.stateVarDecl_P2_width_.set(v)
/* 822.208 */        }
/* 822.209 */    }
/* 822.210 */    
/* 822.211 */    
/* 822.212 */    var P1_PosX: Int64 = 230
/* 822.213 */    
/* 822.214 */    
/* 822.215 */    var P1_PosY: Int64 = 150
/* 822.216 */    
/* 822.217 */    
/* 822.218 */    var P2_PosX: Int64 = 580
/* 822.219 */    
/* 822.220 */    
/* 822.221 */    var P2_PosY: Int64 = 150
/* 822.222 */    
/* 822.223 */    
/* 822.224 */    private var stateVarDecl_opa_: ObservedProperty < Float64 >= ObservedProperty < Float64 >("stateVarDecl_opa_", 0.0)
/* 822.225 */    
/* 822.226 */    
/* 822.227 */    private mut prop opa: Float64 {
/* 822.228 */        get() {
/* 822.229 */            return this.stateVarDecl_opa_.get()
/* 822.230 */        }
/* 822.231 */        set(v) {
/* 822.232 */            this.stateVarDecl_opa_.set(v)
/* 822.233 */        }
/* 822.234 */    }
/* 822.235 */    
/* 822.236 */    
/* 822.237 */    let animateOpt = AnimateParam(duration: 800, curve: Curve.Smooth, delay: 0, iterations: - 1, playMode: PlayMode.Alternate, onFinish: { => AppLog.info("onfinish") }, expectedFrameRateRange: ExpectedFrameRateRange(min: 20, max: 120, expected: 90))
/* 822.238 */    
/* 822.239 */    
/* 822.240 */    
/* 822.241 */    public func build() {
/* 822.242 */        
/* 822.243 */        this.observeComponentCreation({ elmtId, isInitialRender =>
/* 822.244 */            Stack { this.observeComponentCreation({ elmtId, isInitialRender => If { if(step == 4) {
/* 822.245 */                this.ifElseBranchUpdateFunction(0, { => this.observeComponentCreation({ elmtId, isInitialRender => Image(__GenerateResource__("", "", "", app.media.Game_End_Image, "app.media.Game_End_Image",[], 20000)).height(400).width(860).position(x: 0, y: 0) })
/* 822.246 */                this.observeComponentCreation({ elmtId, isInitialRender => If { if(game.hp1 > 0) {
/* 822.247 */                    this.ifElseBranchUpdateFunction(0, { => this.observeComponentCreation({ elmtId, isInitialRender => Text("P1 Wins !").position(x: 300, y: 50).fontSize(80).fontFamily(__GenerateResource__("", "", "", app.string.ProggyTinySZ, "app.string.ProggyTinySZ",[], 10003)) }) })
/* 822.248 */                }
/* 822.249 */                else {
/* 822.250 */                    this.ifElseBranchUpdateFunction(1, { => this.observeComponentCreation({ elmtId, isInitialRender => Text("P2 Wins !").position(x: 300, y: 50).fontSize(80).fontFamily(__GenerateResource__("", "", "", app.string.ProggyTinySZ, "app.string.ProggyTinySZ",[], 10003)) }) })
/* 822.251 */                }
/* 822.252 */            } })
/* 822.253 */            this.observeComponentCreation({ elmtId, isInitialRender => Image(__GenerateResource__("", "", "", app.media.player, "app.media.player",[], 20000)).animationStart(animateOpt).position(x: P1_PosX, y: P1_PosY).height(P1_height).width(P1_width).objectFit(ImageFit.Fill).rotate(P1_angle).onAppear({ => this.P1_angle = - 10.0
/* 822.254 */                this.P1_width = 62
/* 822.255 */            this.P1_height = 63 }).animationEnd() })
/* 822.256 */            this.observeComponentCreation({ elmtId, isInitialRender => Image(__GenerateResource__("", "", "", app.media.enemy, "app.media.enemy",[], 20000)).animationStart(animateOpt).position(x: P2_PosX, y: P2_PosY).height(this.P2_height).width(this.P2_width).objectFit(ImageFit.Fill).rotate(P2_angle).onAppear({ => this.P2_angle = 10.0
/* 822.257 */                this.P2_height = 62
/* 822.258 */            this.P2_width = 63 }).animationEnd() })
/* 822.259 */            this.observeComponentCreation({ elmtId, isInitialRender => Text("Restart").position(x: 350, y: 300).fontSize(50).fontFamily(__GenerateResource__("", "", "", app.string.ProggyTinySZ, "app.string.ProggyTinySZ",[], 10003)).onClick({ evt => game = FourAscendGame(9, 6, 6)
/* 822.260 */                ai = StupidFourAscendPlayer(game)
/* 822.261 */                this.game_state = game.getInitBoard()
/* 822.262 */                this.data = ObservedArray < Int64 >(Array < Int64 >(81, { _ => 0 }))
/* 822.263 */                this.step = this.backto
/* 822.264 */                this.WhiteAttackPos = ObservedArrayList(ArrayList())
/* 822.265 */                this.BlackAttackPos = ObservedArrayList(ArrayList())
/* 822.266 */                this.animateFlag = false
/* 822.267 */            this.player = 1 }) }) })
/* 822.268 */        }
/* 822.269 */        else {
/* 822.270 */            If.branchId(1)
/* 822.271 */        }
/* 822.272 */    } }) }.opacity(opa).onAppear { animateTo(AnimateParam(duration: 800, curve: Curve.Smooth, delay: 0, iterations: 1, playMode: PlayMode.Alternate, onFinish: { => }, expectedFrameRateRange: ExpectedFrameRateRange(min: 20, max: 120, expected: 90)), { => this.opa = 1.0 }) }
/* 822.273 */})
/* 822.274 */
/* 822.275 */()
/* 822.276 */
/* 822.277 */}
/* 822.278 */
/* 822.279 */
/* 822.280 */public init(parent: Option < CustomView >, game!: ObservedProperty < FourAscendGame >, game_state!: ObservedProperty < Board >, data!: ObservedProperty < ObservedMatrix >, ai!: ObservedProperty < StupidFourAscendPlayer >, step!: ObservedProperty < Int64 >, WhiteAttackPos!: ObservedProperty < ObservedArrayList < Array < Int64 >>>, BlackAttackPos!: ObservedProperty < ObservedArrayList < Array < Int64 >>>, animateFlag!: ObservedProperty < Bool >, player!: ObservedProperty < Int64 >, backto!: ObservedProperty < Int64 >, P1_angle!: Option < ObservedProperty < Float32 >>= None, P1_height!: Option < ObservedProperty < Int64 >>= None, P1_width!: Option < ObservedProperty < Int64 >>= None, P2_angle!: Option < ObservedProperty < Float32 >>= None, P2_height!: Option < ObservedProperty < Int64 >>= None, P2_width!: Option < ObservedProperty < Int64 >>= None, P1_PosX!: Option < ObservedProperty < Int64 >>= None, P1_PosY!: Option < ObservedProperty < Int64 >>= None, P2_PosX!: Option < ObservedProperty < Int64 >>= None, P2_PosY!: Option < ObservedProperty < Int64 >>= None, opa!: Option < ObservedProperty < Float64 >>= None, localStorage!: Option < LocalStorage >= None) {
/* 822.281 */super(parent, localStorage)
/* 822.282 */
/* 822.283 */
/* 822.284 */this.stateVarDecl_game_ = game
/* 822.285 */
/* 822.286 */this.stateVarDecl_game_state_ = game_state
/* 822.287 */
/* 822.288 */this.stateVarDecl_data_ = data
/* 822.289 */
/* 822.290 */this.stateVarDecl_ai_ = ai
/* 822.291 */
/* 822.292 */this.stateVarDecl_step_ = step
/* 822.293 */
/* 822.294 */this.stateVarDecl_WhiteAttackPos_ = WhiteAttackPos
/* 822.295 */
/* 822.296 */this.stateVarDecl_BlackAttackPos_ = BlackAttackPos
/* 822.297 */
/* 822.298 */this.stateVarDecl_animateFlag_ = animateFlag
/* 822.299 */
/* 822.300 */this.stateVarDecl_player_ = player
/* 822.301 */
/* 822.302 */this.stateVarDecl_backto_ = backto
/* 822.303 */
/* 822.304 */match(P1_angle) {
/* 822.305 */    case Some(v) => this.stateVarDecl_P1_angle_ = ObservedProperty < Float32 >("stateVarDecl_P1_angle_", v.get())
/* 822.306 */    case _ =>()
/* 822.307 */}
/* 822.308 */
/* 822.309 */match(P1_height) {
/* 822.310 */    case Some(v) => this.stateVarDecl_P1_height_ = ObservedProperty < Int64 >("stateVarDecl_P1_height_", v.get())
/* 822.311 */    case _ =>()
/* 822.312 */}
/* 822.313 */
/* 822.314 */match(P1_width) {
/* 822.315 */    case Some(v) => this.stateVarDecl_P1_width_ = ObservedProperty < Int64 >("stateVarDecl_P1_width_", v.get())
/* 822.316 */    case _ =>()
/* 822.317 */}
/* 822.318 */
/* 822.319 */match(P2_angle) {
/* 822.320 */    case Some(v) => this.stateVarDecl_P2_angle_ = ObservedProperty < Float32 >("stateVarDecl_P2_angle_", v.get())
/* 822.321 */    case _ =>()
/* 822.322 */}
/* 822.323 */
/* 822.324 */match(P2_height) {
/* 822.325 */    case Some(v) => this.stateVarDecl_P2_height_ = ObservedProperty < Int64 >("stateVarDecl_P2_height_", v.get())
/* 822.326 */    case _ =>()
/* 822.327 */}
/* 822.328 */
/* 822.329 */match(P2_width) {
/* 822.330 */    case Some(v) => this.stateVarDecl_P2_width_ = ObservedProperty < Int64 >("stateVarDecl_P2_width_", v.get())
/* 822.331 */    case _ =>()
/* 822.332 */}
/* 822.333 */
/* 822.334 */match(P1_PosX) {
/* 822.335 */    case Some(v) => this.P1_PosX = v.get()
/* 822.336 */    case _ =>()
/* 822.337 */}
/* 822.338 */
/* 822.339 */match(P1_PosY) {
/* 822.340 */    case Some(v) => this.P1_PosY = v.get()
/* 822.341 */    case _ =>()
/* 822.342 */}
/* 822.343 */
/* 822.344 */match(P2_PosX) {
/* 822.345 */    case Some(v) => this.P2_PosX = v.get()
/* 822.346 */    case _ =>()
/* 822.347 */}
/* 822.348 */
/* 822.349 */match(P2_PosY) {
/* 822.350 */    case Some(v) => this.P2_PosY = v.get()
/* 822.351 */    case _ =>()
/* 822.352 */}
/* 822.353 */
/* 822.354 */match(opa) {
/* 822.355 */    case Some(v) => this.stateVarDecl_opa_ = ObservedProperty < Float64 >("stateVarDecl_opa_", v.get())
/* 822.356 */    case _ =>()
/* 822.357 */}
/* 822.358 */
/* 822.359 */
/* 822.360 */this.stateVarDecl_game_.subscribeEx(this)
/* 822.361 */
/* 822.362 */this.stateVarDecl_game_state_.subscribeEx(this)
/* 822.363 */
/* 822.364 */this.stateVarDecl_data_.subscribeEx(this)
/* 822.365 */
/* 822.366 */this.stateVarDecl_ai_.subscribeEx(this)
/* 822.367 */
/* 822.368 */this.stateVarDecl_step_.subscribeEx(this)
/* 822.369 */
/* 822.370 */this.stateVarDecl_WhiteAttackPos_.subscribeEx(this)
/* 822.371 */
/* 822.372 */this.stateVarDecl_BlackAttackPos_.subscribeEx(this)
/* 822.373 */
/* 822.374 */this.stateVarDecl_animateFlag_.subscribeEx(this)
/* 822.375 */
/* 822.376 */this.stateVarDecl_player_.subscribeEx(this)
/* 822.377 */
/* 822.378 */this.stateVarDecl_backto_.subscribeEx(this)
/* 822.379 */
/* 822.380 */this.stateVarDecl_P1_angle_.subscribeEx(this)
/* 822.381 */
/* 822.382 */this.stateVarDecl_P1_height_.subscribeEx(this)
/* 822.383 */
/* 822.384 */this.stateVarDecl_P1_width_.subscribeEx(this)
/* 822.385 */
/* 822.386 */this.stateVarDecl_P2_angle_.subscribeEx(this)
/* 822.387 */
/* 822.388 */this.stateVarDecl_P2_height_.subscribeEx(this)
/* 822.389 */
/* 822.390 */this.stateVarDecl_P2_width_.subscribeEx(this)
/* 822.391 */
/* 822.392 */this.stateVarDecl_opa_.subscribeEx(this)
/* 822.393 */
/* 822.394 */SubscriberManager.getInstance().add(this)
/* 822.395 */
/* 822.396 */
/* 822.397 */registerSelf()
/* 822.398 */parent?.addChildById(id(), this)
/* 822.399 */}
/* 822.400 */
/* 822.401 */
/* 822.402 */public override func aboutToBeDeleted() {
/* 822.403 */
/* 822.404 */this.stateVarDecl_game_.unsubscribeEx(this)
/* 822.405 */
/* 822.406 */this.stateVarDecl_game_state_.unsubscribeEx(this)
/* 822.407 */
/* 822.408 */this.stateVarDecl_data_.unsubscribeEx(this)
/* 822.409 */
/* 822.410 */this.stateVarDecl_ai_.unsubscribeEx(this)
/* 822.411 */
/* 822.412 */this.stateVarDecl_step_.unsubscribeEx(this)
/* 822.413 */
/* 822.414 */this.stateVarDecl_WhiteAttackPos_.unsubscribeEx(this)
/* 822.415 */
/* 822.416 */this.stateVarDecl_BlackAttackPos_.unsubscribeEx(this)
/* 822.417 */
/* 822.418 */this.stateVarDecl_animateFlag_.unsubscribeEx(this)
/* 822.419 */
/* 822.420 */this.stateVarDecl_player_.unsubscribeEx(this)
/* 822.421 */
/* 822.422 */this.stateVarDecl_backto_.unsubscribeEx(this)
/* 822.423 */
/* 822.424 */this.stateVarDecl_P1_angle_.unsubscribeEx(this)
/* 822.425 */
/* 822.426 */this.stateVarDecl_P1_height_.unsubscribeEx(this)
/* 822.427 */
/* 822.428 */this.stateVarDecl_P1_width_.unsubscribeEx(this)
/* 822.429 */
/* 822.430 */this.stateVarDecl_P2_angle_.unsubscribeEx(this)
/* 822.431 */
/* 822.432 */this.stateVarDecl_P2_height_.unsubscribeEx(this)
/* 822.433 */
/* 822.434 */this.stateVarDecl_P2_width_.unsubscribeEx(this)
/* 822.435 */
/* 822.436 */this.stateVarDecl_opa_.unsubscribeEx(this)
/* 822.437 */
/* 822.438 */SubscriberManager.getInstance().delete(this)
/* 822.439 */this.aboutToBeDeletedInternal()
/* 822.440 */}
/* 822.441 */
/* 822.442 */
/* 822.443 */func updateWithValueParams(game!: Option < FourAscendGame >= Option < FourAscendGame >.None, game_state!: Option < Board >= Option < Board >.None, data!: Option < ObservedMatrix >= Option < ObservedMatrix >.None, ai!: Option < StupidFourAscendPlayer >= Option < StupidFourAscendPlayer >.None, step!: Option < Int64 >= Option < Int64 >.None, WhiteAttackPos!: Option < ObservedArrayList < Array < Int64 >>>= Option < ObservedArrayList < Array < Int64 >>>.None, BlackAttackPos!: Option < ObservedArrayList < Array < Int64 >>>= Option < ObservedArrayList < Array < Int64 >>>.None, animateFlag!: Option < Bool >= Option < Bool >.None, player!: Option < Int64 >= Option < Int64 >.None, backto!: Option < Int64 >= Option < Int64 >.None, P1_angle!: Option < Float32 >= Option < Float32 >.None, P1_height!: Option < Int64 >= Option < Int64 >.None, P1_width!: Option < Int64 >= Option < Int64 >.None, P2_angle!: Option < Float32 >= Option < Float32 >.None, P2_height!: Option < Int64 >= Option < Int64 >.None, P2_width!: Option < Int64 >= Option < Int64 >.None, P1_PosX!: Option < Int64 >= Option < Int64 >.None, P1_PosY!: Option < Int64 >= Option < Int64 >.None, P2_PosX!: Option < Int64 >= Option < Int64 >.None, P2_PosY!: Option < Int64 >= Option < Int64 >.None, opa!: Option < Float64 >= Option < Float64 >.None): Unit {
/* 822.444 */
/* 822.445 */match(P1_angle) {
/* 822.446 */    case Some(v) => this.P1_angle = v
/* 822.447 */    case _ =>()
/* 822.448 */}
/* 822.449 */
/* 822.450 */match(P1_height) {
/* 822.451 */    case Some(v) => this.P1_height = v
/* 822.452 */    case _ =>()
/* 822.453 */}
/* 822.454 */
/* 822.455 */match(P1_width) {
/* 822.456 */    case Some(v) => this.P1_width = v
/* 822.457 */    case _ =>()
/* 822.458 */}
/* 822.459 */
/* 822.460 */match(P2_angle) {
/* 822.461 */    case Some(v) => this.P2_angle = v
/* 822.462 */    case _ =>()
/* 822.463 */}
/* 822.464 */
/* 822.465 */match(P2_height) {
/* 822.466 */    case Some(v) => this.P2_height = v
/* 822.467 */    case _ =>()
/* 822.468 */}
/* 822.469 */
/* 822.470 */match(P2_width) {
/* 822.471 */    case Some(v) => this.P2_width = v
/* 822.472 */    case _ =>()
/* 822.473 */}
/* 822.474 */
/* 822.475 */match(opa) {
/* 822.476 */    case Some(v) => this.opa = v
/* 822.477 */    case _ =>()
/* 822.478 */}
/* 822.479 */
/* 822.480 */}
/* 822.481 */
/* 822.482 */
/* 822.483 */public func rerender() {
/* 822.484 */this.updateDirtyElements()
/* 822.485 */}
/* 822.486 */
/* 822.487 */
/* 822.488 */public func purgeVariableDependenciesOnElmtId(rmElmtId: Int64) {
/* 822.489 */
/* 822.490 */this.stateVarDecl_game_.purgeDependencyOnElmtId(rmElmtId)
/* 822.491 */
/* 822.492 */this.stateVarDecl_game_state_.purgeDependencyOnElmtId(rmElmtId)
/* 822.493 */
/* 822.494 */this.stateVarDecl_data_.purgeDependencyOnElmtId(rmElmtId)
/* 822.495 */
/* 822.496 */this.stateVarDecl_ai_.purgeDependencyOnElmtId(rmElmtId)
/* 822.497 */
/* 822.498 */this.stateVarDecl_step_.purgeDependencyOnElmtId(rmElmtId)
/* 822.499 */
/* 822.500 */this.stateVarDecl_WhiteAttackPos_.purgeDependencyOnElmtId(rmElmtId)
/* 822.501 */
/* 822.502 */this.stateVarDecl_BlackAttackPos_.purgeDependencyOnElmtId(rmElmtId)
/* 822.503 */
/* 822.504 */this.stateVarDecl_animateFlag_.purgeDependencyOnElmtId(rmElmtId)
/* 822.505 */
/* 822.506 */this.stateVarDecl_player_.purgeDependencyOnElmtId(rmElmtId)
/* 822.507 */
/* 822.508 */this.stateVarDecl_backto_.purgeDependencyOnElmtId(rmElmtId)
/* 822.509 */
/* 822.510 */this.stateVarDecl_P1_angle_.purgeDependencyOnElmtId(rmElmtId)
/* 822.511 */
/* 822.512 */this.stateVarDecl_P1_height_.purgeDependencyOnElmtId(rmElmtId)
/* 822.513 */
/* 822.514 */this.stateVarDecl_P1_width_.purgeDependencyOnElmtId(rmElmtId)
/* 822.515 */
/* 822.516 */this.stateVarDecl_P2_angle_.purgeDependencyOnElmtId(rmElmtId)
/* 822.517 */
/* 822.518 */this.stateVarDecl_P2_height_.purgeDependencyOnElmtId(rmElmtId)
/* 822.519 */
/* 822.520 */this.stateVarDecl_P2_width_.purgeDependencyOnElmtId(rmElmtId)
/* 822.521 */
/* 822.522 */this.stateVarDecl_opa_.purgeDependencyOnElmtId(rmElmtId)
/* 822.523 */
/* 822.524 */}
/* 822.525 */
/* 822.526 */
/* 822.527 */public func forceRerender(deep!: Bool = false) {
/* 822.528 */this.forceCompleteRerender(deep)
/* 822.529 */}
/* 822.530 */
/* 822.531 */
/* 822.532 */}
/* 822.533 */
/* ===== End of the Emit ===== */

//教学页面绘制组件
/* ===== Emitted by MacroCall @Component in draw.cj:975:1 ===== */
/* 975.1 */public class teachpage <: CustomView {
/* 975.2 */    
/* 975.3 */    
/* 975.4 */    private var stateVarDecl_step_: ObservedProperty < Int64 >
/* 975.5 */    
/* 975.6 */    
/* 975.7 */    private mut prop step: Int64 {
/* 975.8 */        get() {
/* 975.9 */            return this.stateVarDecl_step_.get()
/* 975.10 */        }
/* 975.11 */        set(v) {
/* 975.12 */            this.stateVarDecl_step_.set(v)
/* 975.13 */        }
/* 975.14 */    }
/* 975.15 */    
/* 975.16 */    
/* 975.17 */    private var stateVarDecl_teach_page_: ObservedProperty < Int64 >= ObservedProperty < Int64 >("stateVarDecl_teach_page_", 1)
/* 975.18 */    
/* 975.19 */    
/* 975.20 */    private mut prop teach_page: Int64 {
/* 975.21 */        get() {
/* 975.22 */            return this.stateVarDecl_teach_page_.get()
/* 975.23 */        }
/* 975.24 */        set(v) {
/* 975.25 */            this.stateVarDecl_teach_page_.set(v)
/* 975.26 */        }
/* 975.27 */    }
/* 975.28 */    
/* 975.29 */    
/* 975.30 */    var fontsize: Int64 = 25
/* 975.31 */    
/* 975.32 */    
/* 975.33 */    var posX: Int64 = 230
/* 975.34 */    
/* 975.35 */    
/* 975.36 */    var posY: Int64 = 20
/* 975.37 */    
/* 975.38 */    
/* 975.39 */    
/* 975.40 */    public func build() {
/* 975.41 */        
/* 975.42 */        this.observeComponentCreation({ elmtId, isInitialRender =>
/* 975.43 */            Stack { this.observeComponentCreation({ elmtId, isInitialRender => If { if(teach_page == 1) {
/* 975.44 */                this.ifElseBranchUpdateFunction(0, { => this.observeComponentCreation({ elmtId, isInitialRender => Text("欢迎来到4ASCEND！\n这是一个新手教学\n点击屏幕以进入下一页").fontFamily(__GenerateResource__("", "", "", app.string.pixelfont, "app.string.pixelfont",[], 10003)).textAlign(TextAlign.Center).fontSize(fontsize).position(x: 295, y: 140) }) })
/* 975.45 */            }
/* 975.46 */            else if(teach_page == 2) {
/* 975.47 */                this.ifElseBranchUpdateFunction(1, { => this.observeComponentCreation({ elmtId, isInitialRender => Image(__GenerateResource__("", "", "", app.media.teach1, "app.media.teach1",[], 20000)).height(360).width(360).position(x: 250, y: 10) })
/* 975.48 */                this.observeComponentCreation({ elmtId, isInitialRender => Text("屏幕上的是一个9x9的棋盘\n点击屏幕，白黑双方轮流落子\n(现在不可以哦)").fontFamily(__GenerateResource__("", "", "", app.string.pixelfont, "app.string.pixelfont",[], 10003)).textAlign(TextAlign.Center).fontSize(fontsize).position(x: 250, y: 20) }) })
/* 975.49 */            }
/* 975.50 */            else if(teach_page == 3) {
/* 975.51 */                this.ifElseBranchUpdateFunction(2, { => this.observeComponentCreation({ elmtId, isInitialRender => Image(__GenerateResource__("", "", "", app.media.teach2, "app.media.teach2",[], 20000)).height(360).width(360).position(x: 250, y: 10) })
/* 975.52 */                this.observeComponentCreation({ elmtId, isInitialRender => Text("4个及以上的棋子连成一线时，\n棋子将进入ASCEND状态\n此时，该名玩家进入攻击阶段").fontFamily(__GenerateResource__("", "", "", app.string.pixelfont, "app.string.pixelfont",[], 10003)).textAlign(TextAlign.Center).fontSize(fontsize).position(x: posX, y: posY) }) })
/* 975.53 */            }
/* 975.54 */            else if(teach_page == 4) {
/* 975.55 */                this.ifElseBranchUpdateFunction(3, { => this.observeComponentCreation({ elmtId, isInitialRender => Image(__GenerateResource__("", "", "", app.media.teach3, "app.media.teach3",[], 20000)).height(350).width(740).position(x: 60, y: 10) })
/* 975.56 */                this.observeComponentCreation({ elmtId, isInitialRender => Text("下一名玩家自动进入防御状态\n落子之后，双方进行战斗，结算血量\n玩家的状态在两侧显示").fontFamily(__GenerateResource__("", "", "", app.string.pixelfont, "app.string.pixelfont",[], 10003)).textAlign(TextAlign.Center).fontSize(fontsize).position(x: posX - 10, y: posY) }) })
/* 975.57 */            }
/* 975.58 */            else if(teach_page == 5) {
/* 975.59 */                this.ifElseBranchUpdateFunction(4, { => this.observeComponentCreation({ elmtId, isInitialRender => Image(__GenerateResource__("", "", "", app.media.teach4, "app.media.teach4",[], 20000)).height(348).width(738).position(x: 60, y: 10) })
/* 975.60 */                this.observeComponentCreation({ elmtId, isInitialRender => Text("防御玩家可以占据攻击玩家的升华棋子\n这会使得这枚棋子不参与攻击力计算").fontFamily(__GenerateResource__("", "", "", app.string.pixelfont, "app.string.pixelfont",[], 10003)).textAlign(TextAlign.Center).fontSize(fontsize).position(x: posX - 20, y: posY) }) })
/* 975.61 */            }
/* 975.62 */            else if(teach_page == 6) {
/* 975.63 */                this.ifElseBranchUpdateFunction(5, { => this.observeComponentCreation({ elmtId, isInitialRender => Image(__GenerateResource__("", "", "", app.media.teach5, "app.media.teach5",[], 20000)).height(350).width(740).position(x: 60, y: 10) })
/* 975.64 */                this.observeComponentCreation({ elmtId, isInitialRender => Text("棋盘上会随机生成金色的魔法植物\n占据了该位置的棋子，攻击力/防御力+1").fontFamily(__GenerateResource__("", "", "", app.string.pixelfont, "app.string.pixelfont",[], 10003)).textAlign(TextAlign.Center).fontSize(fontsize).position(x: posX - 20, y: posY) }) })
/* 975.65 */            }
/* 975.66 */            else if(teach_page == 7) {
/* 975.67 */                this.ifElseBranchUpdateFunction(6, { => this.observeComponentCreation({ elmtId, isInitialRender => Image(__GenerateResource__("", "", "", app.media.teach6, "app.media.teach6",[], 20000)).height(350).width(740).position(x: 60, y: 10) })
/* 975.68 */                this.observeComponentCreation({ elmtId, isInitialRender => Text("把对方的血量降到零吧！\n棋盘满时，棋子多的一方也将获胜").fontFamily(__GenerateResource__("", "", "", app.string.pixelfont, "app.string.pixelfont",[], 10003)).textAlign(TextAlign.Center).fontSize(fontsize).position(x: posX, y: 150) }) })
/* 975.69 */            }
/* 975.70 */            else if(teach_page == 8) {
/* 975.71 */                this.ifElseBranchUpdateFunction(7, { => this.observeComponentCreation({ elmtId, isInitialRender => Text("现在点击左上方按钮返回，\n开始你的4ASCEND战斗吧！").fontFamily(__GenerateResource__("", "", "", app.string.pixelfont, "app.string.pixelfont",[], 10003)).textAlign(TextAlign.Center).fontSize(fontsize).position(x: 270, y: 150) }) })
/* 975.72 */            }
/* 975.73 */            else {
/* 975.74 */                If.branchId(8)
/* 975.75 */            }
/* 975.76 */        } })
/* 975.77 */        this.observeComponentCreation({ elmtId, isInitialRender => Rect(height: 5000, width: 5000).opacity(0).onClick({ evt => if(teach_page < 8) {
/* 975.78 */            teach_page ++
/* 975.79 */        }
/* 975.80 */    }) }) }
/* 975.81 */})
/* 975.82 */
/* 975.83 */()
/* 975.84 */
/* 975.85 */}
/* 975.86 */
/* 975.87 */
/* 975.88 */public init(parent: Option < CustomView >, step!: ObservedProperty < Int64 >, teach_page!: Option < ObservedProperty < Int64 >>= None, fontsize!: Option < ObservedProperty < Int64 >>= None, posX!: Option < ObservedProperty < Int64 >>= None, posY!: Option < ObservedProperty < Int64 >>= None, localStorage!: Option < LocalStorage >= None) {
/* 975.89 */super(parent, localStorage)
/* 975.90 */
/* 975.91 */
/* 975.92 */this.stateVarDecl_step_ = step
/* 975.93 */
/* 975.94 */match(teach_page) {
/* 975.95 */    case Some(v) => this.stateVarDecl_teach_page_ = ObservedProperty < Int64 >("stateVarDecl_teach_page_", v.get())
/* 975.96 */    case _ =>()
/* 975.97 */}
/* 975.98 */
/* 975.99 */match(fontsize) {
/* 975.100 */    case Some(v) => this.fontsize = v.get()
/* 975.101 */    case _ =>()
/* 975.102 */}
/* 975.103 */
/* 975.104 */match(posX) {
/* 975.105 */    case Some(v) => this.posX = v.get()
/* 975.106 */    case _ =>()
/* 975.107 */}
/* 975.108 */
/* 975.109 */match(posY) {
/* 975.110 */    case Some(v) => this.posY = v.get()
/* 975.111 */    case _ =>()
/* 975.112 */}
/* 975.113 */
/* 975.114 */
/* 975.115 */this.stateVarDecl_step_.subscribeEx(this)
/* 975.116 */
/* 975.117 */this.stateVarDecl_teach_page_.subscribeEx(this)
/* 975.118 */
/* 975.119 */SubscriberManager.getInstance().add(this)
/* 975.120 */
/* 975.121 */
/* 975.122 */registerSelf()
/* 975.123 */parent?.addChildById(id(), this)
/* 975.124 */}
/* 975.125 */
/* 975.126 */
/* 975.127 */public override func aboutToBeDeleted() {
/* 975.128 */
/* 975.129 */this.stateVarDecl_step_.unsubscribeEx(this)
/* 975.130 */
/* 975.131 */this.stateVarDecl_teach_page_.unsubscribeEx(this)
/* 975.132 */
/* 975.133 */SubscriberManager.getInstance().delete(this)
/* 975.134 */this.aboutToBeDeletedInternal()
/* 975.135 */}
/* 975.136 */
/* 975.137 */
/* 975.138 */func updateWithValueParams(step!: Option < Int64 >= Option < Int64 >.None, teach_page!: Option < Int64 >= Option < Int64 >.None, fontsize!: Option < Int64 >= Option < Int64 >.None, posX!: Option < Int64 >= Option < Int64 >.None, posY!: Option < Int64 >= Option < Int64 >.None): Unit {
/* 975.139 */
/* 975.140 */match(teach_page) {
/* 975.141 */    case Some(v) => this.teach_page = v
/* 975.142 */    case _ =>()
/* 975.143 */}
/* 975.144 */
/* 975.145 */}
/* 975.146 */
/* 975.147 */
/* 975.148 */public func rerender() {
/* 975.149 */this.updateDirtyElements()
/* 975.150 */}
/* 975.151 */
/* 975.152 */
/* 975.153 */public func purgeVariableDependenciesOnElmtId(rmElmtId: Int64) {
/* 975.154 */
/* 975.155 */this.stateVarDecl_step_.purgeDependencyOnElmtId(rmElmtId)
/* 975.156 */
/* 975.157 */this.stateVarDecl_teach_page_.purgeDependencyOnElmtId(rmElmtId)
/* 975.158 */
/* 975.159 */}
/* 975.160 */
/* 975.161 */
/* 975.162 */public func forceRerender(deep!: Bool = false) {
/* 975.163 */this.forceCompleteRerender(deep)
/* 975.164 */}
/* 975.165 */
/* 975.166 */
/* 975.167 */}
/* 975.168 */
/* ===== End of the Emit ===== */

//返回按钮绘制组件
/* ===== Emitted by MacroCall @Component in draw.cj:1085:1 ===== */
/* 1085.1 */public class backarrow <: CustomView {
/* 1085.2 */    
/* 1085.3 */    
/* 1085.4 */    private var stateVarDecl_game_: ObservedProperty < FourAscendGame >
/* 1085.5 */    
/* 1085.6 */    
/* 1085.7 */    private mut prop game: FourAscendGame {
/* 1085.8 */        get() {
/* 1085.9 */            return this.stateVarDecl_game_.get()
/* 1085.10 */        }
/* 1085.11 */        set(v) {
/* 1085.12 */            this.stateVarDecl_game_.set(v)
/* 1085.13 */        }
/* 1085.14 */    }
/* 1085.15 */    
/* 1085.16 */    
/* 1085.17 */    private var stateVarDecl_game_state_: ObservedProperty < Board >
/* 1085.18 */    
/* 1085.19 */    
/* 1085.20 */    private mut prop game_state: Board {
/* 1085.21 */        get() {
/* 1085.22 */            return this.stateVarDecl_game_state_.get()
/* 1085.23 */        }
/* 1085.24 */        set(v) {
/* 1085.25 */            this.stateVarDecl_game_state_.set(v)
/* 1085.26 */        }
/* 1085.27 */    }
/* 1085.28 */    
/* 1085.29 */    
/* 1085.30 */    private var stateVarDecl_data_: ObservedProperty < ObservedMatrix >
/* 1085.31 */    
/* 1085.32 */    
/* 1085.33 */    private mut prop data: ObservedMatrix {
/* 1085.34 */        get() {
/* 1085.35 */            return this.stateVarDecl_data_.get()
/* 1085.36 */        }
/* 1085.37 */        set(v) {
/* 1085.38 */            this.stateVarDecl_data_.set(v)
/* 1085.39 */        }
/* 1085.40 */    }
/* 1085.41 */    
/* 1085.42 */    
/* 1085.43 */    private var stateVarDecl_ai_: ObservedProperty < StupidFourAscendPlayer >
/* 1085.44 */    
/* 1085.45 */    
/* 1085.46 */    private mut prop ai: StupidFourAscendPlayer {
/* 1085.47 */        get() {
/* 1085.48 */            return this.stateVarDecl_ai_.get()
/* 1085.49 */        }
/* 1085.50 */        set(v) {
/* 1085.51 */            this.stateVarDecl_ai_.set(v)
/* 1085.52 */        }
/* 1085.53 */    }
/* 1085.54 */    
/* 1085.55 */    
/* 1085.56 */    private var stateVarDecl_step_: ObservedProperty < Int64 >
/* 1085.57 */    
/* 1085.58 */    
/* 1085.59 */    private mut prop step: Int64 {
/* 1085.60 */        get() {
/* 1085.61 */            return this.stateVarDecl_step_.get()
/* 1085.62 */        }
/* 1085.63 */        set(v) {
/* 1085.64 */            this.stateVarDecl_step_.set(v)
/* 1085.65 */        }
/* 1085.66 */    }
/* 1085.67 */    
/* 1085.68 */    
/* 1085.69 */    private var stateVarDecl_WhiteAttackPos_: ObservedProperty < ObservedArrayList < Array < Int64 >>>
/* 1085.70 */    
/* 1085.71 */    
/* 1085.72 */    private mut prop WhiteAttackPos: ObservedArrayList < Array < Int64 >> {
/* 1085.73 */        get() {
/* 1085.74 */            return this.stateVarDecl_WhiteAttackPos_.get()
/* 1085.75 */        }
/* 1085.76 */        set(v) {
/* 1085.77 */            this.stateVarDecl_WhiteAttackPos_.set(v)
/* 1085.78 */        }
/* 1085.79 */    }
/* 1085.80 */    
/* 1085.81 */    
/* 1085.82 */    private var stateVarDecl_BlackAttackPos_: ObservedProperty < ObservedArrayList < Array < Int64 >>>
/* 1085.83 */    
/* 1085.84 */    
/* 1085.85 */    private mut prop BlackAttackPos: ObservedArrayList < Array < Int64 >> {
/* 1085.86 */        get() {
/* 1085.87 */            return this.stateVarDecl_BlackAttackPos_.get()
/* 1085.88 */        }
/* 1085.89 */        set(v) {
/* 1085.90 */            this.stateVarDecl_BlackAttackPos_.set(v)
/* 1085.91 */        }
/* 1085.92 */    }
/* 1085.93 */    
/* 1085.94 */    
/* 1085.95 */    private var stateVarDecl_animateFlag_: ObservedProperty < Bool >
/* 1085.96 */    
/* 1085.97 */    
/* 1085.98 */    private mut prop animateFlag: Bool {
/* 1085.99 */        get() {
/* 1085.100 */            return this.stateVarDecl_animateFlag_.get()
/* 1085.101 */        }
/* 1085.102 */        set(v) {
/* 1085.103 */            this.stateVarDecl_animateFlag_.set(v)
/* 1085.104 */        }
/* 1085.105 */    }
/* 1085.106 */    
/* 1085.107 */    
/* 1085.108 */    private var stateVarDecl_player_: ObservedProperty < Int64 >
/* 1085.109 */    
/* 1085.110 */    
/* 1085.111 */    private mut prop player: Int64 {
/* 1085.112 */        get() {
/* 1085.113 */            return this.stateVarDecl_player_.get()
/* 1085.114 */        }
/* 1085.115 */        set(v) {
/* 1085.116 */            this.stateVarDecl_player_.set(v)
/* 1085.117 */        }
/* 1085.118 */    }
/* 1085.119 */    
/* 1085.120 */    
/* 1085.121 */    
/* 1085.122 */    public func build() {
/* 1085.123 */        
/* 1085.124 */        this.observeComponentCreation({ elmtId, isInitialRender =>
/* 1085.125 */            Image(__GenerateResource__("", "", "", app.media.backarrow, "app.media.backarrow",[], 20000)).height(45).width(50).position(x: - 100, y: 30).onClick({ evt => game = FourAscendGame(9, 6, 6)
/* 1085.126 */                ai = StupidFourAscendPlayer(game)
/* 1085.127 */                this.game_state = game.getInitBoard()
/* 1085.128 */                this.data = ObservedArray < Int64 >(Array < Int64 >(81, { _ => 0 }))
/* 1085.129 */                this.step = 1
/* 1085.130 */                this.WhiteAttackPos = ObservedArrayList(ArrayList())
/* 1085.131 */                this.BlackAttackPos = ObservedArrayList(ArrayList())
/* 1085.132 */                this.animateFlag = false
/* 1085.133 */            this.player = 1 })
/* 1085.134 */        })
/* 1085.135 */        
/* 1085.136 */        ()
/* 1085.137 */        
/* 1085.138 */    }
/* 1085.139 */    
/* 1085.140 */    
/* 1085.141 */    public init(parent: Option < CustomView >, game!: ObservedProperty < FourAscendGame >, game_state!: ObservedProperty < Board >, data!: ObservedProperty < ObservedMatrix >, ai!: ObservedProperty < StupidFourAscendPlayer >, step!: ObservedProperty < Int64 >, WhiteAttackPos!: ObservedProperty < ObservedArrayList < Array < Int64 >>>, BlackAttackPos!: ObservedProperty < ObservedArrayList < Array < Int64 >>>, animateFlag!: ObservedProperty < Bool >, player!: ObservedProperty < Int64 >, localStorage!: Option < LocalStorage >= None) {
/* 1085.142 */        super(parent, localStorage)
/* 1085.143 */        
/* 1085.144 */        
/* 1085.145 */        this.stateVarDecl_game_ = game
/* 1085.146 */        
/* 1085.147 */        this.stateVarDecl_game_state_ = game_state
/* 1085.148 */        
/* 1085.149 */        this.stateVarDecl_data_ = data
/* 1085.150 */        
/* 1085.151 */        this.stateVarDecl_ai_ = ai
/* 1085.152 */        
/* 1085.153 */        this.stateVarDecl_step_ = step
/* 1085.154 */        
/* 1085.155 */        this.stateVarDecl_WhiteAttackPos_ = WhiteAttackPos
/* 1085.156 */        
/* 1085.157 */        this.stateVarDecl_BlackAttackPos_ = BlackAttackPos
/* 1085.158 */        
/* 1085.159 */        this.stateVarDecl_animateFlag_ = animateFlag
/* 1085.160 */        
/* 1085.161 */        this.stateVarDecl_player_ = player
/* 1085.162 */        
/* 1085.163 */        
/* 1085.164 */        this.stateVarDecl_game_.subscribeEx(this)
/* 1085.165 */        
/* 1085.166 */        this.stateVarDecl_game_state_.subscribeEx(this)
/* 1085.167 */        
/* 1085.168 */        this.stateVarDecl_data_.subscribeEx(this)
/* 1085.169 */        
/* 1085.170 */        this.stateVarDecl_ai_.subscribeEx(this)
/* 1085.171 */        
/* 1085.172 */        this.stateVarDecl_step_.subscribeEx(this)
/* 1085.173 */        
/* 1085.174 */        this.stateVarDecl_WhiteAttackPos_.subscribeEx(this)
/* 1085.175 */        
/* 1085.176 */        this.stateVarDecl_BlackAttackPos_.subscribeEx(this)
/* 1085.177 */        
/* 1085.178 */        this.stateVarDecl_animateFlag_.subscribeEx(this)
/* 1085.179 */        
/* 1085.180 */        this.stateVarDecl_player_.subscribeEx(this)
/* 1085.181 */        
/* 1085.182 */        SubscriberManager.getInstance().add(this)
/* 1085.183 */        
/* 1085.184 */        
/* 1085.185 */        registerSelf()
/* 1085.186 */        parent?.addChildById(id(), this)
/* 1085.187 */    }
/* 1085.188 */    
/* 1085.189 */    
/* 1085.190 */    public override func aboutToBeDeleted() {
/* 1085.191 */        
/* 1085.192 */        this.stateVarDecl_game_.unsubscribeEx(this)
/* 1085.193 */        
/* 1085.194 */        this.stateVarDecl_game_state_.unsubscribeEx(this)
/* 1085.195 */        
/* 1085.196 */        this.stateVarDecl_data_.unsubscribeEx(this)
/* 1085.197 */        
/* 1085.198 */        this.stateVarDecl_ai_.unsubscribeEx(this)
/* 1085.199 */        
/* 1085.200 */        this.stateVarDecl_step_.unsubscribeEx(this)
/* 1085.201 */        
/* 1085.202 */        this.stateVarDecl_WhiteAttackPos_.unsubscribeEx(this)
/* 1085.203 */        
/* 1085.204 */        this.stateVarDecl_BlackAttackPos_.unsubscribeEx(this)
/* 1085.205 */        
/* 1085.206 */        this.stateVarDecl_animateFlag_.unsubscribeEx(this)
/* 1085.207 */        
/* 1085.208 */        this.stateVarDecl_player_.unsubscribeEx(this)
/* 1085.209 */        
/* 1085.210 */        SubscriberManager.getInstance().delete(this)
/* 1085.211 */        this.aboutToBeDeletedInternal()
/* 1085.212 */    }
/* 1085.213 */    
/* 1085.214 */    
/* 1085.215 */    func updateWithValueParams(game!: Option < FourAscendGame >= Option < FourAscendGame >.None, game_state!: Option < Board >= Option < Board >.None, data!: Option < ObservedMatrix >= Option < ObservedMatrix >.None, ai!: Option < StupidFourAscendPlayer >= Option < StupidFourAscendPlayer >.None, step!: Option < Int64 >= Option < Int64 >.None, WhiteAttackPos!: Option < ObservedArrayList < Array < Int64 >>>= Option < ObservedArrayList < Array < Int64 >>>.None, BlackAttackPos!: Option < ObservedArrayList < Array < Int64 >>>= Option < ObservedArrayList < Array < Int64 >>>.None, animateFlag!: Option < Bool >= Option < Bool >.None, player!: Option < Int64 >= Option < Int64 >.None): Unit {
/* 1085.216 */        
/* 1085.217 */    }
/* 1085.218 */    
/* 1085.219 */    
/* 1085.220 */    public func rerender() {
/* 1085.221 */        this.updateDirtyElements()
/* 1085.222 */    }
/* 1085.223 */    
/* 1085.224 */    
/* 1085.225 */    public func purgeVariableDependenciesOnElmtId(rmElmtId: Int64) {
/* 1085.226 */        
/* 1085.227 */        this.stateVarDecl_game_.purgeDependencyOnElmtId(rmElmtId)
/* 1085.228 */        
/* 1085.229 */        this.stateVarDecl_game_state_.purgeDependencyOnElmtId(rmElmtId)
/* 1085.230 */        
/* 1085.231 */        this.stateVarDecl_data_.purgeDependencyOnElmtId(rmElmtId)
/* 1085.232 */        
/* 1085.233 */        this.stateVarDecl_ai_.purgeDependencyOnElmtId(rmElmtId)
/* 1085.234 */        
/* 1085.235 */        this.stateVarDecl_step_.purgeDependencyOnElmtId(rmElmtId)
/* 1085.236 */        
/* 1085.237 */        this.stateVarDecl_WhiteAttackPos_.purgeDependencyOnElmtId(rmElmtId)
/* 1085.238 */        
/* 1085.239 */        this.stateVarDecl_BlackAttackPos_.purgeDependencyOnElmtId(rmElmtId)
/* 1085.240 */        
/* 1085.241 */        this.stateVarDecl_animateFlag_.purgeDependencyOnElmtId(rmElmtId)
/* 1085.242 */        
/* 1085.243 */        this.stateVarDecl_player_.purgeDependencyOnElmtId(rmElmtId)
/* 1085.244 */        
/* 1085.245 */    }
/* 1085.246 */    
/* 1085.247 */    
/* 1085.248 */    public func forceRerender(deep!: Bool = false) {
/* 1085.249 */        this.forceCompleteRerender(deep)
/* 1085.250 */    }
/* 1085.251 */    
/* 1085.252 */    
/* 1085.253 */}
/* 1085.254 */
/* ===== End of the Emit ===== */

//棋子动画绘制组件
/* ===== Emitted by MacroCall @Component in draw.cj:1129:1 ===== */
/* 1129.1 */public class AttackAnimation <: CustomView {
/* 1129.2 */    
/* 1129.3 */    
/* 1129.4 */    private var stateVarDecl_wp_: ObservedProperty < ObservedArrayList < Array < Int64 >>>
/* 1129.5 */    
/* 1129.6 */    
/* 1129.7 */    private mut prop wp: ObservedArrayList < Array < Int64 >> {
/* 1129.8 */        get() {
/* 1129.9 */            return this.stateVarDecl_wp_.get()
/* 1129.10 */        }
/* 1129.11 */        set(v) {
/* 1129.12 */            this.stateVarDecl_wp_.set(v)
/* 1129.13 */        }
/* 1129.14 */    }
/* 1129.15 */    
/* 1129.16 */    
/* 1129.17 */    private var stateVarDecl_bp_: ObservedProperty < ObservedArrayList < Array < Int64 >>>
/* 1129.18 */    
/* 1129.19 */    
/* 1129.20 */    private mut prop bp: ObservedArrayList < Array < Int64 >> {
/* 1129.21 */        get() {
/* 1129.22 */            return this.stateVarDecl_bp_.get()
/* 1129.23 */        }
/* 1129.24 */        set(v) {
/* 1129.25 */            this.stateVarDecl_bp_.set(v)
/* 1129.26 */        }
/* 1129.27 */    }
/* 1129.28 */    
/* 1129.29 */    
/* 1129.30 */    private var stateVarDecl_step_W_: ObservedProperty < Int64 >= ObservedProperty < Int64 >("stateVarDecl_step_W_", 0)
/* 1129.31 */    
/* 1129.32 */    
/* 1129.33 */    private mut prop step_W: Int64 {
/* 1129.34 */        get() {
/* 1129.35 */            return this.stateVarDecl_step_W_.get()
/* 1129.36 */        }
/* 1129.37 */        set(v) {
/* 1129.38 */            this.stateVarDecl_step_W_.set(v)
/* 1129.39 */        }
/* 1129.40 */    }
/* 1129.41 */    
/* 1129.42 */    
/* 1129.43 */    private var stateVarDecl_step_B_: ObservedProperty < Int64 >= ObservedProperty < Int64 >("stateVarDecl_step_B_", 0)
/* 1129.44 */    
/* 1129.45 */    
/* 1129.46 */    private mut prop step_B: Int64 {
/* 1129.47 */        get() {
/* 1129.48 */            return this.stateVarDecl_step_B_.get()
/* 1129.49 */        }
/* 1129.50 */        set(v) {
/* 1129.51 */            this.stateVarDecl_step_B_.set(v)
/* 1129.52 */        }
/* 1129.53 */    }
/* 1129.54 */    
/* 1129.55 */    
/* 1129.56 */    private var stateVarDecl_animateFlag_: ObservedProperty < Bool >
/* 1129.57 */    
/* 1129.58 */    
/* 1129.59 */    private mut prop animateFlag: Bool {
/* 1129.60 */        get() {
/* 1129.61 */            return this.stateVarDecl_animateFlag_.get()
/* 1129.62 */        }
/* 1129.63 */        set(v) {
/* 1129.64 */            this.stateVarDecl_animateFlag_.set(v)
/* 1129.65 */        }
/* 1129.66 */    }
/* 1129.67 */    
/* 1129.68 */    
/* 1129.69 */    private var stateVarDecl_unopposed_: ObservedProperty < Bool >
/* 1129.70 */    
/* 1129.71 */    
/* 1129.72 */    private mut prop unopposed: Bool {
/* 1129.73 */        get() {
/* 1129.74 */            return this.stateVarDecl_unopposed_.get()
/* 1129.75 */        }
/* 1129.76 */        set(v) {
/* 1129.77 */            this.stateVarDecl_unopposed_.set(v)
/* 1129.78 */        }
/* 1129.79 */    }
/* 1129.80 */    
/* 1129.81 */    
/* 1129.82 */    private var stateVarDecl_onHit_: ObservedProperty < Bool >
/* 1129.83 */    
/* 1129.84 */    
/* 1129.85 */    private mut prop onHit: Bool {
/* 1129.86 */        get() {
/* 1129.87 */            return this.stateVarDecl_onHit_.get()
/* 1129.88 */        }
/* 1129.89 */        set(v) {
/* 1129.90 */            this.stateVarDecl_onHit_.set(v)
/* 1129.91 */        }
/* 1129.92 */    }
/* 1129.93 */    
/* 1129.94 */    
/* 1129.95 */    var Minsize: Int64 = 0
/* 1129.96 */    
/* 1129.97 */    
/* 1129.98 */    var Maxsize: Int64 = 0
/* 1129.99 */    
/* 1129.100 */    
/* 1129.101 */    let animateOpt = AnimateParam(duration: 800, curve: Curve.Smooth, delay: 0, iterations: 1, playMode: PlayMode.Alternate, onFinish: { => AppLog.info("onfinish") }, expectedFrameRateRange: ExpectedFrameRateRange(min: 20, max: 120, expected: 90))
/* 1129.102 */    
/* 1129.103 */    
/* 1129.104 */    private func WhiteAttackCheck(p: Int64): Float64 {
/* 1129.105 */        if((step_W == 0 && this.animateFlag) || step_W > 0) {
/* 1129.106 */            return 1.0
/* 1129.107 */        }
/* 1129.108 */        else {
/* 1129.109 */            return 0.0
/* 1129.110 */        }
/* 1129.111 */    }
/* 1129.112 */    
/* 1129.113 */    
/* 1129.114 */    private func BlackAttackCheck(p: Int64): Float64 {
/* 1129.115 */        if((step_B == 0 && this.animateFlag) || step_B > 0) {
/* 1129.116 */            return 1.0
/* 1129.117 */        }
/* 1129.118 */        else {
/* 1129.119 */            return 0.0
/* 1129.120 */        }
/* 1129.121 */    }
/* 1129.122 */    
/* 1129.123 */    
/* 1129.124 */    private func getPosX(x: Int64, player: Int64) {
/* 1129.125 */        let m: Random = Random()
/* 1129.126 */        if(! this.animateFlag) {
/* 1129.127 */            return x * 40 + 85
/* 1129.128 */        }
/* 1129.129 */        else {
/* 1129.130 */            if(player == 1 && step_W == 1) {
/* 1129.131 */                return 0 + m.nextInt64(100)
/* 1129.132 */            }
/* 1129.133 */            else if(player == - 1 && step_B == 1) {
/* 1129.134 */                return 450 + m.nextInt64(100)
/* 1129.135 */            }
/* 1129.136 */            else if(step_B == 2 && step_W == 2) {
/* 1129.137 */                return 225
/* 1129.138 */            }
/* 1129.139 */            else if(step_B == 3 && step_W == 3) {
/* 1129.140 */                if(player == 1) {
/* 1129.141 */                    return 500
/* 1129.142 */                }
/* 1129.143 */                else {
/* 1129.144 */                    return 0
/* 1129.145 */                }
/* 1129.146 */            }
/* 1129.147 */            else {
/* 1129.148 */                return x * 40 + 85
/* 1129.149 */            }
/* 1129.150 */        }
/* 1129.151 */    }
/* 1129.152 */    
/* 1129.153 */    
/* 1129.154 */    private func getPosY(x: Int64, y: Int64, player: Int64) {
/* 1129.155 */        let m: Random = Random()
/* 1129.156 */        if(! this.animateFlag) {
/* 1129.157 */            return y * 40 + 15
/* 1129.158 */        }
/* 1129.159 */        else {
/* 1129.160 */            if(player == 1 && step_W == 1) {
/* 1129.161 */                for(i in 0 .. wp.size) {
/* 1129.162 */                    if(wp[i][0] == y && wp[i][1] == x) {
/* 1129.163 */                        return(50 + 350 / wp.size * i)
/* 1129.164 */                    }
/* 1129.165 */                }
/* 1129.166 */                return(50 + 350 + m.nextInt64(10))
/* 1129.167 */            }
/* 1129.168 */            else if(player == - 1 && step_B == 1) {
/* 1129.169 */                for(i in 0 .. bp.size) {
/* 1129.170 */                    if(bp[i][0] == y && bp[i][1] == x) {
/* 1129.171 */                        return(50 + 350 / bp.size * i)
/* 1129.172 */                    }
/* 1129.173 */                }
/* 1129.174 */                return(50 + 350 + m.nextInt64(10))
/* 1129.175 */            }
/* 1129.176 */            else if(step_B == 2 && step_W == 2) {
/* 1129.177 */                if(wp.size == 0 || bp.size == 0) {
/* 1129.178 */                    if(bp.size == 0) {
/* 1129.179 */                        for(i in 0 .. wp.size) {
/* 1129.180 */                            if(wp[i][0] == y && wp[i][1] == x) {
/* 1129.181 */                                return(50 + 350 / this.Maxsize *(i + this.Minsize))
/* 1129.182 */                            }
/* 1129.183 */                        }
/* 1129.184 */                    }
/* 1129.185 */                    else {
/* 1129.186 */                        for(i in 0 .. bp.size) {
/* 1129.187 */                            if(bp[i][0] == y && bp[i][1] == x) {
/* 1129.188 */                                return(50 + 350 / this.Maxsize *(i + this.Minsize))
/* 1129.189 */                            }
/* 1129.190 */                        }
/* 1129.191 */                    }
/* 1129.192 */                }
/* 1129.193 */                else {
/* 1129.194 */                    var min_size = 0
/* 1129.195 */                    var max_size = 0
/* 1129.196 */                    if(wp.size > bp.size) {
/* 1129.197 */                        min_size = bp.size
/* 1129.198 */                        max_size = wp.size
/* 1129.199 */                    }
/* 1129.200 */                    else {
/* 1129.201 */                        min_size = wp.size
/* 1129.202 */                        max_size = bp.size
/* 1129.203 */                    }
/* 1129.204 */                    if(this.Minsize == 0 || this.Maxsize == 0) {
/* 1129.205 */                        this.Minsize = min_size
/* 1129.206 */                        this.Maxsize = max_size
/* 1129.207 */                    }
/* 1129.208 */                    for(i in 0 .. min_size) {
/* 1129.209 */                        if(player == 1) {
/* 1129.210 */                            if(wp[i][0] == y && wp[i][1] == x) {
/* 1129.211 */                                return((50 + 350 / wp.size * i + 50 + 350 / bp.size * i) / 2)
/* 1129.212 */                            }
/* 1129.213 */                        }
/* 1129.214 */                        else {
/* 1129.215 */                            if(bp[i][0] == y && bp[i][1] == x) {
/* 1129.216 */                                return((50 + 350 / wp.size * i + 50 + 350 / bp.size * i) / 2)
/* 1129.217 */                            }
/* 1129.218 */                        }
/* 1129.219 */                    }
/* 1129.220 */                    for(i in min_size .. max_size) {
/* 1129.221 */                        if(max_size == wp.size) {
/* 1129.222 */                            if(wp[i][0] == y && wp[i][1] == x) {
/* 1129.223 */                                return(50 + 350 / wp.size * i)
/* 1129.224 */                            }
/* 1129.225 */                        }
/* 1129.226 */                        else {
/* 1129.227 */                            if(bp[i][0] == y && bp[i][1] == x) {
/* 1129.228 */                                return(50 + 350 / bp.size * i)
/* 1129.229 */                            }
/* 1129.230 */                        }
/* 1129.231 */                    }
/* 1129.232 */                }
/* 1129.233 */                return y * 40 + 15
/* 1129.234 */            }
/* 1129.235 */            else if(step_B == 3 && step_W == 3) {
/* 1129.236 */                return 130
/* 1129.237 */            }
/* 1129.238 */            else {
/* 1129.239 */                return y * 40 + 15
/* 1129.240 */            }
/* 1129.241 */        }
/* 1129.242 */    }
/* 1129.243 */    
/* 1129.244 */    
/* 1129.245 */    
/* 1129.246 */    public func build() {
/* 1129.247 */        
/* 1129.248 */        this.observeComponentCreation({ elmtId, isInitialRender =>
/* 1129.249 */            Stack { this.observeComponentCreation({ elmtId, isInitialRender => ForEach { let forEachItemGenFunction = { entity: Array < Int64 >, index: Int64 => this.observeComponentCreation({ elmtId, isInitialRender => Image(__GenerateResource__("", "", "", app.media.white_Chess, "app.media.white_Chess",[], 20000)).height(30.0).width(30.0).opacity(WhiteAttackCheck(index)).position(x: getPosX(entity[1], 1), y: getPosY(entity[1], entity[0], 1)).onAppear({ => if(this.animateFlag && ! unopposed) {
/* 1129.250 */                animateTo(AnimateParam(duration: 600, curve: Curve.EaseOut, delay: 0, iterations: 1, playMode: PlayMode.Alternate, onFinish: { => animateTo(AnimateParam(duration: 400, curve: Curve.EaseIn, delay: 0, iterations: 1, playMode: PlayMode.Alternate, onFinish: { => animateTo(AnimateParam(duration: 100, curve: Curve.Smooth, delay: 0, iterations: 1, playMode: PlayMode.Alternate, onFinish: { => if(this.wp.size == this.bp.size) {
/* 1129.251 */                    this.step_B = 0
/* 1129.252 */                    this.step_W = 0
/* 1129.253 */                    this.animateFlag = false
/* 1129.254 */                    this.Minsize = 0
/* 1129.255 */                    this.Maxsize = 0
/* 1129.256 */                }
/* 1129.257 */                else {
/* 1129.258 */                    animateTo(AnimateParam(duration: 400, curve: Curve.EaseIn, delay: 0, iterations: 1, playMode: PlayMode.Alternate, onFinish: { => this.step_B = 0
/* 1129.259 */                        this.step_W = 0
/* 1129.260 */                        this.animateFlag = false
/* 1129.261 */                        this.wp = ObservedArrayList(ArrayList())
/* 1129.262 */                        this.bp = ObservedArrayList(ArrayList())
/* 1129.263 */                        this.Minsize = 0
/* 1129.264 */                        this.Maxsize = 0
/* 1129.265 */                    this.onHit = true }, expectedFrameRateRange: ExpectedFrameRateRange(min: 20, max: 120, expected: 90)), { => this.step_B = 3
/* 1129.266 */                    this.step_W = 3 })
/* 1129.267 */                }
/* 1129.268 */            }, expectedFrameRateRange: ExpectedFrameRateRange(min: 20, max: 120, expected: 90)), { => if(this.step_B == 2 && this.step_W == 2) {
/* 1129.269 */                if(this.wp.size > this.bp.size) {
/* 1129.270 */                    var temp: ObservedArrayList < Array < Int64 >>= ObservedArrayList(ArrayList())
/* 1129.271 */                    for(i in(this.bp.size) ..(this.wp.size)) {
/* 1129.272 */                        temp.append(this.wp[i])
/* 1129.273 */                    }
/* 1129.274 */                    this.wp = temp
/* 1129.275 */                    this.bp = ObservedArrayList(ArrayList())
/* 1129.276 */                }
/* 1129.277 */                else {
/* 1129.278 */                    var temp: ObservedArrayList < Array < Int64 >>= ObservedArrayList(ArrayList())
/* 1129.279 */                    for(i in(this.wp.size) ..(this.bp.size)) {
/* 1129.280 */                        temp.append(this.bp[i])
/* 1129.281 */                    }
/* 1129.282 */                    this.bp = temp
/* 1129.283 */                    this.wp = ObservedArrayList(ArrayList())
/* 1129.284 */                }
/* 1129.285 */            }
/* 1129.286 */        }) }, expectedFrameRateRange: ExpectedFrameRateRange(min: 20, max: 120, expected: 90)), { => this.step_B = 2
/* 1129.287 */        this.step_W = 2 }) }, expectedFrameRateRange: ExpectedFrameRateRange(min: 20, max: 120, expected: 90)), { => if(this.animateFlag && this.step_W < 1) {
/* 1129.288 */            this.step_W = 1
/* 1129.289 */            if(this.step_B == 0) {
/* 1129.290 */                this.step_B = 1
/* 1129.291 */            }
/* 1129.292 */        }
/* 1129.293 */    })
/* 1129.294 */}
/* 1129.295 */else if(this.animateFlag && unopposed) {
/* 1129.296 */    animateTo(AnimateParam(duration: 600, curve: Curve.EaseOut, delay: 0, iterations: 1, playMode: PlayMode.Alternate, onFinish: { => animateTo(AnimateParam(duration: 400, curve: Curve.EaseIn, delay: 0, iterations: 1, playMode: PlayMode.Alternate, onFinish: { => this.step_B = 0
/* 1129.297 */        this.step_W = 0
/* 1129.298 */        this.animateFlag = false
/* 1129.299 */        this.wp = ObservedArrayList(ArrayList())
/* 1129.300 */        this.bp = ObservedArrayList(ArrayList())
/* 1129.301 */        this.Minsize = 0
/* 1129.302 */        this.Maxsize = 0
/* 1129.303 */    this.onHit = true }, expectedFrameRateRange: ExpectedFrameRateRange(min: 20, max: 120, expected: 90)), { => this.step_W = 3
/* 1129.304 */    this.step_B = 3 }) }, expectedFrameRateRange: ExpectedFrameRateRange(min: 20, max: 120, expected: 90)), { => this.step_W = 1
/* 1129.305 */    this.step_B = 1 })
/* 1129.306 */}
/* 1129.307 */}) }) }
/* 1129.308 */
/* 1129.309 */this.forEachUpdateFunction(elmtId, wp, itemGenFunc: forEachItemGenFunction) } })
/* 1129.310 */this.observeComponentCreation({ elmtId, isInitialRender => ForEach { let forEachItemGenFunction = { entity: Array < Int64 >, index: Int64 => this.observeComponentCreation({ elmtId, isInitialRender => Image(__GenerateResource__("", "", "", app.media.black_Chess, "app.media.black_Chess",[], 20000)).height(30.0).width(30.0).opacity(BlackAttackCheck(index)).position(x: getPosX(entity[1], - 1), y: getPosY(entity[1], entity[0], - 1)).onAppear({ => if(this.animateFlag && ! unopposed) {
/* 1129.311 */animateTo(AnimateParam(duration: 600, curve: Curve.EaseOut, delay: 0, iterations: 1, playMode: PlayMode.Alternate, onFinish: { => animateTo(AnimateParam(duration: 400, curve: Curve.EaseIn, delay: 0, iterations: 1, playMode: PlayMode.Alternate, onFinish: { => animateTo(AnimateParam(duration: 100, curve: Curve.Smooth, delay: 0, iterations: 1, playMode: PlayMode.Alternate, onFinish: { => if(this.wp.size == this.bp.size) {
/* 1129.312 */this.step_B = 0
/* 1129.313 */this.step_W = 0
/* 1129.314 */this.animateFlag = false
/* 1129.315 */this.Minsize = 0
/* 1129.316 */this.Maxsize = 0
/* 1129.317 */}
/* 1129.318 */else {
/* 1129.319 */animateTo(AnimateParam(duration: 400, curve: Curve.EaseIn, delay: 0, iterations: 1, playMode: PlayMode.Alternate, onFinish: { => this.step_B = 0
/* 1129.320 */    this.step_W = 0
/* 1129.321 */    this.animateFlag = false
/* 1129.322 */    this.wp = ObservedArrayList(ArrayList())
/* 1129.323 */    this.bp = ObservedArrayList(ArrayList())
/* 1129.324 */    this.Minsize = 0
/* 1129.325 */    this.Maxsize = 0
/* 1129.326 */this.onHit = true }, expectedFrameRateRange: ExpectedFrameRateRange(min: 20, max: 120, expected: 90)), { => this.step_B = 3
/* 1129.327 */this.step_W = 3 })
/* 1129.328 */}
/* 1129.329 */}, expectedFrameRateRange: ExpectedFrameRateRange(min: 20, max: 120, expected: 90)), { => if(this.step_B == 2 && this.step_W == 2) {
/* 1129.330 */if(this.wp.size > this.bp.size) {
/* 1129.331 */var temp: ObservedArrayList < Array < Int64 >>= ObservedArrayList(ArrayList())
/* 1129.332 */for(i in(this.bp.size) ..(this.wp.size)) {
/* 1129.333 */    temp.append(this.wp[i])
/* 1129.334 */}
/* 1129.335 */this.wp = temp
/* 1129.336 */this.bp = ObservedArrayList(ArrayList())
/* 1129.337 */}
/* 1129.338 */else {
/* 1129.339 */var temp: ObservedArrayList < Array < Int64 >>= ObservedArrayList(ArrayList())
/* 1129.340 */for(i in(this.wp.size) ..(this.bp.size)) {
/* 1129.341 */    temp.append(this.bp[i])
/* 1129.342 */}
/* 1129.343 */this.bp = temp
/* 1129.344 */this.wp = ObservedArrayList(ArrayList())
/* 1129.345 */}
/* 1129.346 */}
/* 1129.347 */}) }, expectedFrameRateRange: ExpectedFrameRateRange(min: 20, max: 120, expected: 90)), { => this.step_B = 2
/* 1129.348 */this.step_W = 2 }) }, expectedFrameRateRange: ExpectedFrameRateRange(min: 20, max: 120, expected: 90)), { => if(this.animateFlag && this.step_B < 1) {
/* 1129.349 */this.step_B = 1
/* 1129.350 */if(this.step_W == 0) {
/* 1129.351 */this.step_W = 1
/* 1129.352 */}
/* 1129.353 */}
/* 1129.354 */})
/* 1129.355 */}
/* 1129.356 */else if(this.animateFlag && unopposed) {
/* 1129.357 */animateTo(AnimateParam(duration: 600, curve: Curve.EaseOut, delay: 0, iterations: 1, playMode: PlayMode.Alternate, onFinish: { => animateTo(AnimateParam(duration: 800, curve: Curve.Smooth, delay: 0, iterations: 1, playMode: PlayMode.Alternate, onFinish: { => this.step_B = 0
/* 1129.358 */this.step_W = 0
/* 1129.359 */this.animateFlag = false
/* 1129.360 */this.wp = ObservedArrayList(ArrayList())
/* 1129.361 */this.bp = ObservedArrayList(ArrayList())
/* 1129.362 */this.Minsize = 0
/* 1129.363 */this.Maxsize = 0
/* 1129.364 */this.onHit = true }, expectedFrameRateRange: ExpectedFrameRateRange(min: 20, max: 120, expected: 90)), { => this.step_W = 3
/* 1129.365 */this.step_B = 3 }) }, expectedFrameRateRange: ExpectedFrameRateRange(min: 20, max: 120, expected: 90)), { => this.step_W = 1
/* 1129.366 */this.step_B = 1 })
/* 1129.367 */}
/* 1129.368 */}) }) }
/* 1129.369 */
/* 1129.370 */this.forEachUpdateFunction(elmtId, bp, itemGenFunc: forEachItemGenFunction) } }) }.position(x: 0, y: 0).height(800).width(500)
/* 1129.371 */})
/* 1129.372 */
/* 1129.373 */()
/* 1129.374 */
/* 1129.375 */}
/* 1129.376 */
/* 1129.377 */
/* 1129.378 */public init(parent: Option < CustomView >, wp!: ObservedProperty < ObservedArrayList < Array < Int64 >>>, bp!: ObservedProperty < ObservedArrayList < Array < Int64 >>>, step_W!: Option < ObservedProperty < Int64 >>= None, step_B!: Option < ObservedProperty < Int64 >>= None, animateFlag!: ObservedProperty < Bool >, unopposed!: ObservedProperty < Bool >, onHit!: ObservedProperty < Bool >, Minsize!: Option < ObservedProperty < Int64 >>= None, Maxsize!: Option < ObservedProperty < Int64 >>= None, localStorage!: Option < LocalStorage >= None) {
/* 1129.379 */super(parent, localStorage)
/* 1129.380 */
/* 1129.381 */
/* 1129.382 */this.stateVarDecl_wp_ = wp
/* 1129.383 */
/* 1129.384 */this.stateVarDecl_bp_ = bp
/* 1129.385 */
/* 1129.386 */match(step_W) {
/* 1129.387 */case Some(v) => this.stateVarDecl_step_W_ = ObservedProperty < Int64 >("stateVarDecl_step_W_", v.get())
/* 1129.388 */case _ =>()
/* 1129.389 */}
/* 1129.390 */
/* 1129.391 */match(step_B) {
/* 1129.392 */case Some(v) => this.stateVarDecl_step_B_ = ObservedProperty < Int64 >("stateVarDecl_step_B_", v.get())
/* 1129.393 */case _ =>()
/* 1129.394 */}
/* 1129.395 */
/* 1129.396 */this.stateVarDecl_animateFlag_ = animateFlag
/* 1129.397 */
/* 1129.398 */this.stateVarDecl_unopposed_ = unopposed
/* 1129.399 */
/* 1129.400 */this.stateVarDecl_onHit_ = onHit
/* 1129.401 */
/* 1129.402 */match(Minsize) {
/* 1129.403 */case Some(v) => this.Minsize = v.get()
/* 1129.404 */case _ =>()
/* 1129.405 */}
/* 1129.406 */
/* 1129.407 */match(Maxsize) {
/* 1129.408 */case Some(v) => this.Maxsize = v.get()
/* 1129.409 */case _ =>()
/* 1129.410 */}
/* 1129.411 */
/* 1129.412 */
/* 1129.413 */this.stateVarDecl_wp_.subscribeEx(this)
/* 1129.414 */
/* 1129.415 */this.stateVarDecl_bp_.subscribeEx(this)
/* 1129.416 */
/* 1129.417 */this.stateVarDecl_step_W_.subscribeEx(this)
/* 1129.418 */
/* 1129.419 */this.stateVarDecl_step_B_.subscribeEx(this)
/* 1129.420 */
/* 1129.421 */this.stateVarDecl_animateFlag_.subscribeEx(this)
/* 1129.422 */
/* 1129.423 */this.stateVarDecl_unopposed_.subscribeEx(this)
/* 1129.424 */
/* 1129.425 */this.stateVarDecl_onHit_.subscribeEx(this)
/* 1129.426 */
/* 1129.427 */SubscriberManager.getInstance().add(this)
/* 1129.428 */
/* 1129.429 */
/* 1129.430 */registerSelf()
/* 1129.431 */parent?.addChildById(id(), this)
/* 1129.432 */}
/* 1129.433 */
/* 1129.434 */
/* 1129.435 */public override func aboutToBeDeleted() {
/* 1129.436 */
/* 1129.437 */this.stateVarDecl_wp_.unsubscribeEx(this)
/* 1129.438 */
/* 1129.439 */this.stateVarDecl_bp_.unsubscribeEx(this)
/* 1129.440 */
/* 1129.441 */this.stateVarDecl_step_W_.unsubscribeEx(this)
/* 1129.442 */
/* 1129.443 */this.stateVarDecl_step_B_.unsubscribeEx(this)
/* 1129.444 */
/* 1129.445 */this.stateVarDecl_animateFlag_.unsubscribeEx(this)
/* 1129.446 */
/* 1129.447 */this.stateVarDecl_unopposed_.unsubscribeEx(this)
/* 1129.448 */
/* 1129.449 */this.stateVarDecl_onHit_.unsubscribeEx(this)
/* 1129.450 */
/* 1129.451 */SubscriberManager.getInstance().delete(this)
/* 1129.452 */this.aboutToBeDeletedInternal()
/* 1129.453 */}
/* 1129.454 */
/* 1129.455 */
/* 1129.456 */func updateWithValueParams(wp!: Option < ObservedArrayList < Array < Int64 >>>= Option < ObservedArrayList < Array < Int64 >>>.None, bp!: Option < ObservedArrayList < Array < Int64 >>>= Option < ObservedArrayList < Array < Int64 >>>.None, step_W!: Option < Int64 >= Option < Int64 >.None, step_B!: Option < Int64 >= Option < Int64 >.None, animateFlag!: Option < Bool >= Option < Bool >.None, unopposed!: Option < Bool >= Option < Bool >.None, onHit!: Option < Bool >= Option < Bool >.None, Minsize!: Option < Int64 >= Option < Int64 >.None, Maxsize!: Option < Int64 >= Option < Int64 >.None): Unit {
/* 1129.457 */
/* 1129.458 */match(step_W) {
/* 1129.459 */case Some(v) => this.step_W = v
/* 1129.460 */case _ =>()
/* 1129.461 */}
/* 1129.462 */
/* 1129.463 */match(step_B) {
/* 1129.464 */case Some(v) => this.step_B = v
/* 1129.465 */case _ =>()
/* 1129.466 */}
/* 1129.467 */
/* 1129.468 */}
/* 1129.469 */
/* 1129.470 */
/* 1129.471 */public func rerender() {
/* 1129.472 */this.updateDirtyElements()
/* 1129.473 */}
/* 1129.474 */
/* 1129.475 */
/* 1129.476 */public func purgeVariableDependenciesOnElmtId(rmElmtId: Int64) {
/* 1129.477 */
/* 1129.478 */this.stateVarDecl_wp_.purgeDependencyOnElmtId(rmElmtId)
/* 1129.479 */
/* 1129.480 */this.stateVarDecl_bp_.purgeDependencyOnElmtId(rmElmtId)
/* 1129.481 */
/* 1129.482 */this.stateVarDecl_step_W_.purgeDependencyOnElmtId(rmElmtId)
/* 1129.483 */
/* 1129.484 */this.stateVarDecl_step_B_.purgeDependencyOnElmtId(rmElmtId)
/* 1129.485 */
/* 1129.486 */this.stateVarDecl_animateFlag_.purgeDependencyOnElmtId(rmElmtId)
/* 1129.487 */
/* 1129.488 */this.stateVarDecl_unopposed_.purgeDependencyOnElmtId(rmElmtId)
/* 1129.489 */
/* 1129.490 */this.stateVarDecl_onHit_.purgeDependencyOnElmtId(rmElmtId)
/* 1129.491 */
/* 1129.492 */}
/* 1129.493 */
/* 1129.494 */
/* 1129.495 */public func forceRerender(deep!: Bool = false) {
/* 1129.496 */this.forceCompleteRerender(deep)
/* 1129.497 */}
/* 1129.498 */
/* 1129.499 */
/* 1129.500 */}
/* 1129.501 */
/* ===== End of the Emit ===== */